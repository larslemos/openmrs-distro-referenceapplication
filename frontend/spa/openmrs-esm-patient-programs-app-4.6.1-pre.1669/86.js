"use strict";(globalThis.webpackChunk_openmrs_esm_patient_programs_app=globalThis.webpackChunk_openmrs_esm_patient_programs_app||[]).push([[86],{9166:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(272),a=t.n(n),o=t(2609),l=t.n(o)()(a());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-programs__programs-detailed-summary__widgetCard___R5Btc{border:1px solid #e0e0e0}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/programs/programs-detailed-summary.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCrDF,sEACE,wBAAA",sourceRoot:""}]),l.locals={widgetCard:"-esm-patient-programs__programs-detailed-summary__widgetCard___R5Btc"};const i=l},5086:(e,r,t)=>{t.r(r),t.d(r,{default:()=>j});var n=t(268),a=t.n(n),o=t(4924),l=t(7289),i=t(6759),s=t(7631),u=t(906),c=t(6217),d=t(1470),m=t(1354),p=t.n(m),g=t(1583),f=t.n(g),v=t(7378),b=t.n(v),E=t(5993),y=t.n(E),h=t(4154),P=t.n(h),Z=t(8141),C=t.n(Z),O=t(9166),w={};w.styleTagTransform=C(),w.setAttributes=y(),w.insert=b().bind(null,"head"),w.domAPI=f(),w.insertStyleElement=P(),p()(O.Z,w);const A=O.Z&&O.Z.locals?O.Z.locals:void 0;function k(){return k=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},k.apply(this,arguments)}function _(e){var r=e.programEnrollmentId,t="tablet"===(0,u.useLayoutType)(),n=(0,o.useTranslation)().t,i=a().useCallback((function(){return(0,c.launchPatientWorkspace)("programs-form-workspace",{programEnrollmentId:r})}),[r]);return a().createElement(l.zxk,{kind:"ghost",renderIcon:function(e){return a().createElement(s.I8,k({size:16},e))},iconDescription:n("editProgram","Edit Program"),onClick:i,hasIconOnly:!0,tooltipPosition:"left",size:t?"lg":"sm"})}const j=function(e){var r,t,n=e.patientUuid,s=(0,o.useTranslation)().t,m=s("programEnrollments","Program enrollments"),p=s("carePrograms","Care Programs"),g=(0,u.useConfig)(),f=!!g.customUrl,v=(0,u.useLayoutType)(),b="tablet"===v,E=(0,u.isDesktop)(v),y=(0,d.b$)(n),h=y.enrollments,P=y.isLoading,Z=y.isError,C=y.isValidating,O=y.availablePrograms,w=y.eligiblePrograms,j=y.configurablePrograms,S=(0,u.usePagination)(f?j:null!=h?h:[],5),T=(S.results,S.goTo,S.currentPage,a().useMemo((function(){return[{key:"display",header:s("activePrograms","Active programs")},{key:"location",header:s("location","Location")},{key:"dateEnrolled",header:s("dateEnrolled","Date enrolled")},{key:"status",header:s("status","Status")}]}),[s])),D=a().useMemo((function(){return null==h?void 0:h.map((function(e){var r,t;return{id:e.uuid,display:e.display,location:null!==(t=null===(r=e.location)||void 0===r?void 0:r.display)&&void 0!==t?t:"--",dateEnrolled:(0,u.formatDatetime)(new Date(e.dateEnrolled)),status:e.dateCompleted?"".concat(s("completedOn","Completed On")," ").concat((0,u.formatDate)(new Date(e.dateCompleted))):s("active","Active")}}))}),[h,s]),L=a().useCallback((function(){return(0,c.launchPatientWorkspace)("programs-form-workspace")}),[]);return P?a().createElement(l.gqd,{role:"progressbar",compact:E,zebra:!0}):Z?a().createElement(c.ErrorState,{error:Z,headerTitle:p}):(null==h?void 0:h.length)?a().createElement("div",{className:A.widgetCard},a().createElement(c.CardHeader,{title:p},a().createElement("span",null,C?a().createElement(l.lSo,null):null),g.hideAddProgramButton?null:a().createElement(l.zxk,{kind:"ghost",renderIcon:function(e){return a().createElement(i.mm,k({size:16},e))},iconDescription:"Add programs",onClick:L,disabled:(null==O?void 0:O.length)&&0===(null==w?void 0:w.length)},s("add","Add"))),(null==O?void 0:O.length)&&0===(null==w?void 0:w.length)?a().createElement(l.K0D,{style:{minWidth:"100%",margin:"0rem",padding:"0rem"},kind:"info",lowContrast:!0,subtitle:s("noEligibleEnrollments","There are no more programs left to enroll this patient in"),title:s("fullyEnrolled","Enrolled in all programs")}):null,a().createElement(l.wQF,{rows:D,headers:T,isSortable:!0,size:b?"lg":"sm",useZebraStyles:!0},(function(e){var n=e.rows,o=e.headers,i=e.getHeaderProps,s=e.getTableProps;return a().createElement(l.xJi,null,a().createElement(l.iA_,k({},s()),a().createElement(l.ssF,null,a().createElement(l.SCH,null,o.map((function(e){var t;return a().createElement(l.xDH,k({className:"".concat(A.productiveHeading01," ").concat(A.text02)},i({header:e,isSortable:e.isSortable})),null!==(r=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==r?r:e.header)})),a().createElement(l.xDH,null))),a().createElement(l.RMI,null,n.map((function(e,r){var n;return a().createElement(l.SCH,{key:e.id},e.cells.map((function(e){var r;return a().createElement(l.pj1,{key:e.id},null!==(t=null===(r=e.value)||void 0===r?void 0:r.content)&&void 0!==t?t:e.value)})),a().createElement(l.pj1,{className:"cds--table-column-menu"},a().createElement(_,{programEnrollmentId:null===(n=h[r])||void 0===n?void 0:n.uuid})))})))))}))):a().createElement(c.EmptyState,{displayText:m,headerTitle:p,launchForm:L})}},1470:(e,r,t)=>{t.d(r,{Bw:()=>c,YX:()=>p,b$:()=>g,df:()=>m,oI:()=>d});var n=t(3255),a=t(906),o=t(4221),l=t(9626),i=t(3139),s=t(6772);function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e){var r,t="/ws/rest/v1/programenrollment?patient=".concat(e,"&v=").concat("custom:(uuid,display,program,dateEnrolled,dateCompleted,location:(uuid,display))"),l=(0,n.ZP)(e?t:null,a.openmrsFetch),i=l.data,s=l.error,u=l.isLoading,c=l.isValidating,d=l.mutate,m=(null==i||null===(r=i.data)||void 0===r?void 0:r.results.length)>0?null==i?void 0:i.data.results.sort((function(e,r){return r.dateEnrolled>e.dateEnrolled?1:-1})):null,p=null==m?void 0:m.filter((function(e){return!e.dateCompleted}));return{data:i?(0,o.Z)(m,(function(e){var r;return null==e||null===(r=e.program)||void 0===r?void 0:r.uuid})):null,isError:s,isLoading:u,isValidating:c,activeEnrollments:p,mutateEnrollments:d}}function d(e){var r,t,o=(0,n.ZP)("/ws/rest/v1/program?v=custom:(uuid,display,allWorkflows,concept:(uuid,display))",a.openmrsFetch),u=o.data,c=o.error,d=o.isLoading,m=null!==(t=null==u||null===(r=u.data)||void 0===r?void 0:r.results)&&void 0!==t?t:null;return{data:m,isError:c,isLoading:d,eligiblePrograms:(0,l.Z)(m,(function(r){return!(0,i.Z)((0,s.Z)(e,"program.uuid"),r.uuid)}))}}function m(e,r){if(!e)return null;var t=e.program,n=e.patient,o=e.dateEnrolled,l=e.dateCompleted,i=e.location;return(0,a.openmrsObservableFetch)("/ws/rest/v1/programenrollment",{method:"POST",headers:{"Content-Type":"application/json"},body:{program:t,patient:n,dateEnrolled:o,dateCompleted:l,location:i},signal:r.signal})}function p(e,r,t){if(!r&&!r.program)return null;r.program;var n=r.dateEnrolled,o=r.dateCompleted,l=r.location;return(0,a.openmrsObservableFetch)("/ws/rest/v1/programenrollment/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:{dateEnrolled:n,dateCompleted:o,location:l},signal:t.signal})}var g=function(e){var r,t,o=(0,a.useConfig)().customUrl,l=c(e),i=l.data,s=l.isError,m=l.isLoading,p=l.isValidating,g=l.activeEnrollments,f=d(i),v=f.data,b=f.eligiblePrograms,E=function(e){var r,t=(0,a.useConfig)().customUrl,o=(0,n.ZP)(t?"".concat(t).concat(e):null,a.openmrsFetch),l=o.data,i=o.error,s=o.isLoading;return{configurablePrograms:null!==(r=null==l?void 0:l.data)&&void 0!==r?r:[],isLoading:s,error:i}}(e),y=E.configurablePrograms,h=E.isLoading,P=E.error;return r=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){u(e,r,t[r])}))}return e}({enrollments:i},o?{isLoading:h,isError:P}:{isLoading:m,isError:s}),t=null!=(t={isValidating:p,activeEnrollments:g,availablePrograms:v,eligiblePrograms:b,configurablePrograms:y})?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})),r}},506:(e,r,t)=>{t.d(r,{Z:()=>l});const n=function(e,r,t){for(var n=-1,a=Object(e),o=t(e),l=o.length;l--;){var i=o[++n];if(!1===r(a[i],i,a))break}return e};var a=t(4753);var o=t(3282);const l=(i=function(e,r){return e&&n(e,r,a.Z)},function(e,r){if(null==e)return e;if(!(0,o.Z)(e))return i(e,r);for(var t=e.length,n=-1,a=Object(e);++n<t&&!1!==r(a[n],n,a););return e});var i},9626:(e,r,t)=>{t.d(r,{Z:()=>s});var n=t(2300),a=t(506);const o=function(e,r){var t=[];return(0,a.Z)(e,(function(e,n,a){r(e,n,a)&&t.push(e)})),t};var l=t(4259),i=t(7885);const s=function(e,r){return((0,i.Z)(e)?n.Z:o)(e,(0,l.Z)(r,3))}},3139:(e,r,t)=>{t.d(r,{Z:()=>Z});var n=t(1721),a=t(3282),o=t(8147),l=t(7885),i=t(3391);var s=/\s/;var u=/^\s+/;const c=function(e){return e?e.slice(0,function(e){for(var r=e.length;r--&&s.test(e.charAt(r)););return r}(e)+1).replace(u,""):e};var d=t(3122),m=t(2758),p=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,f=/^0o[0-7]+$/i,v=parseInt;const b=function(e){return e?Infinity===(e=function(e){if("number"==typeof e)return e;if((0,m.Z)(e))return NaN;if((0,d.Z)(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=(0,d.Z)(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=c(e);var t=g.test(e);return t||f.test(e)?v(e.slice(2),t?2:8):p.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var E=t(5598);var y=t(4753);const h=function(e){return null==e?[]:function(e,r){return(0,E.Z)(r,(function(r){return e[r]}))}(e,(0,y.Z)(e))};var P=Math.max;const Z=function(e,r,t,s){e=(0,a.Z)(e)?e:h(e),t=t&&!s?function(e){var r=b(e),t=r%1;return r==r?t?r-t:r:0}(t):0;var u=e.length;return t<0&&(t=P(u+t,0)),function(e){return"string"==typeof e||!(0,l.Z)(e)&&(0,i.Z)(e)&&"[object String]"==(0,o.Z)(e)}(e)?t<=u&&e.indexOf(r,t)>-1:!!u&&(0,n.Z)(e,r,t)>-1}},6772:(e,r,t)=>{t.d(r,{Z:()=>u});var n=t(5598),a=t(4259),o=t(506),l=t(3282);const i=function(e,r){var t=-1,n=(0,l.Z)(e)?Array(e.length):[];return(0,o.Z)(e,(function(e,a,o){n[++t]=r(e,a,o)})),n};var s=t(7885);const u=function(e,r){return((0,s.Z)(e)?n.Z:i)(e,(0,a.Z)(r,3))}}}]);