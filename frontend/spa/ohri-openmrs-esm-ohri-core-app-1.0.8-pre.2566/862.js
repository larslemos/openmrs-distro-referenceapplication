"use strict";(globalThis.webpackChunk_ohri_openmrs_esm_ohri_core_app=globalThis.webpackChunk_ohri_openmrs_esm_ohri_core_app||[]).push([[862],{1862:(r,e,n)=>{n.d(e,{ZP:()=>p});var t=n(7900),o=n(2245),u=n(4274);function a(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function i(r,e,n,t,o,u,a){try{var i=r[u](a),c=i.value}catch(r){return void n(r)}i.done?e(c):Promise.resolve(c).then(t,o)}function c(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function l(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,o,u=[],a=!0,i=!1;try{for(n=n.call(r);!(a=(t=n.next()).done)&&(u.push(t.value),!e||u.length!==e);a=!0);}catch(r){i=!0,o=r}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return u}}(r,e)||f(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(r){return function(r){if(Array.isArray(r))return a(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||f(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(r,e){if(r){if("string"==typeof r)return a(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(r,e):void 0}}var d={dedupe:!0},p=(u.$l.defineProperty(u.J$,"defaultValue",{value:u.u_}),(0,u.s6)((function(r,e,n){var a,f,p=n.cache,b=n.compare,h=n.suspense,y=n.fallbackData,v=n.revalidateOnMount,g=n.revalidateIfStale,m=n.refreshInterval,w=n.refreshWhenHidden,E=n.refreshWhenOffline,_=n.keepPreviousData,T=l(u.DY.get(p),3),O=T[0],k=T[1],R=T[2],S=l((0,u.qC)(r),2),V=S[0],A=S[1],j=(0,t.useRef)(!1),I=(0,t.useRef)(!1),P=(0,t.useRef)(V),L=(0,t.useRef)(e),C=(0,t.useRef)(n),D=function(){return C.current},N=function(){return D().isVisible()&&D().isOnline()},x=l((0,u.JN)(p,V),4),M=x[0],W=x[1],F=x[2],U=x[3],$=(0,t.useRef)({}).current,q=(0,u.o8)(y)?n.fallback[V]:y,J=function(r,e){var n=!0;for(var t in $){var o=t;"data"===o?b(e[o],r[o])||(0,u.o8)(r[o])&&b(e[o],X)||(n=!1):e[o]!==r[o]&&(n=!1)}return n},B=(0,t.useMemo)((function(){var r=!!V&&!!e&&((0,u.o8)(v)?!D().isPaused()&&!h&&(!!(0,u.o8)(g)||g):v),n=function(e){var n=(0,u.PM)(e);return delete n._k,r?function(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){c(r,e,n[e])}))}return r}({isValidating:!0,isLoading:!0},n):n},t=M(),o=U(),a=n(t),i=t===o?a:n(o),l=a;return[function(){var r=n(M());return J(r,l)?l:l=r},function(){return i}]}),[p,V]),G=(0,o.useSyncExternalStore)((0,t.useCallback)((function(r){return F(V,(function(e,n){J(n,e)||r()}))}),[p,V]),B[0],B[1]),H=!j.current,Y=O[V]&&O[V].length>0,Z=G.data,z=(0,u.o8)(Z)?q:Z,K=G.error,Q=(0,t.useRef)(z),X=_?(0,u.o8)(Z)?Q.current:Z:z,rr=!(Y&&!(0,u.o8)(K))&&(H&&!(0,u.o8)(v)?v:!D().isPaused()&&(h?!(0,u.o8)(z)&&g:(0,u.o8)(z)||g)),er=!!(V&&e&&H&&rr),nr=(0,u.o8)(G.isValidating)?er:G.isValidating,tr=(0,u.o8)(G.isLoading)?er:G.isLoading,or=(0,t.useCallback)((a=function(r){var e,t,o,a,i,c,s,f,d,p,h,y,v,g,m,w,E;return function(r,e){var n,t,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(u){return function(i){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,t&&(o=2&u[0]?t.return:u[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,u[1])).done)return o;switch(t=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,t=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(r,a)}catch(r){u=[6,r],t=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,i])}}}(this,(function(_){switch(_.label){case 0:if(e=L.current,!V||!e||I.current||D().isPaused())return[2,!1];a=!0,i=r||{},c=!R[V]||!i.dedupe,s=function(){return u.w6?!I.current&&V===P.current&&j.current:V===P.current},f={isValidating:!1,isLoading:!1},d=function(){W(f)},p=function(){var r=R[V];r&&r[1]===o&&delete R[V]},h={isValidating:!0},(0,u.o8)(M().data)&&(h.isLoading=!0),_.label=1;case 1:return _.trys.push([1,3,,4]),c&&(W(h),n.loadingTimeout&&(0,u.o8)(M().data)&&setTimeout((function(){a&&s()&&D().onLoadingSlow(V,n)}),n.loadingTimeout),R[V]=[e(A),(0,u.u3)()]),y=l(R[V],2),t=y[0],o=y[1],[4,t];case 2:return t=_.sent(),c&&setTimeout(p,n.dedupingInterval),R[V]&&R[V][1]===o?(f.error=u.i_,v=k[V],!(0,u.o8)(v)&&(o<=v[0]||o<=v[1]||0===v[1])?(d(),c&&s()&&D().onDiscarded(V),[2,!1]):(g=M().data,f.data=b(g,t)?g:t,c&&s()&&D().onSuccess(t,V,n),[3,4])):(c&&s()&&D().onDiscarded(V),[2,!1]);case 3:return m=_.sent(),p(),w=D(),E=w.shouldRetryOnError,w.isPaused()||(f.error=m,c&&s()&&(w.onError(m,V,w),(!0===E||(0,u.mf)(E)&&E(m))&&N()&&w.onErrorRetry(m,V,w,(function(r){var e=O[V];e&&e[0]&&e[0](u.sj.ERROR_REVALIDATE_EVENT,r)}),{retryCount:(i.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return a=!1,d(),[2,!0]}}))},f=function(){var r=this,e=arguments;return new Promise((function(n,t){var o=a.apply(r,e);function u(r){i(o,n,t,u,c,"next",r)}function c(r){i(o,n,t,u,c,"throw",r)}u(void 0)}))},function(r){return f.apply(this,arguments)}),[V,p]),ur=(0,t.useCallback)((function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return u.BN.apply(void 0,[p,P.current].concat(s(e)))}),[]);if((0,u.LI)((function(){L.current=e,C.current=n,(0,u.o8)(Z)||(Q.current=Z)})),(0,u.LI)((function(){if(V){var r=or.bind(u.i_,d),e=0,n=(0,u.ko)(V,O,(function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n==u.sj.FOCUS_EVENT){var o=Date.now();D().revalidateOnFocus&&o>e&&N()&&(e=o+D().focusThrottleInterval,r())}else if(n==u.sj.RECONNECT_EVENT)D().revalidateOnReconnect&&N()&&r();else{if(n==u.sj.MUTATE_EVENT)return or();if(n==u.sj.ERROR_REVALIDATE_EVENT)return or(t)}}));return I.current=!1,P.current=V,j.current=!0,W({_k:A}),rr&&((0,u.o8)(z)||u.W6?r():(0,u.kw)(r)),function(){I.current=!0,n()}}}),[V]),(0,u.LI)((function(){var r,e=function(){var e=(0,u.mf)(m)?m(z):m;e&&-1!==r&&(r=setTimeout(n,e))},n=function(){M().error||!w&&!D().isVisible()||!E&&!D().isOnline()?e():or(d).then(e)};return e(),function(){r&&(clearTimeout(r),r=-1)}}),[m,w,E,V]),(0,t.useDebugValue)(X),h&&(0,u.o8)(z)&&V){if(!u.w6&&u.W6)throw new Error("Fallback data is required when using suspense in SSR.");throw L.current=e,C.current=n,I.current=!1,(0,u.o8)(K)?or(d):K}return{mutate:ur,get data(){return $.data=!0,X},get error(){return $.error=!0,K},get isValidating(){return $.isValidating=!0,nr},get isLoading(){return $.isLoading=!0,tr}}})))}}]);