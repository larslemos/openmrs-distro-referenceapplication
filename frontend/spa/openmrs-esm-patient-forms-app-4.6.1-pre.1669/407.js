"use strict";(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[407],{2407:(t,i,n)=>{n.r(i),n.d(i,{default:()=>s});var e=n(268),u=n.n(e),l=n(906),o=n(6217);function r(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}function a(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,u,l=[],o=!0,r=!1;try{for(n=n.call(t);!(o=(e=n.next()).done)&&(l.push(e.value),!i||l.length!==i);o=!0);}catch(t){r=!0,u=t}finally{try{o||null==n.return||n.return()}finally{if(r)throw u}}return l}}(t,i)||function(t,i){if(t){if("string"==typeof t)return r(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,i):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const s=function(t){var i,n,r,s,d,v,c,f,m,p,y,b=t.patientUuid,S=t.closeWorkspace,U=t.mutateForm,h=(0,l.usePatient)(b).patient,D=(0,o.useVisitOrOfflineVisit)(b).currentVisit,_=a((0,e.useState)(null),2),g=_[0],T=_[1],w=a((0,e.useState)(!0),2),E=w[0],k=w[1],A=(0,e.useMemo)((function(){var t;return{view:"form",formUuid:null!==(n=null==g?void 0:g.formUuid)&&void 0!==n?n:null,visitUuid:null!==(s=null!==(r=null==g?void 0:g.visitUuid)&&void 0!==r?r:null==D?void 0:D.uuid)&&void 0!==s?s:null,visitTypeUuid:null!==(v=null!==(d=null==g?void 0:g.visitTypeUuid)&&void 0!==d?d:null==D||null===(t=D.visitType)||void 0===t?void 0:t.uuid)&&void 0!==v?v:null,visitStartDatetime:null!==(f=null!==(c=null==g?void 0:g.visitStartDatetime)&&void 0!==c?c:null==D?void 0:D.startDatetime)&&void 0!==f?f:null,visitStopDatetime:null!==(p=null!==(m=null==g?void 0:g.visitStopDatetime)&&void 0!==m?m:null==D?void 0:D.stopDatetime)&&void 0!==p?p:null,patientUuid:null!=b?b:null,patient:h,encounterUuid:null!==(y=null==g?void 0:g.encounterUuid)&&void 0!==y?y:null,closeWorkspace:function(){"function"==typeof U&&U(),S()}}}),[null==g?void 0:g.formUuid,null==g?void 0:g.visitUuid,null==g?void 0:g.visitTypeUuid,null==g?void 0:g.encounterUuid,null==g?void 0:g.visitStartDatetime,null==g?void 0:g.visitStopDatetime,null==D?void 0:D.uuid,null==D||null===(i=D.visitType)||void 0===i?void 0:i.uuid,null==D?void 0:D.startDatetime,null==D?void 0:D.stopDatetime,b,h,U,S]);return(0,e.useEffect)((function(){var t=o.formEntrySub.subscribe((function(t){return T(t)}));return function(){return t.unsubscribe()}}),[]),(0,e.useEffect)((function(){A.formUuid&&(k(!1),setTimeout((function(){k(!0)})))}),[A]),u().createElement("div",null,E&&g&&b&&h&&u().createElement(l.ExtensionSlot,{extensionSlotName:"form-widget-slot",state:A}))}}}]);