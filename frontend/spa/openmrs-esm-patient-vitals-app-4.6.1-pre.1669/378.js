(globalThis.webpackChunk_openmrs_esm_patient_vitals_app=globalThis.webpackChunk_openmrs_esm_patient_vitals_app||[]).push([[378],{1757:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(272),r=i.n(n),a=i(2609),o=i.n(a)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-biometrics-form__productiveHeading03___pv0zR,.-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___KrUnH{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___KrUnH{margin:0 .5rem 1rem 0}.-esm-patient-vitals__vitals-biometrics-form__danger___Sl84T{color:#da1e28}.-esm-patient-vitals__vitals-biometrics-form__button___w5V8j{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-vitals__vitals-biometrics-form__tablet___kfbT3{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-vitals__vitals-biometrics-form__desktop___M2h6I{padding:0rem}.-esm-patient-vitals__vitals-biometrics-form__form___X68Me{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem)}.-esm-patient-vitals__vitals-biometrics-form__grid___MnsKn{margin:1rem}.-esm-patient-vitals__vitals-biometrics-form__row___XW3d8{margin:.5rem 0rem 0rem;display:flex;flex-flow:row wrap}.-esm-patient-vitals__vitals-biometrics-form__column___ZeB6k{flex-grow:1;flex-basis:0}.-esm-patient-vitals__vitals-biometrics-form__spacer___dYIyX{margin-top:3rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/vitals/vitals-biometrics-form/vitals-biometrics-form.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,4ICq0BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDj0BJ,kEAEE,qBAAA,CAGF,6DACE,aDKO,CCFT,6DACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,6DACE,mBAAA,CACA,qBD3BM,CC8BR,8DACE,YAAA,CAGF,2DACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,yBAAA,CAGF,2DACE,WAAA,CAGF,0DACE,sBAAA,CACA,YAAA,CACA,kBAAA,CAGF,6DACE,WAAA,CACA,YAAA,CAGF,6DACE,eAAA",sourceRoot:""}]),o.locals={productiveHeading03:"-esm-patient-vitals__vitals-biometrics-form__productiveHeading03___pv0zR",vitalsTitle:"-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___KrUnH",danger:"-esm-patient-vitals__vitals-biometrics-form__danger___Sl84T",button:"-esm-patient-vitals__vitals-biometrics-form__button___w5V8j",tablet:"-esm-patient-vitals__vitals-biometrics-form__tablet___kfbT3",desktop:"-esm-patient-vitals__vitals-biometrics-form__desktop___M2h6I",form:"-esm-patient-vitals__vitals-biometrics-form__form___X68Me",grid:"-esm-patient-vitals__vitals-biometrics-form__grid___MnsKn",row:"-esm-patient-vitals__vitals-biometrics-form__row___XW3d8",column:"-esm-patient-vitals__vitals-biometrics-form__column___ZeB6k",spacer:"-esm-patient-vitals__vitals-biometrics-form__spacer___dYIyX"};const l=o},1785:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(272),r=i.n(n),a=i(2609),o=i.n(a)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-biometrics-input__label01___jkE3w,.-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-vitals__vitals-biometrics-input__bodyLong01___ddl2G,.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-vitals__vitals-biometrics-input__productiveHeading04___DGZWE,.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5,.-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-patient-vitals__vitals-biometrics-input__inputContainer___OFahY{width:11.625rem;border-bottom:.063rem solid #8d8d8d;margin-bottom:1rem}.-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu{color:#525252;margin-bottom:.5rem}.-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM{border:none;text-align:center;padding:0;color:#161616}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5{height:4.875rem;display:flex;justify-content:center;flex-direction:column;text-align:center;padding:.5rem;color:#525252;background-color:#fff}.omrs-breakpoint-gt-tablet .-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5{background-color:#f4f4f4}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.red{background-color:#ffd7d9}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.red input{background-color:#ffd7d9}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.green{background-color:#a7f0ba}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.green input{background-color:#a7f0ba}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.yellow{background-color:#fcf4d6}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.yellow input{background-color:#fcf4d6}.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q{border:none;text-align:left}.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q textarea{border-bottom:none}.-esm-patient-vitals__vitals-biometrics-input__centerDiv___BrhaH{display:flex;flex-direction:row;align-items:center;text-align:center;margin:0;padding:0}.-esm-patient-vitals__vitals-biometrics-input__unitName___bqjSg{margin-bottom:.5rem}.-esm-patient-vitals__vitals-biometrics-input__disableInput___L56tw{background-color:#f4f4f4}.-esm-patient-vitals__vitals-biometrics-input__danger___c0A8K{color:#da1e28}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/vitals/vitals-biometrics-form/vitals-biometrics-input.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,kJCq0BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDj0BJ,kICi0BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CD7zBJ,sNC6zBI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDzzBJ,sEACE,eAAA,CACA,mCAAA,CACA,kBEWW,CFRb,mFAEE,aDpBQ,CCqBR,mBELW,CFQb,iEACE,WAAA,CAEA,iBAAA,CACA,SAAA,CACA,aD9BM,CCiCR,0EAEE,eAAA,CACA,YAAA,CACA,sBAAA,CACA,qBAAA,CACA,iBAAA,CACA,aEvBW,CFwBX,aDxCQ,CCyCR,qBD7CM,CCgDR,qGACA,wBDlDQ,CCsDN,8EACE,wBGsCK,CHpCL,oFACE,wBGmCG,CHhCP,gFACE,wBGTO,CHWP,sFACE,wBGZK,CHeT,iFACE,wBGsDQ,CHrDP,uFACC,wBGoDM,CHhDZ,gEACE,WAAA,CAEA,eAAA,CAEA,yEACE,kBAAA,CAIJ,iEACE,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CAGF,gEACE,mBE1EW,CF6Eb,oEACE,wBDnGM,CCsGR,8DACE,aDnFO",sourceRoot:""}]),o.locals={label01:"-esm-patient-vitals__vitals-biometrics-input__label01___jkE3w",vitalsBiometricInputLabel01:"-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu",bodyLong01:"-esm-patient-vitals__vitals-biometrics-input__bodyLong01___ddl2G",textarea:"-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q",productiveHeading04:"-esm-patient-vitals__vitals-biometrics-input__productiveHeading04___DGZWE",textInputContainer:"-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5",textInput:"-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM",inputContainer:"-esm-patient-vitals__vitals-biometrics-input__inputContainer___OFahY",centerDiv:"-esm-patient-vitals__vitals-biometrics-input__centerDiv___BrhaH",unitName:"-esm-patient-vitals__vitals-biometrics-input__unitName___bqjSg",disableInput:"-esm-patient-vitals__vitals-biometrics-input__disableInput___L56tw",danger:"-esm-patient-vitals__vitals-biometrics-input__danger___c0A8K"};const l=o},857:(e,t,i)=>{var n=i(7772).Symbol;e.exports=n},3366:(e,t,i)=>{var n=i(857),r=i(2107),a=i(7157),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?r(e):a(e)}},1242:(e,t,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;e.exports=n},2107:(e,t,i)=>{var n=i(857),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,l=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),i=e[l];try{e[l]=void 0;var n=!0}catch(e){}var r=o.call(e);return n&&(t?e[l]=i:delete e[l]),r}},7157:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7772:(e,t,i)=>{var n=i(1242),r="object"==typeof self&&self&&self.Object===Object&&self,a=n||r||Function("return this")();e.exports=a},537:(e,t,i)=>{var n=i(3366),r=i(5125);e.exports=function(e){return"number"==typeof e||r(e)&&"[object Number]"==n(e)}},5125:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},1378:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>F});var n=i(268),r=i.n(n),a=i(4924),o=i(906),l=i(6217),s=i(1336),c=i(8698),u=i(6610),m=i(1354),d=i.n(m),p=i(1583),_=i.n(p),v=i(7378),A=i.n(v),b=i(5993),g=i.n(b),f=i(4154),y=i.n(f),h=i(8141),C=i.n(h),w=i(1785),E={};E.styleTagTransform=C(),E.setAttributes=g(),E.insert=A().bind(null,"head"),E.domAPI=_(),E.insertStyleElement=y(),d()(w.Z,E);const x=w.Z&&w.Z.locals?w.Z.locals:void 0;function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){S(e,t,i[t])}))}return e}const I=function(e){var t,i,l=e.title,c=e.onInputChange,u=e.textFields,m=e.unitSymbol,d=e.textFieldStyles,p=e.textFieldWidth,_=e.placeholder,v=e.disabled,A=e.inputIsNormal,b=e.colorCode,g=e.useMuacColors,f=(0,a.useTranslation)().t,y="tablet"===(0,o.useLayoutType)(),h=(t=(0,n.useState)(!1),i=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(t,i)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?B(e,t):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),C=h[0],w=h[1];return r().createElement("div",{className:x.inputContainer,style:{width:p}},r().createElement("p",{className:x.vitalsBiometricInputLabel01},l),r().createElement("div",{className:"".concat(x.textInputContainer," ").concat(v&&x.disableInput," ").concat(!A&&x.danger," ").concat(g?b:void 0),style:O({},d)},r().createElement("div",{className:x.centerDiv},u.map((function(e){return"number"===e.type?r().createElement(n.Fragment,{key:e.name},r().createElement(s.oil,{style:O({},d),className:"".concat(x.textInput," ").concat(v&&x.disableInput," ").concat(e.className," ").concat(!A&&x.danger),id:e.name,invalid:C,type:e.type,min:e.min,max:e.max,name:e.name,onChange:function(e){return t=e.target.value,void w(!(Number(t)||""===t));var t},onInput:c,labelText:"",value:e.value,title:e.name,light:y}),null==e?void 0:e.separator):r().createElement(s.Kx8,{key:e.name,style:O({},d),className:x.textarea,id:e.name,name:e.name,labelText:"",onChange:c,rows:2,placeholder:_,value:e.value,title:e.name,light:y})}))),r().createElement("p",{className:x.unitName},m)),!A||C?r().createElement(s.lXp,{className:x.danger},f("numericInputError","Must be a number with in acceptable ranges")):null)};var k=i(1757),j={};j.styleTagTransform=C(),j.setAttributes=g(),j.insert=A().bind(null,"head"),j.domAPI=_(),j.insertStyleElement=y(),d()(k.Z,j);const U=k.Z&&k.Z.locals?k.Z.locals:void 0;function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){N(e,t,i[t])}))}return e}function R(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const F=function(e){var t,i,m,d=e.patientUuid,p=e.closeWorkspace,_=(0,a.useTranslation)().t,v="tablet"===(0,o.useLayoutType)(),A=(0,o.useSession)(),b=(0,o.usePatient)(d),g=(0,o.useVisit)(d).currentVisit,f=(0,u.yL)(d).mutate,y=(0,o.useConfig)(),h=(0,l.useVitalsConceptMetadata)(),C=h.data,w=h.conceptMetadata,E=h.conceptRanges,x=y.biometrics,B=T((0,n.useState)(),2),S=B[0],O=B[1],k=T((0,n.useState)(),2),j=k[0],D=k[1],N=T((0,n.useState)(!1),2),F=N[0],G=N[1],M=null===(i=null==g||null===(t=g.encounters)||void 0===t?void 0:t.find((function(e){var t;return(null==e||null===(t=e.form)||void 0===t?void 0:t.uuid)===y.vitals.formUuid})))||void 0===i?void 0:i.uuid,X=y.vitals.useMuacColors,W=T((0,n.useState)(""),2),H=W[0],V=W[1];(0,n.useEffect)((function(){var e;(0,c.AX)((0,c.gW)((0,o.age)(null===(e=b.patient)||void 0===e?void 0:e.birthDate)),parseInt(null==S?void 0:S.midUpperArmCircumference),V)}),[null===(m=b.patient)||void 0===m?void 0:m.birthDate,null==S?void 0:S.midUpperArmCircumference]);var L,q,Z,z,K,Y,Q,J,$,ee,te={midUpperArmCircumferenceRange:E.get(y.concepts.midUpperArmCircumferenceUuid),diastolicBloodPressureRange:E.get(y.concepts.diastolicBloodPressureUuid),systolicBloodPressureRange:E.get(y.concepts.systolicBloodPressureUuid),oxygenSaturationRange:E.get(y.concepts.oxygenSaturationUuid),respiratoryRateRange:E.get(y.concepts.respiratoryRateUuid),temperatureRange:E.get(y.concepts.temperatureUuid),weightRange:E.get(y.concepts.weightUuid),heightRange:E.get(y.concepts.heightUuid),pulseRange:E.get(y.concepts.pulseUuid)};return(0,n.useEffect)((function(){if((null==S?void 0:S.height)&&(null==S?void 0:S.weight)){var e=(0,c.V2)(Number(S.weight),Number(S.height));D(e)}}),[null==S?void 0:S.weight,null==S?void 0:S.height]),y.vitals.useFormEngine?r().createElement(o.ExtensionSlot,{extensionSlotName:"form-widget-slot",state:{view:"form",formUuid:y.vitals.formUuid,visitUuid:null==g?void 0:g.uuid,visitTypeUuid:null==g||null===(L=g.visitType)||void 0===L?void 0:L.uuid,patientUuid:null!=d?d:null,patient:b,encounterUuid:M,closeWorkspace:p}}):r().createElement(s.l09,{className:U.form},r().createElement("div",{className:U.grid},r().createElement(s.Kqy,null,r().createElement(s.sgG,{className:U.column},r().createElement("p",{className:U.vitalsTitle},_("recordVitals","Record vitals"))),r().createElement(s.X2j,{className:U.row},r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("temp","Temp"),onInputChange:function(e){O(R(P({},S),{temperature:e.target.value}))},textFields:[{name:_("temperature","Temperature"),type:"number",value:(null==S?void 0:S.temperature)||"",min:te.temperatureRange.lowAbsolute,max:te.temperatureRange.highAbsolute}],unitSymbol:null!==(q=C.get(y.concepts.temperatureUuid))&&void 0!==q?q:"",inputIsNormal:(0,c.Xr)(w,y.concepts.temperatureUuid,null==S?void 0:S.temperature)})),r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("bloodPressure","Blood Pressure"),onInputChange:function(e){"systolic"===e.target.name?O(R(P({},S),{systolicBloodPressure:e.target.value})):O(R(P({},S),{diastolicBloodPressure:e.target.value}))},textFields:[{name:_("systolic","systolic"),separator:"/",type:"number",value:(null==S?void 0:S.systolicBloodPressure)||"",min:te.systolicBloodPressureRange.lowAbsolute,max:te.systolicBloodPressureRange.highAbsolute},{name:_("diastolic","diastolic"),type:"number",value:(null==S?void 0:S.diastolicBloodPressure)||"",min:te.diastolicBloodPressureRange.lowAbsolute,max:te.diastolicBloodPressureRange.highAbsolute}],unitSymbol:null!==(Z=C.get(y.concepts.systolicBloodPressureUuid))&&void 0!==Z?Z:"",inputIsNormal:(0,c.Xr)(w,y.concepts.systolicBloodPressureUuid,null==S?void 0:S.systolicBloodPressure)&&(0,c.Xr)(w,y.concepts.diastolicBloodPressureUuid,null==S?void 0:S.diastolicBloodPressure)})),r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("pulse","Pulse"),onInputChange:function(e){O(R(P({},S),{pulse:e.target.value}))},textFields:[{name:_("pulse","Pulse"),type:"number",value:(null==S?void 0:S.pulse)||"",min:te.pulseRange.lowAbsolute,max:te.pulseRange.highAbsolute}],unitSymbol:null!==(z=C.get(y.concepts.pulseUuid))&&void 0!==z?z:"",inputIsNormal:(0,c.Xr)(w,y.concepts.pulseUuid,null==S?void 0:S.pulse)})),r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("spo2","SpO2"),onInputChange:function(e){O(R(P({},S),{oxygenSaturation:e.target.value}))},textFields:[{name:_("oxygenSaturation","Oxygen Saturation"),type:"number",value:(null==S?void 0:S.oxygenSaturation)||"",min:te.oxygenSaturationRange.lowAbsolute,max:te.oxygenSaturationRange.highAbsolute}],unitSymbol:null!==(K=C.get(y.concepts.oxygenSaturationUuid))&&void 0!==K?K:"",inputIsNormal:(0,c.Xr)(w,y.concepts.oxygenSaturationUuid,null==S?void 0:S.oxygenSaturation)}))),r().createElement(s.X2j,{className:U.row},r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("respirationRate","Respiration Rate"),onInputChange:function(e){O(R(P({},S),{respiratoryRate:e.target.value}))},textFields:[{name:_("respirationRate","Respiration Rate"),type:"number",value:(null==S?void 0:S.respiratoryRate)||"",min:te.respiratoryRateRange.lowAbsolute,max:te.respiratoryRateRange.highAbsolute}],unitSymbol:null!==(Y=C.get(y.concepts.respiratoryRateUuid))&&void 0!==Y?Y:"",inputIsNormal:(0,c.Xr)(w,y.concepts.respiratoryRateUuid,null==S?void 0:S.respiratoryRate)}))),r().createElement(s.X2j,{className:U.row},r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("notes","Notes"),onInputChange:function(e){O(R(P({},S),{generalPatientNote:e.target.value}))},textFields:[{name:_("notes","Notes"),type:"textArea",value:null==S?void 0:S.generalPatientNote}],textFieldWidth:"26.375rem",placeholder:_("additionalNoteText","Type any additional notes here"),inputIsNormal:!0})))),r().createElement(s.Kqy,{className:U.spacer},r().createElement(s.sgG,{className:U.column},r().createElement("p",{className:U.vitalsTitle},_("recordBiometrics","Record biometrics"))),r().createElement(s.X2j,{className:U.row},r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("weight","Weight"),onInputChange:function(e){O(R(P({},S),{weight:e.target.value}))},textFields:[{name:_("weight","Weight"),type:"number",value:(null==S?void 0:S.weight)||"",min:te.weightRange.lowAbsolute,max:te.weightRange.highAbsolute}],unitSymbol:null!==(Q=C.get(y.concepts.weightUuid))&&void 0!==Q?Q:"",inputIsNormal:(0,c.Xr)(w,y.concepts.weightUuid,null==S?void 0:S.weight)})),r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("height","Height"),onInputChange:function(e){O(R(P({},S),{height:e.target.value}))},textFields:[{name:_("height","Height"),type:"number",value:(null==S?void 0:S.height)||"",min:te.heightRange.lowAbsolute,max:te.heightRange.highAbsolute}],unitSymbol:null!==(J=C.get(y.concepts.heightUuid))&&void 0!==J?J:"",inputIsNormal:(0,c.Xr)(w,y.concepts.heightUuid,null==S?void 0:S.height)})),r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("bmiCalc","BMI (calc.)"),onInputChange:function(){},textFields:[{name:_("bmi","BMI"),type:"number",value:j||""}],unitSymbol:x.bmiUnit,disabled:!0,inputIsNormal:(ee=j,void 0===ee||""===ee||ee>=18.5&&ee<=24.9)})),r().createElement(s.sgG,{className:U.column},r().createElement(I,{title:_("muac","MUAC"),useMuacColors:X,colorCode:H,onInputChange:function(e){O(R(P({},S),{midUpperArmCircumference:e.target.value}))},textFields:[{name:_("muac","MUAC"),type:"number",value:(null==S?void 0:S.midUpperArmCircumference)||"",min:te.midUpperArmCircumferenceRange.lowAbsolute,max:te.midUpperArmCircumferenceRange.highAbsolute}],unitSymbol:null!==($=C.get(y.concepts.midUpperArmCircumferenceUuid))&&void 0!==$?$:"",inputIsNormal:(0,c.Xr)(w,y.concepts.midUpperArmCircumferenceUuid,null==S?void 0:S.midUpperArmCircumference)}))))),r().createElement(s.uVA,{className:v?U.tablet:U.desktop},r().createElement(s.zxk,{className:U.button,kind:"secondary",onClick:function(){return p()}},_("discard","Discard")),r().createElement(s.zxk,{className:U.button,kind:"primary",onClick:function(e){e.preventDefault();var t=!0;for(var i in S)if(0==(0,c.Xr)(w,y.concepts[i+"Uuid"],S[i])){t=!1,(0,o.showNotification)({title:_("vitalsAndBiometricsSaveError","Error saving vitals and biometrics"),kind:"error",critical:!0,description:_("checkForValidity","Some of the values entered are invalid")});break}if(t){var n;G(!0);var r=new AbortController;(0,u.tX)(y.vitals.encounterTypeUuid,y.vitals.formUuid,y.concepts,d,S,new Date,r,null==A||null===(n=A.sessionLocation)||void 0===n?void 0:n.uuid).then((function(e){201===e.status&&(f(),p(),(0,o.showToast)({critical:!0,kind:"success",title:_("vitalsAndBiometricsRecorded","Vitals and Biometrics saved"),description:_("vitalsAndBiometricsNowAvailable","They are now visible on the Vitals and Biometrics page")}))})).catch((function(e){(0,o.createErrorHandler)(),(0,o.showNotification)({title:_("vitalsAndBiometricsSaveError","Error saving vitals and biometrics"),kind:"error",critical:!0,description:null==e?void 0:e.message})})).finally((function(){r.abort()}))}},disabled:F,type:"submit"},_("saveAndClose","Save and close"))))}},8698:(e,t,i)=>{"use strict";i.d(t,{AX:()=>s,V2:()=>a,Xr:()=>o,gW:()=>l});var n=i(537),r=i.n(n);function a(e,t){if(e&&t)return e>0&&t>0?Number((e/Math.pow(t/100,2)).toFixed(1)):void 0}function o(e,t,i){if(void 0===i||""===i)return!0;var n=e.find((function(e){return e.uuid===t}));return!r()(null==n?void 0:n.lowAbsolute)||!r()(null==n?void 0:n.hiAbsolute)||Number(i)>=Number(n.lowAbsolute)&&Number(i)<=Number(n.hiAbsolute)}function l(e){var t=e.match(/\d+/g);return t?parseInt(t[0],10):null}function s(e,t,i){switch(!0){case e<=5&&t<=11.5&&t>0:i("red");break;case e<5&&t>11.5&&t<12.5:i("yellow");break;case e<5&&t>12.5:i("green");break;case e>5&&e<10&&t<=13.5&&t>0:i("red");break;case e>5&&e<10&&t>13.5&&t<14.5:i("yellow");break;case e>5&&e<10&&t>14.5:i("green");break;case e>10&&e<18&&t<=16.5&&t>0:i("red");break;case e>10&&e<18&&t>16.5&&t<19:i("yellow");break;case e>10&&e<18&&t>19:i("green");break;case e>18&&t<=19.5&&t>0:i("red");break;case e>18&&t>19&&t<22:i("yellow");break;case e>18&&t>22:i("green")}}},6610:(e,t,i)=>{"use strict";i.d(t,{WK:()=>b,tQ:()=>A,tX:()=>p,wA:()=>v,yL:()=>d});var n=i(3255),r=i(906),a=i(6217),o=i(8698);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){s(e,t,i[t])}))}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){var t,i,l,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],p=(0,r.useConfig)().concepts,_=(0,a.useVitalsConceptMetadata)().conceptMetadata,g=[p.heightUuid,p.midUpperArmCircumferenceUuid,p.weightUuid],f=d?Object.values(p).join(","):Object.values(p).filter((function(e){return!g.includes(e)})).join(","),y="".concat(r.fhirBaseUrl,"/Observation?subject:Patient=").concat(e,"&code=")+f+"&_summary=data&_sort=-date"+"&_count=".concat(100,"\n        "),h=(0,n.ZP)(y,r.openmrsFetch),C=h.data,w=h.error,E=h.isLoading,x=h.isValidating,B=h.mutate,S=function(e){switch(e){case p.systolicBloodPressureUuid:return"systolic";case p.diastolicBloodPressureUuid:return"diastolic";case p.pulseUuid:return"pulse";case p.temperatureUuid:return"temperature";case p.oxygenSaturationUuid:return"spo2";case p.respiratoryRateUuid:return"respiratoryRate";case p.heightUuid:return"height";case p.weightUuid:return"weight";case p.midUpperArmCircumferenceUuid:return"muac"}},O=function(e){var t,i,n,r,a,o,l,s;return{code:null==e||null===(t=e.code)||void 0===t||null===(i=t.coding)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.code,interpretation:v(null==e||null===(r=e.valueQuantity)||void 0===r?void 0:r.value,A(null==e||null===(a=e.code)||void 0===a||null===(o=a.coding)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.code,_)),recordedDate:null==e?void 0:e.effectiveDateTime,value:null==e||null===(s=e.valueQuantity)||void 0===s?void 0:s.value}},I=new Map,k=null==C||null===(t=C.data)||void 0===t||null===(i=t.entry)||void 0===i?void 0:i.map((function(e){return null!==(l=e.resource)&&void 0!==l?l:[]})).map(O);null==k||k.map((function(e){var t,i,n=new Date(new Date(e.recordedDate)).toISOString();I.has(n)&&I.get(n)?I.set(n,u(c({},I.get(n)),(s(t={},S(e.code),e.value),s(t,S(e.code)+"Interpretation",e.interpretation),t))):e.value&&I.set(n,(s(i={},S(e.code),e.value),s(i,S(e.code)+"Interpretation",e.interpretation),i))}));var j=Array.from(I).map((function(e,t){var i=m(e,2),n=i[0],r=i[1];return u(c({},r),{id:t.toString(),bmi:(0,o.V2)(Number(r.weight),Number(r.height)),date:n,bloodPressureInterpretation:b(r.systolic,r.diastolic,p,_)})}));return{vitals:j,isError:w,isLoading:E,isValidating:x,mutate:B}}function p(e,t,i,n,a,o,l,s){return(0,r.openmrsFetch)("/ws/rest/v1/encounter",{method:"POST",headers:{"Content-Type":"application/json"},signal:l.signal,body:{patient:n,encounterDatetime:o,location:s,encounterType:e,form:t,obs:_(a,i)}})}function _(e,t){return Object.entries(e).filter((function(e){var t=m(e,2);return t[0],null!=t[1]})).map((function(e){var i=m(e,2),n=i[0],r=i[1];return{concept:t[n+"Uuid"],value:r}}))}function v(e,t){return(null==t?void 0:t.hiCritical)&&e>=t.hiCritical?"critically_high":(null==t?void 0:t.hiNormal)&&e>t.hiNormal?"high":(null==t?void 0:t.lowCritical)&&e<=t.lowCritical?"critically_low":(null==t?void 0:t.lowNormal)&&e<t.lowNormal?"low":"normal"}function A(e,t){return e&&(null==t?void 0:t.length)?null==t?void 0:t.find((function(t){return t.uuid===e})):null}function b(e,t,i,n){var r=v(e,A(null==i?void 0:i.systolicBloodPressureUuid,n)),a=v(t,A(null==i?void 0:i.diastolicBloodPressureUuid,n));return"critically_high"===r||"critically_high"===a?"critically_high":"critically_low"===r||"critically_low"===a?"critically_low":"high"===r||"high"===a?"high":"low"===r||"low"===a?"low":"normal"}}}]);