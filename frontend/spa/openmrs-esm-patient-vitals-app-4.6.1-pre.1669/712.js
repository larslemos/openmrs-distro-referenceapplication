"use strict";(globalThis.webpackChunk_openmrs_esm_patient_vitals_app=globalThis.webpackChunk_openmrs_esm_patient_vitals_app||[]).push([[712],{8108:(t,e,a)=>{a.d(e,{Z:()=>s});var i=a(272),r=a.n(i),n=a(2609),l=a.n(n)()(r());l.push([t.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}td.-esm-patient-vitals__paginated-vitals__criticallyLow___aZhDq td:nth-child(2),td.-esm-patient-vitals__paginated-vitals__criticallyHigh___eUeRI td:nth-child(2),td.-esm-patient-vitals__paginated-vitals__low___ZYjHL td:nth-child(2),td.-esm-patient-vitals__paginated-vitals__high___kRFGr td:nth-child(2){font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}td.-esm-patient-vitals__paginated-vitals__criticallyLow___aZhDq,td.-esm-patient-vitals__paginated-vitals__criticallyHigh___eUeRI{outline:2px solid #da1e28;outline-offset:-1px}td.-esm-patient-vitals__paginated-vitals__low___ZYjHL,td.-esm-patient-vitals__paginated-vitals__high___kRFGr{outline:1px solid #000}td.-esm-patient-vitals__paginated-vitals__criticallyLow___aZhDq td:nth-child(2)::after{content:" ↓↓"}td.-esm-patient-vitals__paginated-vitals__criticallyHigh___eUeRI td:nth-child(2)::after{content:" ↑↑"}td.-esm-patient-vitals__paginated-vitals__low___ZYjHL td:nth-child(2)::after{content:" ↓"}td.-esm-patient-vitals__paginated-vitals__high___kRFGr td:nth-child(2)::after{content:" ↑"}td.-esm-patient-vitals__paginated-vitals__off-scale-low___moLj6 td:nth-child(2)::after{content:" ↓↓↓"}td.-esm-patient-vitals__paginated-vitals__off-scale-high___fnflS td:nth-child(2)::after{content:" ↑↑↑"}.-esm-patient-vitals__paginated-vitals__offScaleHigh___XpEz7,.-esm-patient-vitals__paginated-vitals__offScaleLow___Ss3WT,.-esm-patient-vitals__paginated-vitals__criticallyHigh___eUeRI,.-esm-patient-vitals__paginated-vitals__criticallyLow___aZhDq,.-esm-patient-vitals__paginated-vitals__high___kRFGr,.-esm-patient-vitals__paginated-vitals__low___ZYjHL{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-vitals__paginated-vitals__criticallyLow___aZhDq::after{content:" ↓↓"}.-esm-patient-vitals__paginated-vitals__criticallyHigh___eUeRI::after{content:" ↑↑"}.-esm-patient-vitals__paginated-vitals__low___ZYjHL::after{content:" ↓"}.-esm-patient-vitals__paginated-vitals__high___kRFGr::after{content:" ↑"}',"",{version:3,sources:["webpack://./src/vitals/paginated-vitals.scss","webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAAA,MCoDA,mBACE,CAAA,mBACA,CAAA,mBACA,CAAA,8SDjDE,2DEo0BA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CAAA,iIF9zBF,yBACE,CAAA,mBACA,CAAA,6GAGF,sBACE,CAAA,uFAIA,aACE,CAAA,wFAKF,aACE,CAAA,6EAKF,YACE,CAAA,8EAKF,YACE,CAAA,uFAKF,cACE,CAAA,wFAKF,cACE,CAAA,+VAKN,2DEgxBI,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CAAA,qEFvwBJ,aACE,CAAA,sEAGF,aACE,CAAA,2DAGF,YACE,CAAA,4DAGF,YACE",sourceRoot:""}]),l.locals={criticallyLow:"-esm-patient-vitals__paginated-vitals__criticallyLow___aZhDq",criticallyHigh:"-esm-patient-vitals__paginated-vitals__criticallyHigh___eUeRI",low:"-esm-patient-vitals__paginated-vitals__low___ZYjHL",high:"-esm-patient-vitals__paginated-vitals__high___kRFGr","off-scale-low":"-esm-patient-vitals__paginated-vitals__off-scale-low___moLj6","off-scale-high":"-esm-patient-vitals__paginated-vitals__off-scale-high___fnflS",offScaleHigh:"-esm-patient-vitals__paginated-vitals__offScaleHigh___XpEz7",offScaleLow:"-esm-patient-vitals__paginated-vitals__offScaleLow___Ss3WT"};const s=l},1597:(t,e,a)=>{a.d(e,{Z:()=>s});var i=a(272),r=a.n(i),n=a(2609),l=a.n(n)()(r());l.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-chart__label01___IkvGS,.-esm-patient-vitals__vitals-chart__vitalsSignLabel___NYx6i{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-vitals__vitals-chart__bodyShort01___M480D{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-vitals__vitals-chart__vitalsChartContainer____aVtw{display:flex;margin:0rem 1rem;flex-direction:row;justify-content:space-between}.-esm-patient-vitals__vitals-chart__vitalSignsArea___Ev8GQ{flex-grow:1;margin:.5rem 0;padding-right:1rem}.-esm-patient-vitals__vitals-chart__vitalsChartArea___v9hQk{flex-grow:4;padding:0 1rem 3rem}.-esm-patient-vitals__vitals-chart__vitalsChartArea___v9hQk .cds--cc--layout-row{height:0}.-esm-patient-vitals__vitals-chart__vitalsChartArea___v9hQk .layout-child{margin-top:.5rem}.-esm-patient-vitals__vitals-chart__vitalsSignLabel___NYx6i{margin-bottom:1rem;display:inline-block}.-esm-patient-vitals__vitals-chart__verticalTabs___rZUTb{margin:1rem 0;scroll-behavior:smooth}.-esm-patient-vitals__vitals-chart__verticalTabs___rZUTb>ul{flex-direction:column !important}.-esm-patient-vitals__vitals-chart__verticalTabs___rZUTb .cds--tabs--scrollable .cds--tabs--scrollable__nav-item+.cds--tabs--scrollable__nav-item{margin-left:0rem}.-esm-patient-vitals__vitals-chart__verticalTabs___rZUTb .cds--tabs--scrollable .cds--tabs--scrollable__nav-link{border-bottom:0 !important;border-left:2px solid #c6c6c6}.-esm-patient-vitals__vitals-chart__tab___g2wF6{outline:0;outline-offset:0}.-esm-patient-vitals__vitals-chart__tab___g2wF6:active,.-esm-patient-vitals__vitals-chart__tab___g2wF6:focus{outline:2px solid var(--brand-03) !important}.-esm-patient-vitals__vitals-chart__tab___g2wF6[aria-selected=true]{border-left:3px solid var(--brand-03);border-bottom:none;font-weight:600;margin-left:0rem !important}.-esm-patient-vitals__vitals-chart__tab___g2wF6[aria-selected=false]{border-bottom:none;border-left:2px solid #e0e0e0;margin-left:0rem !important}.-esm-patient-vitals__vitals-chart__tablist___OoHVR .cds--tab--list{flex-direction:column;max-height:fit-content;overflow-x:visible}.-esm-patient-vitals__vitals-chart__tablist___OoHVR>button .cds--tabs .cds--tabs__nav-link{border-bottom:none}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/vitals/vitals-chart.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,gHCs0BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDl0BJ,wDCk0BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD9zBJ,iEACE,YAAA,CACA,gBAAA,CACA,kBAAA,CACA,6BAAA,CAGF,2DACE,WAAA,CACA,cAAA,CACA,kBESW,CFNb,4DACE,WAAA,CACA,mBAAA,CAEA,iFACE,QAAA,CAGF,0EACE,gBAAA,CAIJ,4DAEE,kBAAA,CACA,oBAAA,CAGF,yDACE,aAAA,CACA,sBAAA,CAEA,4DACE,gCAAA,CAGF,kJACE,gBAAA,CAGF,iHACE,0BAAA,CACA,6BAAA,CAIJ,gDACE,SAAA,CACA,gBAAA,CAEA,6GACE,4CAAA,CAGF,oEACE,qCAAA,CACA,kBAAA,CACA,eAAA,CACA,2BAAA,CAGF,qEACE,kBAAA,CACA,6BAAA,CACA,2BAAA,CAKF,oEACE,qBAAA,CACA,sBAAA,CACA,kBAAA,CAGF,2FACE,kBAAA",sourceRoot:""}]),l.locals={label01:"-esm-patient-vitals__vitals-chart__label01___IkvGS",vitalsSignLabel:"-esm-patient-vitals__vitals-chart__vitalsSignLabel___NYx6i",bodyShort01:"-esm-patient-vitals__vitals-chart__bodyShort01___M480D",vitalsChartContainer:"-esm-patient-vitals__vitals-chart__vitalsChartContainer____aVtw",vitalSignsArea:"-esm-patient-vitals__vitals-chart__vitalSignsArea___Ev8GQ",vitalsChartArea:"-esm-patient-vitals__vitals-chart__vitalsChartArea___v9hQk",verticalTabs:"-esm-patient-vitals__vitals-chart__verticalTabs___rZUTb",tab:"-esm-patient-vitals__vitals-chart__tab___g2wF6",tablist:"-esm-patient-vitals__vitals-chart__tablist___OoHVR"};const s=l},1624:(t,e,a)=>{a.d(e,{Z:()=>s});var i=a(272),r=a.n(i),n=a(2609),l=a.n(n)()(r());l.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-overview__widgetCard___u3uLL{background-color:#fff;border:1px solid #e0e0e0}.-esm-patient-vitals__vitals-overview__divider___EV5ez{width:1px;height:1rem;color:#e0e0e0;margin:0rem .5rem 0rem 1rem}.-esm-patient-vitals__vitals-overview__vitalsHeaderActionItems___Zldhr{align-items:center;display:flex;flex:1 1 0%;justify-content:end}.-esm-patient-vitals__vitals-overview__vitalsHeaderActionItems___Zldhr .cds--content-switcher{max-width:max-content}.-esm-patient-vitals__vitals-overview__vitalsHeaderActionItems___Zldhr .cds--content-switcher .cds--content-switcher__label{height:1rem}.-esm-patient-vitals__vitals-overview__customRow____W_Ay tbody{white-space:nowrap}.-esm-patient-vitals__vitals-overview__backgroundDataFetchingIndicator___Op161{align-items:center;display:flex;flex:1 1 0%;justify-content:end}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/vitals/vitals-overview.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,0DACE,qBDEc,CCDd,wBAAA,CAGF,uDACE,SAAA,CACA,WCoBW,CDnBX,aDVM,CCWN,2BAAA,CAGF,uEACE,kBAAA,CACA,YAAA,CACA,WAAA,CACA,mBAAA,CAEA,8FACE,qBAAA,CAEA,4HACE,WCKO,CAAA,+DDCX,kBAAA,CAGF,+EACE,kBAAA,CACA,YAAA,CACA,WAAA,CACA,mBAAA",sourceRoot:""}]),l.locals={widgetCard:"-esm-patient-vitals__vitals-overview__widgetCard___u3uLL",divider:"-esm-patient-vitals__vitals-overview__divider___EV5ez",vitalsHeaderActionItems:"-esm-patient-vitals__vitals-overview__vitalsHeaderActionItems___Zldhr",customRow:"-esm-patient-vitals__vitals-overview__customRow____W_Ay",backgroundDataFetchingIndicator:"-esm-patient-vitals__vitals-overview__backgroundDataFetchingIndicator___Op161"};const s=l},3871:(t,e,a)=>{a.d(e,{s:()=>i});var i="patient-vitals-biometrics-form-workspace"},8698:(t,e,a)=>{a.d(e,{AX:()=>o,V2:()=>n,Xr:()=>l,gW:()=>s});var i=a(537),r=a.n(i);function n(t,e){if(t&&e)return t>0&&e>0?Number((t/Math.pow(e/100,2)).toFixed(1)):void 0}function l(t,e,a){if(void 0===a||""===a)return!0;var i=t.find((function(t){return t.uuid===e}));return!r()(null==i?void 0:i.lowAbsolute)||!r()(null==i?void 0:i.hiAbsolute)||Number(a)>=Number(i.lowAbsolute)&&Number(a)<=Number(i.hiAbsolute)}function s(t){var e=t.match(/\d+/g);return e?parseInt(e[0],10):null}function o(t,e,a){switch(!0){case t<=5&&e<=11.5&&e>0:a("red");break;case t<5&&e>11.5&&e<12.5:a("yellow");break;case t<5&&e>12.5:a("green");break;case t>5&&t<10&&e<=13.5&&e>0:a("red");break;case t>5&&t<10&&e>13.5&&e<14.5:a("yellow");break;case t>5&&t<10&&e>14.5:a("green");break;case t>10&&t<18&&e<=16.5&&e>0:a("red");break;case t>10&&t<18&&e>16.5&&e<19:a("yellow");break;case t>10&&t<18&&e>19:a("green");break;case t>18&&e<=19.5&&e>0:a("red");break;case t>18&&e>19&&e<22:a("yellow");break;case t>18&&e>22:a("green")}}},3777:(t,e,a)=>{a.d(e,{Z:()=>M,K:()=>z});var i=a(268),r=a.n(i),n=a(4924),l=a(1336),s=a(6039),o=a(2074),c=a(6759),_=a(6217),u=a(906),d=a(1354),A=a.n(d),v=a(1583),p=a.n(v),m=a(7378),g=a.n(m),h=a(5993),f=a.n(h),b=a(4154),y=a.n(b),C=a(8141),w=a.n(C),E=a(8108),S={};S.styleTagTransform=w(),S.setAttributes=f(),S.insert=g().bind(null,"head"),S.domAPI=p(),S.insertStyleElement=y(),A()(E.Z,S);const k=E.Z&&E.Z.locals?E.Z.locals:void 0;function D(){return D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},D.apply(this,arguments)}const O=function(t){var e,a=t.tableRows,i=t.pageSize,n=t.pageUrl,s=t.urlLabel,o=t.tableHeaders,c=(0,u.usePagination)(a,i),d=c.results,A=c.goTo,v=c.currentPage,p="tablet"===(0,u.useLayoutType)(),m=function(t){var e=t.interpretation,a=t.children;switch(e){case"critically_high":return r().createElement(l.pj1,{className:k.criticallyHigh},a);case"critically_low":return r().createElement(l.pj1,{className:k.criticallyLow},a);case"high":return r().createElement(l.pj1,{className:k.high},a);case"low":return r().createElement(l.pj1,{className:k.low},a);default:return r().createElement(l.pj1,null,a)}};return r().createElement("div",null,r().createElement(l.wQF,{rows:d,headers:o,isSortable:!0,size:p?"lg":"sm",useZebraStyles:!0},(function(t){var a=t.rows,i=t.headers,n=t.getHeaderProps,s=t.getTableProps;return r().createElement(l.xJi,null,r().createElement(l.iA_,D({},s(),{className:k.customRow}),r().createElement(l.ssF,null,r().createElement(l.SCH,null,i.map((function(t){var a;return r().createElement(l.xDH,D({className:"".concat(k.productiveHeading01," ").concat(k.text02)},n({header:t,isSortable:t.isSortable})),null!==(e=null===(a=t.header)||void 0===a?void 0:a.content)&&void 0!==e?e:t.header)})))),r().createElement(l.RMI,null,a.map((function(t){var e;return r().createElement(l.SCH,{key:t.id},null==t||null===(e=t.cells)||void 0===e?void 0:e.map((function(e,a){var i,n,l=d[t.id]&&d[t.id][e.id.substring(2)+"Interpretation"];return r().createElement(m,{key:"styled-".concat(a),interpretation:l},null!==(n=null===(i=e.value)||void 0===i?void 0:i.content)&&void 0!==n?n:e.value)})))})))))})),r().createElement(_.PatientChartPagination,{pageNumber:v,totalItems:a.length,currentItems:d.length,pageSize:i,onPageNumberChange:function(t){var e=t.page;return A(e)},dashboardLinkUrl:n,dashboardLinkLabel:s}))};var B=a(419),j=a(1597),U={};U.styleTagTransform=w(),U.setAttributes=f(),U.insert=g().bind(null,"head"),U.domAPI=p(),U.insertStyleElement=y(),A()(j.Z,U);const F=j.Z&&j.Z.locals?j.Z.locals:void 0;function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,r,n=[],l=!0,s=!1;try{for(a=a.call(t);!(l=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);l=!0);}catch(t){s=!0,r=t}finally{try{l||null==a.return||a.return()}finally{if(s)throw r}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?P(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I;!function(t){t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio"}(I||(I={}));const T=function(t){var e,a,s,o,c,d,A,v,p=t.patientVitals,m=t.conceptUnits,g=t.config,h=(0,n.useTranslation)().t,f=L(r().useState({title:"BP (".concat(m.get(g.concepts.systolicBloodPressureUuid),")"),value:"systolic"}),2),b=f[0],y=f[1],C=[{id:"bloodPressure",title:(0,_.withUnit)("BP",null!==(e=m.get(g.concepts.systolicBloodPressureUuid))&&void 0!==e?e:"-"),value:"systolic"},{id:"oxygenSaturation",title:(0,_.withUnit)("SPO2",null!==(a=m.get(g.concepts.oxygenSaturationUuid))&&void 0!==a?a:"-"),value:"spo2"},{id:"temperature",title:(0,_.withUnit)("Temp",null!==(s=m.get(g.concepts.temperatureUuid))&&void 0!==s?s:"-"),value:"temperature"},{id:"respiratoryRate",title:(0,_.withUnit)("R. Rate",null!==(o=m.get(g.concepts.respiratoryRateUuid))&&void 0!==o?o:"-"),value:"respiratoryRate"},{id:"pulse",title:(0,_.withUnit)("Pulse",null!==(c=m.get(g.concepts.pulseUuid))&&void 0!==c?c:"-"),value:"pulse"}],w=(0,i.useMemo)((function(){return p.filter((function(t){return t[b.value]})).splice(0,10).sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()})).map((function(t){if(t[b.value])return["systolic","diastolic"].includes(b.value)?[{group:"Systolic blood pressure",key:(0,u.formatDate)((0,u.parseDate)(t.date.toString()),{year:!1}),value:t.systolic,date:t.date},{group:"Diastolic blood pressure",key:(0,u.formatDate)((0,u.parseDate)(t.date.toString()),{year:!1}),value:t.diastolic,date:t.date}]:{group:b.title,key:(0,u.formatDate)((0,u.parseDate)(t.date.toString()),{year:!1}),value:t[b.value],date:t.date}}))}),[p,b]),E={title:b.title,axes:{bottom:{title:"Date",mapsTo:"key",scaleType:I.LABELS},left:{mapsTo:"value",title:b.title,scaleType:I.LINEAR,includeZero:!1}},legend:{enabled:!1},color:{scale:(d={},A=b.title,v="#6929c4",A in d?Object.defineProperty(d,A,{value:v,enumerable:!0,configurable:!0,writable:!0}):d[A]=v,d)},tooltip:{customHTML:function(t){var e=L(t,1)[0],a=e.value,i=e.group,r=e.key;return'<div class="cds--tooltip cds--tooltip--shown" style="min-width: max-content; font-weight:600">'.concat(a," - ").concat(String(i).toUpperCase(),'\n        <span style="color: #c6c6c6; font-size: 1rem; font-weight:600">').concat(r,"</span></div>")}},height:"400px"};return r().createElement("div",{className:F.vitalsChartContainer},r().createElement("div",{className:F.vitalSignsArea},r().createElement("label",{className:F.vitalsSignLabel,htmlFor:"vitals-chart-tab-group"},h("vitalSignDisplayed","Vital sign displayed")),r().createElement(l.mQc,{className:F.verticalTabs},r().createElement(l.tdY,{className:F.tablist,"aria-label":"Vitals signs"},C.map((function(t){var e=t.id,a=t.title,i=t.value;return r().createElement(l.OK9,{key:e,className:"".concat(F.tab," ").concat(F.bodyLong01," ").concat(b.title===a&&F.selectedTab),onClick:function(){return y({title:a,value:i})}},a)}))))),r().createElement("div",{className:F.vitalsChartArea},r().createElement(B.LineChart,{data:w.flat(),options:E})))};var x=a(6610),R=a(1624),Z={};Z.styleTagTransform=w(),Z.setAttributes=f(),Z.insert=g().bind(null,"head"),Z.domAPI=p(),Z.insertStyleElement=y(),A()(R.Z,Z);const H=R.Z&&R.Z.locals?R.Z.locals:void 0;var N=a(35);function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function G(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function z(t,e,a){_.formEntrySub.next({formUuid:t,encounterUuid:e}),(0,_.launchPatientWorkspace)("patient-form-entry-workspace",{workspaceTitle:a})}const M=function(t){var e,a,i,d,A,v,p,m=t.patientUuid,g=t.showAddVitals,h=t.pageSize,f=t.urlLabel,b=t.pageUrl,y=(0,n.useTranslation)().t,C=(0,u.useConfig)(),w=y("vitalSigns","Vital signs"),E=y("vitals","Vitals"),S=(v=r().useState(),p=2,function(t){if(Array.isArray(t))return t}(v)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,r,n=[],l=!0,s=!1;try{for(a=a.call(t);!(l=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);l=!0);}catch(t){s=!0,r=t}finally{try{l||null==a.return||a.return()}finally{if(s)throw r}}return n}}(v,p)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?V(t,e):void 0}}(v,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=S[0],D=S[1],B=(0,_.useVisitOrOfflineVisit)(m).currentVisit,j="tablet"===(0,u.useLayoutType)(),U=(0,x.yL)(m),F=U.vitals,P=U.isError,L=U.isLoading,I=U.isValidating,R=(0,_.useVitalsConceptMetadata)().data,Z=r().useCallback((function(){(0,N.c)(B,C)}),[C,B]),z=[{key:"date",header:"Date and time",isSortable:!0},{key:"temperature",header:(0,_.withUnit)("Temp",null!==(e=R.get(C.concepts.temperatureUuid))&&void 0!==e?e:"")},{key:"bloodPressure",header:(0,_.withUnit)("BP",null!==(a=R.get(C.concepts.systolicBloodPressureUuid))&&void 0!==a?a:"")},{key:"pulse",header:(0,_.withUnit)("Pulse",null!==(i=R.get(C.concepts.pulseUuid))&&void 0!==i?i:"")},{key:"respiratoryRate",header:(0,_.withUnit)("R. Rate",null!==(d=R.get(C.concepts.respiratoryRateUuid))&&void 0!==d?d:"")},{key:"spo2",header:(0,_.withUnit)("SPO2",null!==(A=R.get(C.concepts.oxygenSaturationUuid))&&void 0!==A?A:"")}],M=r().useMemo((function(){return null==F?void 0:F.map((function(t,e){var a,i,r,n,l,s,o,c;return o=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){G(t,e,a[e])}))}return t}({},t),c=null!=(c={id:"".concat(e),date:(0,u.formatDate)((0,u.parseDate)(t.date.toString()),{mode:"wide",time:!0}),bloodPressure:"".concat(null!==(a=t.systolic)&&void 0!==a?a:"--"," / ").concat(null!==(i=t.diastolic)&&void 0!==i?i:"--"),pulse:null!==(r=t.pulse)&&void 0!==r?r:"--",spo2:null!==(n=t.spo2)&&void 0!==n?n:"--",temperature:null!==(l=t.temperature)&&void 0!==l?l:"--",respiratoryRate:null!==(s=t.respiratoryRate)&&void 0!==s?s:"--"})?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(c)):function(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a.push.apply(a,i)}return a}(Object(c)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(c,t))})),o}))}),[F]);return r().createElement(r().Fragment,null,L?r().createElement(l.gqd,{role:"progressbar",compact:!j,zebra:!0}):P?r().createElement(_.ErrorState,{error:P,headerTitle:E}):(null==F?void 0:F.length)?r().createElement("div",{className:H.widgetCard},r().createElement(_.CardHeader,{title:E},r().createElement("div",{className:H.backgroundDataFetchingIndicator},r().createElement("span",null,I?r().createElement(l.lSo,null):null)),r().createElement("div",{className:H.vitalsHeaderActionItems},r().createElement(l.GHR,{onChange:function(t){return D("chartView"===t.name)},size:j?"md":"sm"},r().createElement(l.rsf,{name:"tableView"},r().createElement(s.iA,{size:16})),r().createElement(l.rsf,{name:"chartView"},r().createElement(o.eA,{size:16}))),g&&r().createElement(r().Fragment,null,r().createElement("span",{className:H.divider},"|"),r().createElement(l.zxk,{kind:"ghost",renderIcon:c.mm,iconDescription:"Add vitals",onClick:Z},y("add","Add"))))),k?r().createElement(T,{patientVitals:F,conceptUnits:R,config:C}):r().createElement(O,{tableRows:M,pageSize:h,urlLabel:f,pageUrl:b,tableHeaders:z})):r().createElement(_.EmptyState,{displayText:w,headerTitle:E,launchForm:Z}))}},35:(t,e,a)=>{a.d(e,{c:()=>l});var i=a(3871),r=a(3777),n=a(6217);function l(t,e){if(t)if(e.vitals.useFormEngine){var a=e.vitals,l=a.formUuid,s=a.formName;(0,r.K)(l,"",s)}else(0,n.launchPatientWorkspace)(i.s);else(0,n.launchStartVisitPrompt)()}},6610:(t,e,a)=>{a.d(e,{WK:()=>g,tQ:()=>m,tX:()=>A,wA:()=>p,yL:()=>d});var i=a(3255),r=a(906),n=a(6217),l=a(8698);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){o(t,e,a[e])}))}return t}function _(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a.push.apply(a,i)}return a}(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})),t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,r,n=[],l=!0,s=!1;try{for(a=a.call(t);!(l=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);l=!0);}catch(t){s=!0,r=t}finally{try{l||null==a.return||a.return()}finally{if(s)throw r}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){var e,a,s,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],A=(0,r.useConfig)().concepts,v=(0,n.useVitalsConceptMetadata)().conceptMetadata,h=[A.heightUuid,A.midUpperArmCircumferenceUuid,A.weightUuid],f=d?Object.values(A).join(","):Object.values(A).filter((function(t){return!h.includes(t)})).join(","),b="".concat(r.fhirBaseUrl,"/Observation?subject:Patient=").concat(t,"&code=")+f+"&_summary=data&_sort=-date"+"&_count=".concat(100,"\n        "),y=(0,i.ZP)(b,r.openmrsFetch),C=y.data,w=y.error,E=y.isLoading,S=y.isValidating,k=y.mutate,D=function(t){switch(t){case A.systolicBloodPressureUuid:return"systolic";case A.diastolicBloodPressureUuid:return"diastolic";case A.pulseUuid:return"pulse";case A.temperatureUuid:return"temperature";case A.oxygenSaturationUuid:return"spo2";case A.respiratoryRateUuid:return"respiratoryRate";case A.heightUuid:return"height";case A.weightUuid:return"weight";case A.midUpperArmCircumferenceUuid:return"muac"}},O=function(t){var e,a,i,r,n,l,s,o;return{code:null==t||null===(e=t.code)||void 0===e||null===(a=e.coding)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.code,interpretation:p(null==t||null===(r=t.valueQuantity)||void 0===r?void 0:r.value,m(null==t||null===(n=t.code)||void 0===n||null===(l=n.coding)||void 0===l||null===(s=l[0])||void 0===s?void 0:s.code,v)),recordedDate:null==t?void 0:t.effectiveDateTime,value:null==t||null===(o=t.valueQuantity)||void 0===o?void 0:o.value}},B=new Map,j=null==C||null===(e=C.data)||void 0===e||null===(a=e.entry)||void 0===a?void 0:a.map((function(t){return null!==(s=t.resource)&&void 0!==s?s:[]})).map(O);null==j||j.map((function(t){var e,a,i=new Date(new Date(t.recordedDate)).toISOString();B.has(i)&&B.get(i)?B.set(i,_(c({},B.get(i)),(o(e={},D(t.code),t.value),o(e,D(t.code)+"Interpretation",t.interpretation),e))):t.value&&B.set(i,(o(a={},D(t.code),t.value),o(a,D(t.code)+"Interpretation",t.interpretation),a))}));var U=Array.from(B).map((function(t,e){var a=u(t,2),i=a[0],r=a[1];return _(c({},r),{id:e.toString(),bmi:(0,l.V2)(Number(r.weight),Number(r.height)),date:i,bloodPressureInterpretation:g(r.systolic,r.diastolic,A,v)})}));return{vitals:U,isError:w,isLoading:E,isValidating:S,mutate:k}}function A(t,e,a,i,n,l,s,o){return(0,r.openmrsFetch)("/ws/rest/v1/encounter",{method:"POST",headers:{"Content-Type":"application/json"},signal:s.signal,body:{patient:i,encounterDatetime:l,location:o,encounterType:t,form:e,obs:v(n,a)}})}function v(t,e){return Object.entries(t).filter((function(t){var e=u(t,2);return e[0],null!=e[1]})).map((function(t){var a=u(t,2),i=a[0],r=a[1];return{concept:e[i+"Uuid"],value:r}}))}function p(t,e){return(null==e?void 0:e.hiCritical)&&t>=e.hiCritical?"critically_high":(null==e?void 0:e.hiNormal)&&t>e.hiNormal?"high":(null==e?void 0:e.lowCritical)&&t<=e.lowCritical?"critically_low":(null==e?void 0:e.lowNormal)&&t<e.lowNormal?"low":"normal"}function m(t,e){return t&&(null==e?void 0:e.length)?null==e?void 0:e.find((function(e){return e.uuid===t})):null}function g(t,e,a,i){var r=p(t,m(null==a?void 0:a.systolicBloodPressureUuid,i)),n=p(e,m(null==a?void 0:a.diastolicBloodPressureUuid,i));return"critically_high"===r||"critically_high"===n?"critically_high":"critically_low"===r||"critically_low"===n?"critically_low":"high"===r||"high"===n?"high":"low"===r||"low"===n?"low":"normal"}}}]);