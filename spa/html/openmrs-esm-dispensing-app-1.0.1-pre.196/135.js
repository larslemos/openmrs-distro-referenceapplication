"use strict";(self.webpackChunk_openmrs_esm_dispensing_app=self.webpackChunk_openmrs_esm_dispensing_app||[]).push([[135],{1127:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,".-esm-dispensing__action-buttons__actionBtns___W\\+gb3{float:right;margin-left:1rem;margin-top:2rem}",""]),r.locals={actionBtns:"-esm-dispensing__action-buttons__actionBtns___W+gb3"};const o=r},7591:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__medication-card__medicationTile___\\+t2rW{display:flex;flex-direction:row;justify-content:space-between;width:100%;margin:2px 0 8px;padding:0 8px 0 8px;background-color:#fff;border-left:4px solid var(--brand-03);color:#525252;margin-bottom:1rem !important}.-esm-dispensing__medication-card__medicationName___-EM\\+N{font-size:15px !important}",""]),r.locals={medicationTile:"-esm-dispensing__medication-card__medicationTile___+t2rW",medicationName:"-esm-dispensing__medication-card__medicationName___-EM+N"};const o=r},4295:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__medication-dispense-review__medicationDispenseReviewContainer___b9ZuZ{display:flex;flex-direction:column;padding-bottom:10px}.-esm-dispensing__medication-dispense-review__medicationDispenseReviewContainer___b9ZuZ .cds--css-grid{padding-left:0 !important;padding-right:0 !important}.-esm-dispensing__medication-dispense-review__dispenseDetailsContainer___DjhAn{display:flex;flex-direction:row;flex:1;gap:1rem}.-esm-dispensing__medication-dispense-review__substitutionReason___efxL5{width:100%}.-esm-dispensing__medication-dispense-review__substitutionType___dK\\+H9{width:100%}.-esm-dispensing__medication-dispense-review__productiveHeading02___\\+\\+vqK,.-esm-dispensing__medication-dispense-review__formGroup___KjyuB span{color:#525252;font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0)}.omrs-breakpoint-lt-desktop .-esm-dispensing__medication-dispense-review__formWrapper___NIVKI{background-color:#f4f4f4}.omrs-breakpoint-gt-tablet .-esm-dispensing__medication-dispense-review__formWrapper___NIVKI{background-color:#fff}.-esm-dispensing__medication-dispense-review__formGroup___KjyuB{display:flex;margin-bottom:.25rem;padding:1rem}.omrs-breakpoint-lt-desktop .-esm-dispensing__medication-dispense-review__formGroup___KjyuB>span{flex:1}.omrs-breakpoint-lt-desktop .-esm-dispensing__medication-dispense-review__formGroup___KjyuB>div{flex:3}.-esm-dispensing__medication-dispense-review__patientInfo___BsSmN{position:sticky;z-index:1000;background-color:#fff;top:3rem;overflow-y:auto}.omrs-breakpoint-lt-desktop .-esm-dispensing__medication-dispense-review__formGroup___KjyuB{flex-direction:row}.omrs-breakpoint-gt-tablet .-esm-dispensing__medication-dispense-review__formGroup___KjyuB{flex-direction:column}.-esm-dispensing__medication-dispense-review__buttonGroup___3zwj4{display:flex;position:sticky;bottom:0;width:100%}.omrs-breakpoint-lt-desktop .-esm-dispensing__medication-dispense-review__buttonGroup___3zwj4{padding:1rem 1.5rem;background-color:#fff}.-esm-dispensing__medication-dispense-review__buttonGroup___3zwj4 button{max-width:none;width:50%;height:4rem;align-items:flex-start}",""]),r.locals={medicationDispenseReviewContainer:"-esm-dispensing__medication-dispense-review__medicationDispenseReviewContainer___b9ZuZ",dispenseDetailsContainer:"-esm-dispensing__medication-dispense-review__dispenseDetailsContainer___DjhAn",substitutionReason:"-esm-dispensing__medication-dispense-review__substitutionReason___efxL5",substitutionType:"-esm-dispensing__medication-dispense-review__substitutionType___dK+H9",productiveHeading02:"-esm-dispensing__medication-dispense-review__productiveHeading02___++vqK",formGroup:"-esm-dispensing__medication-dispense-review__formGroup___KjyuB",formWrapper:"-esm-dispensing__medication-dispense-review__formWrapper___NIVKI",patientInfo:"-esm-dispensing__medication-dispense-review__patientInfo___BsSmN",buttonGroup:"-esm-dispensing__medication-dispense-review__buttonGroup___3zwj4"};const o=r},8404:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__medication-event__medicationName___S4P0B{font-size:15px !important}.-esm-dispensing__medication-event__bodyLong01___SfU-3{font-size:13px !important}.-esm-dispensing__medication-event__dosage___foiIZ,.-esm-dispensing__medication-event__quantity___SLQEY,.-esm-dispensing__medication-event__refills___5LLBD{color:#525252;font-weight:bold}",""]),r.locals={medicationName:"-esm-dispensing__medication-event__medicationName___S4P0B",bodyLong01:"-esm-dispensing__medication-event__bodyLong01___SfU-3",dosage:"-esm-dispensing__medication-event__dosage___foiIZ",quantity:"-esm-dispensing__medication-event__quantity___SLQEY",refills:"-esm-dispensing__medication-event__refills___5LLBD"};const o=r},6002:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__forms__productiveHeading02___lL\\+Tg,.-esm-dispensing__forms__formGroup___VFSOs span{color:#525252;font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0)}.omrs-breakpoint-lt-desktop .-esm-dispensing__forms__formWrapper___AYjwb{background-color:#f4f4f4}.omrs-breakpoint-gt-tablet .-esm-dispensing__forms__formWrapper___AYjwb{background-color:#fff}.-esm-dispensing__forms__formGroup___VFSOs{display:flex;margin-bottom:.25rem;padding:1rem}.omrs-breakpoint-lt-desktop .-esm-dispensing__forms__formGroup___VFSOs>span{flex:1}.omrs-breakpoint-lt-desktop .-esm-dispensing__forms__formGroup___VFSOs>div{flex:3}.-esm-dispensing__forms__bannerLoading___Fa3rm{width:100%;display:flex;justify-content:center}.-esm-dispensing__forms__patientInfo___Vdbqm{position:sticky;z-index:1000;background-color:#fff;top:3rem;overflow-y:auto}.-esm-dispensing__forms__dateTimeContainer___2UlhX{display:flex;margin:1rem 0}.-esm-dispensing__forms__timePickersContainer___I\\+jtq,.-esm-dispensing__forms__frequencyAndDay___oZCya{display:flex}.-esm-dispensing__forms__timePickersContainer___I\\+jtq>div,.-esm-dispensing__forms__frequencyAndDay___oZCya>div{margin-right:.5rem}.-esm-dispensing__forms__datePickerControl___gU9tY{display:flex;flex-direction:column}.-esm-dispensing__forms__datePickerControl___gU9tY>div{margin-bottom:1rem}.omrs-breakpoint-lt-desktop .-esm-dispensing__forms__formGroup___VFSOs{flex-direction:row}.omrs-breakpoint-gt-tablet .-esm-dispensing__forms__formGroup___VFSOs{flex-direction:column}.-esm-dispensing__forms__buttonGroup___5ML3D{display:flex;position:sticky;bottom:0;width:100%}.omrs-breakpoint-lt-desktop .-esm-dispensing__forms__buttonGroup___5ML3D{padding:1rem 1.5rem;background-color:#fff}.-esm-dispensing__forms__buttonGroup___5ML3D button{max-width:none;width:50%;height:4rem;align-items:flex-start}.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl{display:flex;width:fit-content;justify-content:flex-end;align-items:center;width:60%}.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl>div>button{background-color:#fff}.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl>div button:first-child{border-top:1px solid #a6c8ff;border-bottom:1px solid #a6c8ff;border-left:1px solid #a6c8ff;border-right:none;border-radius:.25rem 0 0px .25rem}.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl>div button:last-child{border-top:1px solid #a6c8ff;border-bottom:1px solid #a6c8ff;border-right:1px solid #a6c8ff;border-left:none;border-radius:0px .25rem .25rem 0px}.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl>div>button[aria-selected=true],.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl>div>button[aria-selected=true]:first-child{background-color:#edf5ff;color:#0f62fe;border-color:#0f62fe;border-right:1px solid #0f62fe}.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl>div>button[aria-selected=true],.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl>div>button[aria-selected=true]:last-child{background-color:#edf5ff;color:#0f62fe;border-color:#0f62fe;border-left:1px solid #0f62fe}.-esm-dispensing__forms__contentSwitcherWrapper___oTWRl>div>button[aria-selected=true]:focus{box-shadow:none}.-esm-dispensing__forms__reviewContainer___Dvr7B{margin:.8rem 0 0 0 !important}",""]),r.locals={productiveHeading02:"-esm-dispensing__forms__productiveHeading02___lL+Tg",formGroup:"-esm-dispensing__forms__formGroup___VFSOs",formWrapper:"-esm-dispensing__forms__formWrapper___AYjwb",bannerLoading:"-esm-dispensing__forms__bannerLoading___Fa3rm",patientInfo:"-esm-dispensing__forms__patientInfo___Vdbqm",dateTimeContainer:"-esm-dispensing__forms__dateTimeContainer___2UlhX",timePickersContainer:"-esm-dispensing__forms__timePickersContainer___I+jtq",frequencyAndDay:"-esm-dispensing__forms__frequencyAndDay___oZCya",datePickerControl:"-esm-dispensing__forms__datePickerControl___gU9tY",buttonGroup:"-esm-dispensing__forms__buttonGroup___5ML3D",contentSwitcherWrapper:"-esm-dispensing__forms__contentSwitcherWrapper___oTWRl",reviewContainer:"-esm-dispensing__forms__reviewContainer___Dvr7B"};const o=r},8776:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__overlay__productiveHeading01___eK5kl{font-size:var(--cds-heading-01-font-size, 0.875rem);font-weight:var(--cds-heading-01-font-weight, 600);line-height:var(--cds-heading-01-line-height, 1.42857);letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px)}.-esm-dispensing__overlay__productiveHeading02___CQOwf{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-dispensing__overlay__productiveHeading03___TSlon{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-dispensing__overlay__productiveHeading04___T7Y7s{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-dispensing__overlay__bodyLong01___OQlS8{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-dispensing__overlay__bodyShort01___UlUk7{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-dispensing__overlay__bodyShort02___enQVi{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0)}.-esm-dispensing__overlay__text02___ZYEU5{color:#525252}.-esm-dispensing__overlay__label01___ZXH48{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-dispensing__overlay__modal___S-oMb{position:fixed;width:100vw;height:100vh;display:grid;background-color:rgba(0,0,0,.5);z-index:9000;justify-items:center;align-items:center}.-esm-dispensing__overlay__desktopOverlay___3pLHv{position:fixed;top:3rem;width:37rem;right:0;bottom:0;border-left:1px solid #a8a8a8;background-color:#f4f4f4;overflow-y:auto;height:calc(100vh - 3rem)}.-esm-dispensing__overlay__desktopOverlay___3pLHv::after{height:100%;border-left:1px solid #a8a8a8}.-esm-dispensing__overlay__tabletOverlay___h8wUe{position:fixed;top:0;bottom:0;left:0;right:0;z-index:9999;background-color:#f4f4f4;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}.-esm-dispensing__overlay__tabletOverlay___h8wUe::-webkit-scrollbar{width:0}.-esm-dispensing__overlay__tabletOverlay___h8wUe>div{margin-top:3rem}.-esm-dispensing__overlay__tabletOverlayHeader___u9Oeq button{background-color:#005d5d;background-color:var(--brand-01)}.-esm-dispensing__overlay__tabletOverlayHeader___u9Oeq .-esm-dispensing__overlay__headerContent___cfc8Q{color:#fff}.-esm-dispensing__overlay__desktopHeader___Os-1d{display:flex;justify-content:space-between;align-items:center;background-color:#e0e0e0;border-bottom:1px solid #a8a8a8;position:sticky;position:-webkit-sticky;width:100%;z-index:1000;top:0}.-esm-dispensing__overlay__headerContent___cfc8Q{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);padding:0 1rem;color:#161616}.-esm-dispensing__overlay__closeButton___RUxv\\+{background-color:#fff;color:#161616;fill:#161616}.omrs-breakpoint-gt-tablet .-esm-dispensing__overlay__overlayContent___T2IiG{padding:0 0 0 0;overflow-y:auto}.omrs-breakpoint-lt-desktop .-esm-dispensing__overlay__overlayContent___T2IiG{padding:0 0 0 0;overflow-y:auto}",""]),r.locals={productiveHeading01:"-esm-dispensing__overlay__productiveHeading01___eK5kl",productiveHeading02:"-esm-dispensing__overlay__productiveHeading02___CQOwf",productiveHeading03:"-esm-dispensing__overlay__productiveHeading03___TSlon",productiveHeading04:"-esm-dispensing__overlay__productiveHeading04___T7Y7s",bodyLong01:"-esm-dispensing__overlay__bodyLong01___OQlS8",bodyShort01:"-esm-dispensing__overlay__bodyShort01___UlUk7",bodyShort02:"-esm-dispensing__overlay__bodyShort02___enQVi",text02:"-esm-dispensing__overlay__text02___ZYEU5",label01:"-esm-dispensing__overlay__label01___ZXH48",modal:"-esm-dispensing__overlay__modal___S-oMb",desktopOverlay:"-esm-dispensing__overlay__desktopOverlay___3pLHv",tabletOverlay:"-esm-dispensing__overlay__tabletOverlay___h8wUe",tabletOverlayHeader:"-esm-dispensing__overlay__tabletOverlayHeader___u9Oeq",headerContent:"-esm-dispensing__overlay__headerContent___cfc8Q",desktopHeader:"-esm-dispensing__overlay__desktopHeader___Os-1d",closeButton:"-esm-dispensing__overlay__closeButton___RUxv+",overlayContent:"-esm-dispensing__overlay__overlayContent___T2IiG"};const o=r},9736:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l{max-width:80%}.-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l form{display:flex;flex-flow:row wrap;align-items:center}.-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l form input{vertical-align:middle;margin:0 10px 0 0;padding:10px;border:1px solid #8d8d8d !important;background-color:#fff}.-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l form button{width:90px;height:20px;min-height:2.5rem !important}.-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l form .cds--btn--ghost{width:8rem !important}.-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l .-esm-dispensing__history-and-comments__requestTile___tV2US{width:100%;margin:2px 0 8px;padding:0 8px 0 8px;background-color:#fff;border-left:4px solid var(--brand-03);color:#525252;margin-bottom:1rem !important}.-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l .-esm-dispensing__history-and-comments__dispenseTile___Pc-Pr{width:100%;margin:2px 0 8px;padding:0 8px 0 8px;background-color:#fff;border-left:4px solid red;color:#525252;margin-bottom:1rem !important}.-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l .-esm-dispensing__history-and-comments__medicationEventActionMenu___ejiqe{float:right}",""]),r.locals={historyAndCommentsContainer:"-esm-dispensing__history-and-comments__historyAndCommentsContainer___LN9-l",requestTile:"-esm-dispensing__history-and-comments__requestTile___tV2US",dispenseTile:"-esm-dispensing__history-and-comments__dispenseTile___Pc-Pr",medicationEventActionMenu:"-esm-dispensing__history-and-comments__medicationEventActionMenu___ejiqe"};const o=r},8488:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__pharmacy-header__header___SqCly{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;height:6rem;background-color:#fff;display:flex;padding-left:8px;justify-content:space-between}.-esm-dispensing__pharmacy-header__left-justified-items___khP2f{display:flex;flex-direction:row;align-items:center}.-esm-dispensing__pharmacy-header__right-justified-items___JXp8x{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;padding-top:1rem}.-esm-dispensing__pharmacy-header__page-name___skDRq{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-dispensing__pharmacy-header__page-labels___9zKm2{margin-left:8px}.-esm-dispensing__pharmacy-header__page-labels___9zKm2 p:first-of-type{margin-bottom:.25rem}.-esm-dispensing__pharmacy-header__date-and-location___X19rr{display:flex;justify-content:flex-end;align-items:center;margin-right:1rem}.-esm-dispensing__pharmacy-header__value___KSx0o{margin-left:.25rem}.-esm-dispensing__pharmacy-header__middot___mO9w-{margin:0 .5rem}.-esm-dispensing__pharmacy-header__view___rdi8M{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}",""]),r.locals={header:"-esm-dispensing__pharmacy-header__header___SqCly","left-justified-items":"-esm-dispensing__pharmacy-header__left-justified-items___khP2f","right-justified-items":"-esm-dispensing__pharmacy-header__right-justified-items___JXp8x","page-name":"-esm-dispensing__pharmacy-header__page-name___skDRq","page-labels":"-esm-dispensing__pharmacy-header__page-labels___9zKm2","date-and-location":"-esm-dispensing__pharmacy-header__date-and-location___X19rr",value:"-esm-dispensing__pharmacy-header__value___KSx0o",middot:"-esm-dispensing__pharmacy-header__middot___mO9w-",view:"-esm-dispensing__pharmacy-header__view___rdi8M"};const o=r},583:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__prescription-details__prescriptionTile___wvAJ0{width:100%;margin:2px 0 8px;padding:0 8px 0 8px;background-color:#fff;border-left:4px solid var(--brand-03);color:#525252;margin-bottom:1rem !important}.-esm-dispensing__prescription-details__prescriptionContainer___g0U1R{display:flex;flex-direction:column;max-width:80%;margin-bottom:1rem}.-esm-dispensing__prescription-details__prescriptionContainer___g0U1R.cds--tile{min-height:3rem !important;padding-left:10px !important}.-esm-dispensing__prescription-details__prescriptionContainer___g0U1R>.cds--tile{min-height:3rem !important;padding-left:10px !important;margin:auto}.-esm-dispensing__prescription-details__allergiesTile___YUpd1{width:100%;height:24px;padding:0 8px 0 0;border-left:4px solid #f1c21b;background-color:rgba(253,209,58,.3);margin:auto}.-esm-dispensing__prescription-details__allergesContent___OgvXG{margin:auto;padding-top:10px}.-esm-dispensing__prescription-details__allergesContent___OgvXG div{display:flex;flex-direction:row}.-esm-dispensing__prescription-details__allergesContent___OgvXG p{margin-left:10px;font-size:.9rem;width:80%}.-esm-dispensing__prescription-details__allergesContent___OgvXG a{margin:auto;color:#0f62fe;text-decoration:none;text-align:right}svg.-esm-dispensing__prescription-details__allergiesIcon___JMdna{fill:#f1c21b;vertical-align:middle}",""]),r.locals={prescriptionTile:"-esm-dispensing__prescription-details__prescriptionTile___wvAJ0",prescriptionContainer:"-esm-dispensing__prescription-details__prescriptionContainer___g0U1R",allergiesTile:"-esm-dispensing__prescription-details__allergiesTile___YUpd1",allergesContent:"-esm-dispensing__prescription-details__allergesContent___OgvXG",allergiesIcon:"-esm-dispensing__prescription-details__allergiesIcon___JMdna"};const o=r},4511:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__prescription-expanded__expandedTabsParentContainer___zs0a7{display:flex;flex-direction:column;margin-bottom:1rem}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K{display:flex;flex-direction:row}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K .cds--tabs{margin:1rem 0;width:20%;max-height:8rem !important}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K .cds--tab--list{flex-direction:column !important}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K .cds--tab-content{margin:1rem 0;width:100% !important}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K .cds--tabs__nav-link{border-bottom:0 !important;border-left:3px solid #e0e0e0 !important}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K .cds--tabs__nav-item--selected{border-bottom:0px !important;border-left:3px solid var(--brand-03) !important}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K.cds--tabs--scrollable .cds--tabs--scrollable__nav-item+.cds--tabs--scrollable__nav-item{margin-left:0rem !important}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K>ul{flex-direction:column !important}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K>ul>li button{width:12rem !important}.-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K .cds--tabs__nav-link{max-width:12rem !important}",""]),r.locals={expandedTabsParentContainer:"-esm-dispensing__prescription-expanded__expandedTabsParentContainer___zs0a7",expandedTabsContainer:"-esm-dispensing__prescription-expanded__expandedTabsContainer___3zE2K"};const o=r},9803:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(3645),r=t.n(i)()((function(e){return e[1]}));r.push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-dispensing__prescriptions__productiveHeading01___dogtN{font-size:var(--cds-heading-01-font-size, 0.875rem);font-weight:var(--cds-heading-01-font-weight, 600);line-height:var(--cds-heading-01-line-height, 1.42857);letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px)}.-esm-dispensing__prescriptions__productiveHeading02___gjwi\\+{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-dispensing__prescriptions__productiveHeading03___cx0BG{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-dispensing__prescriptions__productiveHeading04___GvlBM{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-dispensing__prescriptions__bodyLong01___LKG7k{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-dispensing__prescriptions__bodyShort01___nIOkA{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-dispensing__prescriptions__bodyShort02___\\+FkDH{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0)}.-esm-dispensing__prescriptions__text02___GreNi{color:#525252}.-esm-dispensing__prescriptions__label01___HdsaA{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-dispensing__prescriptions__modal___6Bztk{position:fixed;width:100vw;height:100vh;display:grid;background-color:rgba(0,0,0,.5);z-index:9000;justify-items:center;align-items:center}title{width:6.938rem;height:1.75rem;margin:.438rem 22.875rem .813rem 0;font-family:IBMPlexSans;font-size:1.25rem;font-weight:normal;font-stretch:normal;font-style:normal;line-height:1.4;letter-spacing:normal}.-esm-dispensing__prescriptions__link___nh1F1{text-decoration:none}.-esm-dispensing__prescriptions__breadcrumbsSlot___s3KgQ{grid-row:1/2;grid-column:1/2}.-esm-dispensing__prescriptions__prescriptionTabsContainer___nXUfg{height:100%;width:100%}.-esm-dispensing__prescriptions__prescriptionTabsContainer___nXUfg .cds--tab-content{padding:0 !important}.-esm-dispensing__prescriptions__prescriptionTabs___3aZuw{grid-column:"span 2";padding:0 1rem}.-esm-dispensing__prescriptions__newListButton___cGpxv{width:fit-content;justify-self:end;align-self:center}.-esm-dispensing__prescriptions__tabsContainer___74mkw{background-color:#fff}.-esm-dispensing__prescriptions__tabsContainer___74mkw .cds--tabs__nav-item--selected{box-shadow:inset 0 2px 0 0 var(--brand-03) !important}.-esm-dispensing__prescriptions__tabsContainer___74mkw .cds--tab--list button{max-width:12rem !important}.-esm-dispensing__prescriptions__hiddenTabsContent___krxGf,.-esm-dispensing__prescriptions__tabs___QV2Z9 .-esm-dispensing__prescriptions__hiddenTabsContent___krxGf{display:none}.-esm-dispensing__prescriptions__patientListTableContainer___dKqZ6{grid-row:3/4;grid-column:1/2;height:100%;margin:.5rem 1rem;background-color:#f4f4f4;border:.5px solid #e0e0e0}.-esm-dispensing__prescriptions__patientListTableContainer___dKqZ6 .cds--data-table-container{padding-top:0 !important}.-esm-dispensing__prescriptions__patientListTableContainer___dKqZ6 tbody>tr>:nth-child(2){white-space:nowrap}.-esm-dispensing__prescriptions__patientListTableContainer___dKqZ6 .cds--data-table td{height:unset !important}.-esm-dispensing__prescriptions__patientListTableContainer___dKqZ6 .cds--data-table--zebra tbody tr[data-parent-row]:nth-child(4n+1) td{background-color:#fff;border-bottom:1px solid #e0e0e0;border-top:1px solid #e0e0e0}.-esm-dispensing__prescriptions__patientListTableContainer___dKqZ6 .cds--data-table--zebra tbody tr[data-parent-row]:nth-child(4n+3) td{background-color:#f4f4f4;border-bottom:1px solid #e0e0e0}.-esm-dispensing__prescriptions__searchContainer___J0rpK{display:flex;align-items:center;flex-direction:row-reverse;padding-top:.5rem}.-esm-dispensing__prescriptions__searchContainer___J0rpK .cds--search-magnifier-icon{z-index:0 !important}.-esm-dispensing__prescriptions__searchContainer___J0rpK input{background-color:#fff}.-esm-dispensing__prescriptions__addPrescriptionBtn___KF0Z3{width:10rem !important;padding:.5rem !important;margin-left:1rem;margin-right:1rem}.-esm-dispensing__prescriptions__patientSearch___4Loxt{width:25rem;border-bottom-color:#e0e0e0}.-esm-dispensing__prescriptions__locationFilter___znalM{width:25rem}.-esm-dispensing__prescriptions__search___56gcv{width:100%;max-width:16rem;background-color:#fff;border-bottom-color:#e0e0e0}',""]),r.locals={productiveHeading01:"-esm-dispensing__prescriptions__productiveHeading01___dogtN",productiveHeading02:"-esm-dispensing__prescriptions__productiveHeading02___gjwi+",productiveHeading03:"-esm-dispensing__prescriptions__productiveHeading03___cx0BG",productiveHeading04:"-esm-dispensing__prescriptions__productiveHeading04___GvlBM",bodyLong01:"-esm-dispensing__prescriptions__bodyLong01___LKG7k",bodyShort01:"-esm-dispensing__prescriptions__bodyShort01___nIOkA",bodyShort02:"-esm-dispensing__prescriptions__bodyShort02___+FkDH",text02:"-esm-dispensing__prescriptions__text02___GreNi",label01:"-esm-dispensing__prescriptions__label01___HdsaA",modal:"-esm-dispensing__prescriptions__modal___6Bztk",link:"-esm-dispensing__prescriptions__link___nh1F1",breadcrumbsSlot:"-esm-dispensing__prescriptions__breadcrumbsSlot___s3KgQ",prescriptionTabsContainer:"-esm-dispensing__prescriptions__prescriptionTabsContainer___nXUfg",prescriptionTabs:"-esm-dispensing__prescriptions__prescriptionTabs___3aZuw",newListButton:"-esm-dispensing__prescriptions__newListButton___cGpxv",tabsContainer:"-esm-dispensing__prescriptions__tabsContainer___74mkw",hiddenTabsContent:"-esm-dispensing__prescriptions__hiddenTabsContent___krxGf",tabs:"-esm-dispensing__prescriptions__tabs___QV2Z9",patientListTableContainer:"-esm-dispensing__prescriptions__patientListTableContainer___dKqZ6",searchContainer:"-esm-dispensing__prescriptions__searchContainer___J0rpK",addPrescriptionBtn:"-esm-dispensing__prescriptions__addPrescriptionBtn___KF0Z3",patientSearch:"-esm-dispensing__prescriptions__patientSearch___4Loxt",locationFilter:"-esm-dispensing__prescriptions__locationFilter___znalM",search:"-esm-dispensing__prescriptions__search___56gcv"};const o=r},9331:(e,n,t)=>{t.d(n,{FI:()=>l,HX:()=>m,IG:()=>s,Is:()=>o,JB:()=>i,Ph:()=>f,UW:()=>u,YG:()=>d,aZ:()=>_,ar:()=>p,nj:()=>a,q:()=>c}),window.getOpenmrsSpaBase;var i="".concat(window.spaBase).concat("/dispensing"),r="http://fhir.openmrs.org/ext",o=r+"/medicine",s=r+"/medicationdispense/recorded",a=r+"/medicationrequest/fullfillerstatus",d="Task: dispensing.create.dispense",l="Task: dispensing.create.dispense.allowSubstitutions",c="Task: dispensing.edit.dispense",u="Task: dispensing.delete.dispense",p="Task: dispensing.delete.dispense.ifCreator",_="application/merge-patch+json",m="Encounter?_query=encountersWithMedicationRequests",f="MedicationRequest"},8236:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ln});var i=t(1672),r=t.n(i),o=t(4976),s=t(3133),a=t(8115),d=t(3907);function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var c={isOverlayOpen:!1,component:Function,header:""},u=function(){return(0,d.getGlobalStore)("dispensing-store",c)},p=function(e,n){u().setState({isOverlayOpen:!0,component:n,header:e})},_=function(){u().setState({component:null,isOverlayOpen:!1})},m=t(3379),f=t.n(m),g=t(7795),v=t.n(g),h=t(569),b=t.n(h),y=t(3565),w=t.n(y),E=t(9216),x=t.n(E),C=t(4589),S=t.n(C),T=t(8776),k={};k.styleTagTransform=S(),k.setAttributes=w(),k.insert=b().bind(null,"head"),k.domAPI=v(),k.insertStyleElement=x(),f()(T.Z,k);const O=T.Z&&T.Z.locals?T.Z.locals:void 0;var A=t(3397);const P=function(){var e=function(){var e,n,t=(e=(0,i.useState)(),n=2,function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1];return(0,i.useEffect)((function(){var e=function(e){o(e)};e(u().getState()),u().subscribe(e)}),[]),{isOverlayOpen:null==r?void 0:r.isOverlayOpen,component:null==r?void 0:r.component,header:null==r?void 0:r.header}}(),n=e.header,t=e.component,c=e.isOverlayOpen,p=(0,d.useLayoutType)(),m=(0,A.useTranslation)().t;return r().createElement(r().Fragment,null,c&&r().createElement("div",{className:"tablet"!==p?O.desktopOverlay:O.tabletOverlay},"tablet"!==p?r().createElement("div",{className:O.desktopHeader},r().createElement("div",{className:O.headerContent},n),r().createElement(o.zxk,{className:O.closePanelButton,onClick:function(){return _()},kind:"ghost",hasIconOnly:!0},r().createElement(s.x8,{size:16}))):r().createElement(o.h4i,{onClick:function(){return _()},"aria-label":m("tabletOverlay","Tablet overlay"),className:O.tabletOverlayHeader},r().createElement(o.zxk,{hasIconOnly:!0},r().createElement(a.Xd,{size:16})),r().createElement("div",{className:O.headerContent},n)),r().createElement("div",null,t)))};var D=t(3570),I=t(2411);const j=function(){return r().createElement("svg",{width:"62",height:"58",viewBox:"0 0 62 58",xmlns:"http://www.w3.org/2000/svg"},r().createElement("defs",null,r().createElement("path",{id:"whv9q6f4ta",d:"M0 0h62v30.508H0z"}),r().createElement("path",{id:"hp71ojgcnc",d:"M0 0h24.603v26.571H0z"})),r().createElement("g",{fill:"none"},r().createElement("g",{opacity:".193",transform:"matrix(-1 0 0 1 62 26.571)"},r().createElement("path",{d:"M62 0c0 16.85-13.916 30.508-31.037 30.508S0 16.849 0 0h62z",fill:"var(--brand-03)",mask:"url(#rt0c8mo6eb)"})),r().createElement("g",{opacity:".396",transform:"matrix(-1 0 0 1 60.032 0)"},r().createElement("path",{d:"m24.603 26.571-13.35-23.51C9.592.141 5.884-.869 3.011.817.138 2.503-.855 6.272.804 9.193l9.874 17.378",fill:"var(--brand-03)",mask:"url(#hgianthqwd)"}))))};var q=t(8488),R={};R.styleTagTransform=S(),R.setAttributes=w(),R.insert=b().bind(null,"head"),R.domAPI=v(),R.insertStyleElement=x(),f()(q.Z,R);const U=q.Z&&q.Z.locals?q.Z.locals:void 0;var N=function(){var e,n=(0,A.useTranslation)().t,t=(0,d.useSession)(),i=(0,d.useConfig)(),o=null==t||null===(e=t.sessionLocation)||void 0===e?void 0:e.display;return r().createElement("div",{className:U.header},r().createElement("div",{className:U["left-justified-items"]},r().createElement(j,null),r().createElement("div",{className:U["page-labels"]},r().createElement(D.Ye,{size:16}),r().createElement("span",{className:U.value},o),r().createElement("p",{className:U["page-name"]},n("appName",i.appName)," "))),r().createElement("div",{className:U["right-justified-items"]},r().createElement("div",{className:U["date-and-location"]},r().createElement(I.f,{size:16}),r().createElement("span",{className:U.value},(0,d.formatDate)(new Date,{mode:"standard"})))))},z=t(9736),L={};L.styleTagTransform=S(),L.setAttributes=w(),L.insert=b().bind(null,"head"),L.domAPI=v(),L.insertStyleElement=x(),f()(z.Z,L);const Z=z.Z&&z.Z.locals?z.Z.locals:void 0;var M,B,H,F,G=t(3757);!function(e){e.on_hold="on-hold",e.completed="completed",e.declined="declined"}(M||(M={})),function(e){e.active="active",e.cancelled="cancelled",e.completed="completed",e.expired="expired"}(B||(B={})),function(e){e.on_hold="ON_HOLD",e.declined="DECLINED",e.completed="COMPLETED"}(H||(H={})),function(e){e.active="active",e.cancelled="cancelled",e.completed="completed",e.expired="expired",e.on_hold="on-hold",e.declined="declined",e.unknown="unknown"}(F||(F={}));var K=t(9331),W=t(2653),Q=t.n(W);function V(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function Y(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return V(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?V(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,n){if(n&&ne(e)<=0)return H.completed;var t=ce(e.dispenses);return t===M.declined?H.declined:t===M.on_hold?H.on_hold:null}function J(e,n){var t=$(e,n),i=ae(e);if(t!==B.active){if(t===B.expired)return F.expired;if(t===B.completed)return F.completed;if(t===B.cancelled)return F.cancelled}return i===H.declined?F.declined:i===H.on_hold?F.on_hold:F.active}function $(e,n){var t,i;return e.status===B.cancelled||e.status===B.completed?e.status:(null===(t=e.dispenseRequest)||void 0===t||null===(i=t.validityPeriod)||void 0===i?void 0:i.start)&&Q()(e.dispenseRequest.validityPeriod.start).isBefore(Q()().startOf("day").subtract(n,"day"))?B.expired:B.active}function ee(e,n){var t=function(e,n){if(!e||0===e.length)return null;var t=e.map((function(e){return J(e,n)}));return t.includes(F.active)?F.active:t.includes(F.on_hold)?F.on_hold:t.includes(F.completed)?F.completed:t.includes(F.declined)?F.declined:t.includes(F.cancelled)?F.cancelled:t.includes(F.expired)?F.expired:null}(e,n);return null===t?null:t===F.active?"active":t===F.on_hold?"paused":t===F.completed?"completed":t===F.declined?"closed":t===F.expired?"expired":t===F.cancelled?"cancelled":null}function ne(e){if(e){if(!ge([e.request].concat(Y(e.dispenses))))throw new Error("Cannot calculate quantity remaining, units dont match");return r=ve(n=e.request),((null===(t=n.dispenseRequest)||void 0===t||null===(i=t.quantity)||void 0===i?void 0:i.value)?n.dispenseRequest.quantity.value*(1+(r||0)):null)-function(e){if(e){if(!ge(e))throw new Error("Can't calculate quantity dispensed if units don't match");var n=e.map((function(e){var n,t;return(null===(n=e.quantity)||void 0===n?void 0:n.value)?null===(t=e.quantity)||void 0===t?void 0:t.value:0})).reduce((function(e,n){return e+n}),0);return n}return 0}(e.dispenses)}var n,t,i,r;return 0}function te(e,n){return null==n?void 0:n.filter((function(n){var t;return null==n||null===(t=n.authorizingPrescription)||void 0===t?void 0:t.some((function(n){return n.reference.endsWith(e.id)}))}))}function ie(e){return e?e.find((function(e){return!("system"in e)||void 0===e.system})):null}function re(e){var n;return null===(n=ie(e))||void 0===n?void 0:n.display}function oe(e){var n;return null===(n=ie(e))||void 0===n?void 0:n.code}function se(e){var n,t;return null===(t=null==e||null===(n=e.extension)||void 0===n?void 0:n.find((function(e){return e.url===K.IG})))||void 0===t?void 0:t.valueDateTime}function ae(e){var n,t;return null===(t=null==e||null===(n=e.extension)||void 0===n?void 0:n.find((function(e){return e.url===K.nj})))||void 0===t?void 0:t.valueCode}function de(e){return e.medicationReference?e.medicationReference.display:re(null==e?void 0:e.medicationCodeableConcept.coding)+": "+(null==e?void 0:e.medicationCodeableConcept.text)}function le(e){return{medicationReference:e.medicationReference,medicationCodeableConcept:e.medicationCodeableConcept}}function ce(e){var n=null==e?void 0:e.sort(ye);return n&&n.length>0?n[0].status:null}function ue(e){if(!e||!e.extension)return null;var n=e.extension.find((function(e){return e.url===K.Is}));if(!n||!n.extension)return null;var t=n.extension.find((function(e){return e.url===K.Is+"#drugName"}));return t?t.valueString:null}function pe(e,n,t,i,r){return me("".concat(d.fhirBaseUrl,"/").concat(K.HX,"&_getpagesoffset=").concat(e,"&_count=").concat(n,"&date=ge").concat(t,"&status=active"),i,r)}function _e(e,n,t,i){return me("".concat(d.fhirBaseUrl,"/").concat(K.HX,"&_getpagesoffset=").concat(e,"&_count=").concat(n),t,i)}function me(e,n,t){return n&&(e="".concat(e,"&patientSearchTerm=").concat(n)),t&&(e="".concat(e,"&location=").concat(t)),e}function fe(e){var n;return"MedicationRequest"==e.resourceType?null===(n=e.dispenseRequest)||void 0===n?void 0:n.quantity:"MedicationDispense"==e.resourceType?e.quantity:void 0}function ge(e){if(e){var n=e.map((function(e){var n;return null===(n=fe(e))||void 0===n?void 0:n.code})).filter((function(e){return e}));return!(n.length>0)||n.every((function(e){return e===n[0]}))}return!0}function ve(e){var n;return"MedicationRequest"==e.resourceType?null===(n=e.dispenseRequest)||void 0===n?void 0:n.numberOfRepeatsAllowed:null}function he(e){return(null==e?void 0:e.includes("/"))?e.split("/")[1]:e}function be(e){(0,G.JG)((function(n){return"string"==typeof n&&(n.startsWith("".concat(d.fhirBaseUrl,"/").concat(K.HX))||n.startsWith("".concat(d.fhirBaseUrl,"/").concat(K.Ph,"?encounter=").concat(e)))}))}function ye(e,n){if(null===se(n))return 1;if(null===se(e))return-1;var t=(0,d.parseDate)(se(n)).getTime()-(0,d.parseDate)(se(e)).getTime();return 0!==t?t:e.id.localeCompare(n.id)}function we(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function Ee(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return we(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?we(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,n,t,i){var r,o,s,a,d,l,c,u;return{id:null==e?void 0:e.id,created:null==e||null===(r=e.period)||void 0===r?void 0:r.start,patient:{name:null==e||null===(o=e.subject)||void 0===o?void 0:o.display,uuid:null==e||null===(s=e.subject)||void 0===s||null===(a=s.reference)||void 0===a?void 0:a.split("/")[1]},drugs:Ee(new Set(n.map((function(e){return de(le(e))})).sort((function(e,n){return e.localeCompare(n)})))).join("; "),lastDispenser:t&&(null===(d=t[0])||void 0===d?void 0:d.performer)&&(null===(c=null===(l=t[0])||void 0===l?void 0:l.performer[0])||void 0===c?void 0:c.actor.display),prescriber:Ee(new Set(n.map((function(e){return e.requester.display})))).join(", "),status:ee(n,i),location:(null==e?void 0:e.location)?null===(u=null==e?void 0:e.location[0])||void 0===u?void 0:u.location.display:null}}function Ce(e){var n,t,i=[],r=(0,G.ZP)(function(e){return"".concat(d.fhirBaseUrl,"/").concat(K.Ph,"?encounter=").concat(e,"&_revinclude=MedicationDispense:prescription&_include=MedicationRequest:encounter")}(e),d.openmrsFetch),o=r.data,s=r.error;if(o){var a=null==o?void 0:o.data.entry,l=null==a?void 0:a.filter((function(e){var n;return"Encounter"==(null==e||null===(n=e.resource)||void 0===n?void 0:n.resourceType)})).map((function(e){return e.resource}));if(l){var c;n=(0,d.parseDate)(null===(c=l[0])||void 0===c?void 0:c.period.start);var u=null==a?void 0:a.filter((function(e){var n;return"MedicationRequest"==(null==e||null===(n=e.resource)||void 0===n?void 0:n.resourceType)})).map((function(e){return e.resource})),p=null==a?void 0:a.filter((function(e){var n;return"MedicationDispense"==(null==e||null===(n=e.resource)||void 0===n?void 0:n.resourceType)})).map((function(e){return e.resource})).sort(ye);u.every((function(e){return i.push({request:e,dispenses:te(e,p).sort(ye)})}))}}return t=!(i&&0!=i.length||s),{medicationRequestBundles:i,prescriptionDate:n,isError:s,isLoading:t}}function Se(e,n){var t="".concat(d.fhirBaseUrl,"/MedicationRequest/").concat(e);return(0,d.openmrsFetch)(t,{method:"PATCH",headers:{"Content-Type":K.aZ},body:{extension:[{url:K.nj,valueCode:n}]}})}function Te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ke(e,n,t){var i=e.id?"".concat(d.fhirBaseUrl,"/MedicationDispense/").concat(e.id):"".concat(d.fhirBaseUrl,"/MedicationDispense"),r=e.id?"PUT":"POST";return e.status=n,n===M.completed&&null===e.whenHandedOver&&(e.whenHandedOver=Q()()),n===M.completed&&null===e.whenPrepared&&(e.whenPrepared=Q()()),(0,d.openmrsFetch)(i,{method:r,signal:t.signal,headers:{"Content-Type":"application/json"},body:e})}function Oe(e){var n=(0,G.ZP)("".concat(d.fhirBaseUrl,"/ValueSet/").concat(e),d.openmrsFetch).data;return n?n.data:null}function Ae(e,n,t){var i,r,o,s,a,d,l,c,u,p,_={resourceType:"MedicationDispense",status:null,authorizingPrescription:[{reference:"MedicationRequest/"+e.id,type:"MedicationRequest"}],medicationReference:e.medicationReference,medicationCodeableConcept:e.medicationCodeableConcept,subject:e.subject,performer:[{actor:{reference:(null==n?void 0:n.currentProvider)?"Practitioner/".concat(n.currentProvider.uuid):""}}],location:{reference:(null==n?void 0:n.sessionLocation)?"Location/".concat(n.sessionLocation.uuid):""}};return t&&(u=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){Te(e,n,t[n])}))}return e}({},_),p=null!=(p={quantity:{value:null===(i=e.dispenseRequest)||void 0===i||null===(r=i.quantity)||void 0===r?void 0:r.value,code:null===(o=e.dispenseRequest)||void 0===o||null===(s=o.quantity)||void 0===s?void 0:s.code,unit:null===(a=e.dispenseRequest)||void 0===a||null===(d=a.quantity)||void 0===d?void 0:d.unit,system:null===(l=e.dispenseRequest)||void 0===l||null===(c=l.quantity)||void 0===c?void 0:c.system},whenPrepared:null,whenHandedOver:null,dosageInstruction:[{text:e.dosageInstruction[0].text,timing:e.dosageInstruction[0].timing,asNeededBoolean:!1,route:e.dosageInstruction[0].route,doseAndRate:e.dosageInstruction[0].doseAndRate?e.dosageInstruction[0].doseAndRate:[{doseQuantity:{value:null,code:null,unit:null}}]}],substitution:{wasSubstituted:!1,reason:[{coding:[{code:null}]}],type:{coding:[{code:null}]}}})?p:{},Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t.push.apply(t,i)}return t}(Object(p)).forEach((function(e){Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(p,e))})),_=u),_}var Pe=t(8404),De={};De.styleTagTransform=S(),De.setAttributes=w(),De.insert=b().bind(null,"head"),De.domAPI=v(),De.insertStyleElement=x(),f()(Pe.Z,De);const Ie=Pe.Z&&Pe.Z.locals?Pe.Z.locals:void 0,je=function(e){var n,t,i,o,s,a,d,l,c,u,p=e.medicationEvent,_=e.status,m=void 0===_?null:_,f=(0,A.useTranslation)().t,g=(null==(u=p.dosageInstruction)?void 0:u.length)>0?u[0]:null,v=fe(p),h=ve(p);return r().createElement("div",null,r().createElement("p",{className:Ie.medicationName},m,r().createElement("strong",null,de(le(p)))),g&&r().createElement("p",{className:Ie.bodyLong01},r().createElement("span",{className:Ie.label01},f("dose","Dose").toUpperCase())," ",r().createElement("span",{className:Ie.dosage},g.doseAndRate&&(null==g?void 0:g.doseAndRate.map((function(e,n){var t,i;return r().createElement("span",{key:n},null==e||null===(t=e.doseQuantity)||void 0===t?void 0:t.value," ",null==e||null===(i=e.doseQuantity)||void 0===i?void 0:i.unit)}))))," ","— ",null==g||null===(n=g.route)||void 0===n?void 0:n.text," —"," ",null==g||null===(t=g.timing)||void 0===t||null===(i=t.code)||void 0===i?void 0:i.text," ",(null==g||null===(o=g.timing)||void 0===o||null===(s=o.repeat)||void 0===s?void 0:s.duration)?"for "+(null==g||null===(a=g.timing)||void 0===a||null===(d=a.repeat)||void 0===d?void 0:d.duration)+" "+(null==g||null===(l=g.timing)||void 0===l||null===(c=l.repeat)||void 0===c?void 0:c.durationUnit):" "),v&&r().createElement("p",{className:Ie.bodyLong01},r().createElement("span",{className:Ie.label01},f("quantity","Quantity").toUpperCase())," ",r().createElement("span",{className:Ie.quantity},v.value," ",v.unit)),(h||0===h)&&r().createElement("p",{className:Ie.bodyLong01},r().createElement("span",{className:Ie.label01},f("refills","Refills").toUpperCase())," ",r().createElement("span",{className:Ie.refills},h)),(null==g?void 0:g.text)&&r().createElement("p",{className:Ie.bodyLong01},g.text))};var qe=t(6002),Re={};Re.styleTagTransform=S(),Re.setAttributes=w(),Re.insert=b().bind(null,"head"),Re.domAPI=v(),Re.insertStyleElement=x(),f()(qe.Z,Re);const Ue=qe.Z&&qe.Z.locals?qe.Z.locals:void 0;var Ne=t(2327),ze=t(7591),Le={};Le.styleTagTransform=S(),Le.setAttributes=w(),Le.insert=b().bind(null,"head"),Le.domAPI=v(),Le.insertStyleElement=x(),f()(ze.Z,Le);const Ze=ze.Z&&ze.Z.locals?ze.Z.locals:void 0,Me=function(e){var n=e.medication,t=e.editAction;return r().createElement(o.n9L,{className:Ze.medicationTile},r().createElement("p",{className:Ze.medicationName},r().createElement("strong",null,de(n))),t&&r().createElement(Ne.I8,{onClick:t}))};var Be=t(4295),He={};He.styleTagTransform=S(),He.setAttributes=w(),He.insert=b().bind(null,"head"),He.domAPI=v(),He.insertStyleElement=x(),f()(Be.Z,He);const Fe=Be.Z&&Be.Z.locals?Be.Z.locals:void 0;function Ge(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function Ke(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function We(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){Ke(e,n,t[n])}))}return e}function Qe(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t.push.apply(t,i)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function Ve(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return o}}(e,n)||Xe(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,n){if(e){if("string"==typeof e)return Ge(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ge(e,n):void 0}}const Je=function(e){var n,t,s,a,l,c,u,p,_,m,f,g,v,h,b,y,w,E,x,C,S=e.medicationDispense,T=e.updateMedicationDispense,k=e.quantityRemaining,O=(0,A.useTranslation)().t,P=(0,d.useConfig)(),D=(0,d.useSession)(),I=Ve((0,i.useState)(!1),2),j=I[0],q=I[1],R=Ve((0,i.useState)(!1),2),U=R[0],N=R[1],z=Ve((0,i.useState)([]),2),L=z[0],Z=z[1],M=Ve((0,i.useState)([]),2),B=M[0],H=M[1],F=Ve((0,i.useState)([]),2),W=F[0],Q=F[1],V=Ve((0,i.useState)([]),2),Y=V[0],X=V[1],J=Ve((0,i.useState)([]),2),$=J[0],ee=J[1],ne=Ve((0,i.useState)([]),2),te=ne[0],ie=ne[1],re=Ve((0,i.useState)(!1),2),se=re[0],ae=re[1],de="tablet"===(0,d.useLayoutType)(),ce=function(){var e=(0,G.ZP)("/ws/rest/v1/orderentryconfig",d.openmrsFetch),n=e.data,t=e.error,i=e.isValidating;return{orderConfigObject:n?n.data:null,isLoading:!n&&!t,isError:t,isValidating:i}}().orderConfigObject,pe=(C=P.valueSets.substitutionType.uuid,{substitutionTypeValueSet:Oe(C)}).substitutionTypeValueSet,_e=function(e){return{substitutionReasonValueSet:Oe(e)}}(P.valueSets.substitutionReason.uuid).substitutionReasonValueSet,me=P.dispenseBehavior.allowModifyingPrescription;(0,i.useEffect)((function(){if(ce){var e=W.map((function(e){return e.id})),n=[];ce.drugRoutes.forEach((function(t){return e.includes(t.uuid)||n.push({id:t.uuid,text:t.display})})),Q(Ye(W).concat(Ye(n)));var t=L.map((function(e){return e.id})),i=[];ce.drugDosingUnits.forEach((function(e){return t.includes(e.uuid)||i.push({id:e.uuid,text:e.display})})),Z(Ye(L).concat(Ye(i)));var r=B.map((function(e){return e.id})),o=[];ce.drugDispensingUnits.forEach((function(e){return r.includes(e.uuid)||o.push({id:e.uuid,text:e.display})})),H(Ye(B).concat(Ye(o)));var s=Y.map((function(e){return e.id})),a=[];ce.orderFrequencies.forEach((function(e){return s.includes(e.uuid)||a.push({id:e.uuid,text:e.display})})),X(Ye(Y).concat(Ye(a)))}}),[ce]),(0,i.useEffect)((function(){var e,n=[];if(null==pe||null===(e=pe.compose)||void 0===e?void 0:e.include){var t,i=pe.compose.include.find((function(e){return!e.system}));i&&(null===(t=i.concept)||void 0===t||t.forEach((function(e){return n.push({id:e.code,text:e.display})})))}ee(n)}),[pe]),(0,i.useEffect)((function(){var e,n=[];if(null==_e||null===(e=_e.compose)||void 0===e?void 0:e.include){var t,i=_e.compose.include.find((function(e){return!e.system}));i&&(null===(t=i.concept)||void 0===t||t.forEach((function(e){return n.push({id:e.code,text:e.display})})))}ie(n)}),[_e]);var fe,ge,ve,he=oe(null===(n=le(S))||void 0===n||null===(t=n.medicationCodeableConcept)||void 0===t?void 0:t.coding),be=function(e,n){var t=(0,G.ZP)(e||!n?null:"".concat(d.fhirBaseUrl,"/").concat(n),d.openmrsFetch).data;return{medicationCodeableConceptUuid:t?oe(t.data.code.coding):null}}(he,null===(s=le(S).medicationReference)||void 0===s?void 0:s.reference).medicationCodeableConceptUuid,ye=(fe=he||be||null,ve=(0,G.ZP)(fe?(ge=fe,"".concat(d.fhirBaseUrl,"/Medication?code=").concat(ge)):null,d.openmrsFetch).data,ve?{medicationFormulations:ve.data.entry.map((function(e){return e.resource}))}:{}).medicationFormulations,we=function(e){e=e?e.startsWith("MedicationRequest")?e:"MedicationRequest/".concat(e):null;var n=(0,G.ZP)(e?"".concat(d.fhirBaseUrl,"/").concat(e):null,d.openmrsFetch).data;return{medicationRequest:n?n.data:null}}(S.authorizingPrescription?S.authorizingPrescription[0].reference:null).medicationRequest;return(0,i.useEffect)((function(){var e,n;(null==we||null===(e=we.medicationReference)||void 0===e?void 0:e.reference)&&(null==S||null===(n=S.medicationReference)||void 0===n?void 0:n.reference)&&we.medicationReference.reference!=S.medicationReference.reference?(N(!0),T(Qe(We({},S),{substitution:Qe(We({},S.substitution),{wasSubstituted:!0})}))):(N(!1),T(Qe(We({},S),{substitution:{wasSubstituted:!1,reason:[{coding:[{code:null}]}],type:{coding:[{code:null}]}}})))}),[S.medicationReference,null==we?void 0:we.medicationReference]),(0,i.useEffect)((function(){ae((null==D?void 0:D.user)&&(0,d.userHasAccess)(K.FI,D.user))}),[D]),r().createElement("div",{className:Fe.medicationDispenseReviewContainer},j?r().createElement(o.Ltx,{id:"medicationFormulation",light:de,items:ye,itemToString:function(e){return ue(e)},initialSelectedItem:We({},null==ye?void 0:ye.find((function(e){var n;return e.id===(null===(n=S.medicationReference)||void 0===n?void 0:n.reference.split("/")[1])}))),onChange:function(e){var n=e.selectedItem;T(Qe(We({},S),{medicationCodeableConcept:void 0,medicationReference:{reference:"Medication/"+(null==n?void 0:n.id),display:ue(n)}})),q(!1)},required:!0}):r().createElement(Me,{medication:le(S),editAction:se&&me?function(){return q(!0)}:null}),U&&r().createElement("div",{className:Fe.dispenseDetailsContainer},r().createElement(o.CtY,{className:Fe.substitutionType,id:"substitutionType",light:de,items:$,titleText:O("substitutionType","Type of substitution"),itemToString:function(e){return null==e?void 0:e.text},initialSelectedItem:{id:null===(l=null===(a=S.substitution.type)||void 0===a?void 0:a.coding[0])||void 0===l?void 0:l.code,text:null===(c=S.substitution.type)||void 0===c?void 0:c.text},onChange:function(e){var n=e.selectedItem;T(Qe(We({},S),{substitution:Qe(We({},S.substitution),{type:{coding:[{code:null==n?void 0:n.id}]}})}))}})),U&&r().createElement("div",{className:Fe.dispenseDetailsContainer},r().createElement(o.CtY,{className:Fe.substitutionReason,id:"substitutionReason",light:de,items:te,titleText:O("substitutionReason","Reason for substitution"),itemToString:function(e){return null==e?void 0:e.text},initialSelectedItem:{id:null===(p=null===(u=S.substitution.reason[0])||void 0===u?void 0:u.coding[0])||void 0===p?void 0:p.code,text:null===(_=S.substitution.reason[0])||void 0===_?void 0:_.text},onChange:function(e){var n=e.selectedItem;T(Qe(We({},S),{substitution:Qe(We({},S.substitution),{reason:[{coding:[{code:null==n?void 0:n.id}]}]})}))}})),r().createElement("div",{className:Fe.dispenseDetailsContainer},r().createElement(o.Y2U,{allowEmpty:!1,disabled:!se,hideSteppers:!0,id:"quantity",invalidText:O("numberIsNotValid","Number is not valid"),label:O("quantity","Quantity")+(P.dispenseBehavior.restrictTotalQuantityDispensed?" ("+O("maxQuantityRemaining","Maximum quantity remaining:")+" "+k+")":""),min:0,max:P.dispenseBehavior.restrictTotalQuantityDispensed?k:void 0,value:S.quantity.value,onChange:function(e){var n;T(Qe(We({},S),{quantity:Qe(We({},S.quantity),{value:(null===(n=e.target)||void 0===n?void 0:n.value)?parseFloat(e.target.value):""})}))}}),r().createElement(o.CtY,{id:"quantityUnits",disabled:!se||!me,light:de,items:B,titleText:O("drugDispensingUnit","Dispensing unit"),itemToString:function(e){return null==e?void 0:e.text},initialSelectedItem:{id:S.quantity.code,text:S.quantity.unit},onChange:function(e){var n=e.selectedItem;T(Qe(We({},S),{quantity:{value:S.quantity.value,code:null==n?void 0:n.id}}))},required:!0})),r().createElement("div",{className:Fe.dispenseDetailsContainer},r().createElement(o.Y2U,{allowEmpty:!1,disabled:!se||!me,hideSteppers:!0,id:"dosingQuanity",invalidText:O("numberIsNotValid","Number is not valid"),min:0,label:O("dose","Dose"),value:S.dosageInstruction[0].doseAndRate[0].doseQuantity.value,onChange:function(e){var n;T(Qe(We({},S),{dosageInstruction:[Qe(We({},S.dosageInstruction[0]),{doseAndRate:[Qe(We({},S.dosageInstruction[0].doseAndRate[0]),{doseQuantity:Qe(We({},S.dosageInstruction[0].doseAndRate[0].doseQuantity),{value:(null===(n=e.target)||void 0===n?void 0:n.value)?parseFloat(e.target.value):""})})]})]}))}}),r().createElement(o.CtY,{id:"dosingUnits",disabled:!se||!me,light:de,items:L,titleText:O("doseUnit","Dose unit"),itemToString:function(e){return null==e?void 0:e.text},initialSelectedItem:{id:null===(m=S.dosageInstruction[0].doseAndRate[0].doseQuantity)||void 0===m?void 0:m.code,text:null===(f=S.dosageInstruction[0].doseAndRate[0].doseQuantity)||void 0===f?void 0:f.unit},onChange:function(e){var n,t=e.selectedItem;T(Qe(We({},S),{dosageInstruction:[Qe(We({},S.dosageInstruction[0]),{doseAndRate:[{doseQuantity:{value:null===(n=S.dosageInstruction[0].doseAndRate[0].doseQuantity)||void 0===n?void 0:n.value,code:null==t?void 0:t.id}}]})]}))},required:!0}),r().createElement(o.CtY,{id:"editRoute",disabled:!se||!me,light:de,items:W,initialSelectedItem:{id:null===(v=null===(g=S.dosageInstruction[0].route)||void 0===g?void 0:g.coding[0])||void 0===v?void 0:v.code,text:null===(h=S.dosageInstruction[0].route)||void 0===h?void 0:h.text},titleText:O("route","Route"),itemToString:function(e){return null==e?void 0:e.text},onChange:function(e){var n=e.selectedItem;T(Qe(We({},S),{dosageInstruction:[Qe(We({},S.dosageInstruction[0]),{route:{coding:[{code:null==n?void 0:n.id}]}})]}))},required:!0})),r().createElement(o.CtY,{id:"frequency",disabled:!se||!me,light:de,items:Y,initialSelectedItem:{id:null===(w=null===(b=S.dosageInstruction[0].timing)||void 0===b||null===(y=b.code)||void 0===y?void 0:y.coding[0])||void 0===w?void 0:w.code,text:null===(E=S.dosageInstruction[0].timing)||void 0===E||null===(x=E.code)||void 0===x?void 0:x.text},titleText:O("frequency","Frequency"),itemToString:function(e){return null==e?void 0:e.text},onChange:function(e){var n=e.selectedItem;T(Qe(We({},S),{dosageInstruction:[Qe(We({},S.dosageInstruction[0]),{timing:Qe(We({},S.dosageInstruction[0].timing),{code:{coding:[{code:null==n?void 0:n.id}]}})})]}))},required:!0}),r().createElement(o.Kx8,{labelText:O("patientInstructions","Patient instructions"),value:S.dosageInstruction[0].text,maxLength:65535,onChange:function(e){T(Qe(We({},S),{dosageInstruction:[Qe(We({},S.dosageInstruction[0]),{text:e.target.value})]}))}}))};function $e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function en(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return $e(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$e(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const nn=function(e){var n=e.medicationDispense,t=e.medicationRequestBundle,s=e.mode,a=e.patientUuid,l=e.encounterUuid,c=e.quantityRemaining,u=(0,A.useTranslation)().t,p=((0,d.useLayoutType)(),(0,d.usePatient)(a)),m=p.patient,f=p.isLoading,g=(0,d.useConfig)(),v=en((0,i.useState)(),2),h=v[0],b=v[1],y=en((0,i.useState)(!1),2),w=y[0],E=y[1],x=en((0,i.useState)(!1),2),C=x[0],S=x[1];(0,i.useEffect)((function(){return b(n)}),[n]),(0,i.useEffect)((function(){var e,n,t,i,r,o,s,a,d,l,u,p,_,m,f;h&&(null===(e=h.quantity)||void 0===e?void 0:e.value)&&(!c||(null==h||null===(n=h.quantity)||void 0===n?void 0:n.value)<=c)&&(null===(t=h.quantity)||void 0===t?void 0:t.code)&&(null===(r=null===(i=h.dosageInstruction[0])||void 0===i?void 0:i.doseAndRate[0])||void 0===r||null===(o=r.doseQuantity)||void 0===o?void 0:o.value)&&(null===(a=null===(s=h.dosageInstruction[0])||void 0===s?void 0:s.doseAndRate[0])||void 0===a||null===(d=a.doseQuantity)||void 0===d?void 0:d.code)&&(null===(l=h.dosageInstruction[0])||void 0===l||null===(u=l.route)||void 0===u?void 0:u.coding[0].code)&&(null===(p=h.dosageInstruction[0])||void 0===p||null===(_=p.timing)||void 0===_?void 0:_.code.coding[0].code)&&(!h.substitution.wasSubstituted||(null===(m=h.substitution.reason[0])||void 0===m?void 0:m.coding[0].code)&&(null===(f=h.substitution.type)||void 0===f?void 0:f.coding[0].code))?E(!0):E(!1)}),[h,c]);var T=(0,i.useMemo)((function(){if(m)return{patient:m,patientUuid:a,hideActionsOverflow:!0}}),[m,a]);return r().createElement("div",{className:""},r().createElement("div",{className:Ue.formWrapper},f&&r().createElement(o.lSo,{className:Ue.bannerLoading,iconDescription:"Loading",description:"Loading banner",status:"active"}),m&&r().createElement(d.ExtensionSlot,{extensionSlotName:"patient-header-slot",state:T}),r().createElement("section",{className:Ue.formGroup},r().createElement(o.lXp,null,u(g.dispenseBehavior.allowModifyingPrescription?"drugHelpText":"drugHelpTextNoEdit",g.dispenseBehavior.allowModifyingPrescription?"You may edit the formulation and quantity dispensed here":"You may edit quantity dispensed here")),h?r().createElement(Je,{medicationDispense:h,updateMedicationDispense:b,quantityRemaining:c}):null),r().createElement("section",{className:Ue.buttonGroup},r().createElement(o.zxk,{onClick:function(){return _()},kind:"secondary"},u("cancel","Cancel")),r().createElement(o.zxk,{disabled:!w||C,onClick:function(){if(!C){S(!0);var e=new AbortController;ke(h,M.completed,e).then((function(e){if(e.ok){var n=function(e,n,t){var i=Y(n.dispenses);return i=e.id?i.map((function(n){return n.id===e.id?e:n})):[e].concat(Y(i)),X({request:n.request,dispenses:i},t)}(h,t,g.dispenseBehavior.restrictTotalQuantityDispensed);if(ae(t.request)!==n)return Se(he(h.authorizingPrescription[0].reference),n)}return e})).then((function(e){var n=e.status;201!==n&&200!==n||(_(),be(l),(0,d.showToast)({critical:!0,kind:"success",description:u("medicationListUpdated","Medication dispense list has been updated."),title:u("enter"===s?"medicationDispensed":"medicationDispenseUpdated","enter"===s?"Medication successfully dispensed.":"Dispense record successfully updated.")}))}),(function(e){(0,d.showNotification)({title:u("enter"===s?"medicationDispenseError":"medicationDispenseUpdatedError","enter"===s?"Error dispensing medication.":"Error updating dispense record"),kind:"error",critical:!0,description:null==e?void 0:e.message}),S(!1)}))}}},u("enter"===s?"dispensePrescription":"saveChanges","enter"===s?"Dispense prescription":"Save changes")))))};function tn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function rn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function on(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return tn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?tn(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const sn=function(e){var n,t,s,a,l=e.medicationDispense,c=e.mode,u=e.patientUuid,p=e.encounterUuid,m=(0,A.useTranslation)().t,f=(0,d.useConfig)(),g="tablet"===(0,d.useLayoutType)(),v=(0,d.usePatient)(u),h=v.patient,b=v.isLoading,y=on((0,i.useState)(),2),w=y[0],E=y[1],x=on((0,i.useState)(!1),2),C=x[0],S=x[1],T=on((0,i.useState)(!1),2),k=T[0],O=T[1],P=on((0,i.useState)([]),2),D=P[0],I=P[1],j=(a=f.valueSets.reasonForPause.uuid,{reasonForPauseValueSet:Oe(a)}).reasonForPauseValueSet;(0,i.useEffect)((function(){var e,n=[];if(null==j||null===(e=j.compose)||void 0===e?void 0:e.include){var t,i=j.compose.include.find((function(e){return!e.system}));i&&(null===(t=i.concept)||void 0===t||t.forEach((function(e){return n.push({id:e.code,text:e.display})})))}I(n)}),[j]),(0,i.useEffect)((function(){return E(l)}),[l]),(0,i.useEffect)((function(){var e;w&&(null===(e=w.statusReasonCodeableConcept)||void 0===e?void 0:e.coding[0].code)?S(!0):S(!1)}),[w]);var q=(0,i.useMemo)((function(){if(h)return{patient:h,patientUuid:u,hideActionsOverflow:!0}}),[h,u]);return r().createElement("div",{className:""},r().createElement("div",{className:Ue.formWrapper},b&&r().createElement(o.lSo,{className:Ue.bannerLoading,iconDescription:"Loading",description:"Loading banner",status:"active"}),h&&r().createElement(d.ExtensionSlot,{extensionSlotName:"patient-header-slot",state:q}),r().createElement("section",{className:Ue.formGroup},r().createElement(o.CtY,{id:"reasonForPause",light:g,items:D,titleText:m("reasonForPause","Reason for pause"),itemToString:function(e){return null==e?void 0:e.text},initialSelectedItem:{id:null===(t=null===(n=l.statusReasonCodeableConcept)||void 0===n?void 0:n.coding[0])||void 0===t?void 0:t.code,text:null===(s=l.statusReasonCodeableConcept)||void 0===s?void 0:s.text},onChange:function(e){var n,t,i=e.selectedItem;E((n=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){rn(e,n,t[n])}))}return e}({},w),t=null!=(t={statusReasonCodeableConcept:{coding:[{code:null==i?void 0:i.id}]}})?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t.push.apply(t,i)}return t}(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})),n))}})),r().createElement("section",{className:Ue.buttonGroup},r().createElement(o.zxk,{onClick:function(){return _()},kind:"secondary"},m("cancel","Cancel")),r().createElement(o.zxk,{disabled:!C||k,onClick:function(){if(!k){O(!0);var e=new AbortController;ke(w,M.on_hold,e).then((function(e){return e.ok&&!l.id?Se(he(w.authorizingPrescription[0].reference),H.on_hold):e})).then((function(e){e.ok&&(_(),be(p),(0,d.showToast)({critical:!0,kind:"success",description:m("enter"===c?"medicationDispensePaused":"medicationDispenseUpdated","enter"===c?"Medication dispense paused.":"Dispense record successfully updated."),title:m("enter"===c?"medicationDispensePaused":"medicationDispenseUpdated","enter"===c?"Medication dispense paused.":"Dispense record successfully updated.")}))})).catch((function(e){(0,d.showNotification)({title:m("enter"===c?"medicationDispensePauseError":"medicationDispenseUpdatedError","enter"===c?"Error pausing medication dispense.":"Error updating dispense record"),kind:"error",critical:!0,description:null==e?void 0:e.message}),O(!1)}))}}},m("enter"===c?"pause":"saveChanges","enter"===c?"Pause":"Save changes")))))};function an(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function dn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ln(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return an(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?an(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const cn=function(e){var n,t,s,a,l=e.medicationDispense,c=e.mode,u=e.patientUuid,p=e.encounterUuid,m=(0,A.useTranslation)().t,f=(0,d.useConfig)(),g="tablet"===(0,d.useLayoutType)(),v=(0,d.usePatient)(u),h=v.patient,b=v.isLoading,y=ln((0,i.useState)(),2),w=y[0],E=y[1],x=ln((0,i.useState)(!1),2),C=x[0],S=x[1],T=ln((0,i.useState)(!1),2),k=T[0],O=T[1],P=ln((0,i.useState)([]),2),D=P[0],I=P[1],j=(a=f.valueSets.reasonForClose.uuid,{reasonForCloseValueSet:Oe(a)}).reasonForCloseValueSet;(0,i.useEffect)((function(){var e,n=[];if(null==j||null===(e=j.compose)||void 0===e?void 0:e.include){var t,i=j.compose.include.find((function(e){return!e.system}));i&&(null===(t=i.concept)||void 0===t||t.forEach((function(e){return n.push({id:e.code,text:e.display})})))}I(n)}),[j]),(0,i.useEffect)((function(){return E(l)}),[l]),(0,i.useEffect)((function(){var e;w&&(null===(e=w.statusReasonCodeableConcept)||void 0===e?void 0:e.coding[0].code)?S(!0):S(!1)}),[w]);var q=(0,i.useMemo)((function(){if(h)return{patient:h,patientUuid:u,hideActionsOverflow:!0}}),[h,u]);return r().createElement("div",{className:""},r().createElement("div",{className:Ue.formWrapper},b&&r().createElement(o.lSo,{className:Ue.bannerLoading,iconDescription:"Loading",description:"Loading banner",status:"active"}),h&&r().createElement(d.ExtensionSlot,{extensionSlotName:"patient-header-slot",state:q}),r().createElement("section",{className:Ue.formGroup},r().createElement(o.CtY,{id:"reasonForPause",light:g,items:D,titleText:m("reasonForClose","Reason for close"),itemToString:function(e){return null==e?void 0:e.text},initialSelectedItem:{id:null===(t=null===(n=l.statusReasonCodeableConcept)||void 0===n?void 0:n.coding[0])||void 0===t?void 0:t.code,text:null===(s=l.statusReasonCodeableConcept)||void 0===s?void 0:s.text},onChange:function(e){var n,t,i=e.selectedItem;E((n=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){dn(e,n,t[n])}))}return e}({},w),t=null!=(t={statusReasonCodeableConcept:{coding:[{code:null==i?void 0:i.id}]}})?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t.push.apply(t,i)}return t}(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})),n))}})),r().createElement("section",{className:Ue.buttonGroup},r().createElement(o.zxk,{onClick:function(){return _()},kind:"secondary"},m("cancel","Cancel")),r().createElement(o.zxk,{disabled:!C||k,onClick:function(){if(!k){O(!0);var e=new AbortController;ke(w,M.declined,e).then((function(e){return e.ok&&!l.id?Se(he(w.authorizingPrescription[0].reference),H.declined):e})).then((function(e){e.ok&&(_(),be(p),(0,d.showToast)({critical:!0,kind:"success",description:m("enter"===c?"medicationDispenseClosed":"medicationDispenseUpdated","enter"===c?"Medication dispense closed.":"Dispense record successfully updated."),title:m("enter"===c?"medicationDispenseClosed":"medicationDispenseUpdated","enter"===c?"Medication dispense closed.":"Dispense record successfully updated.")}))})).catch((function(e){(0,d.showNotification)({title:m("enter"===c?"medicationDispenseCloseError":"medicationDispenseUpdatedError","enter"===c?"Error closing medication dispense.":"Error updating dispense record"),kind:"error",critical:!0,description:null==e?void 0:e.message}),O(!1)}))}}},m("enter"===c?"close":"saveChanges","enter"===c?"Close":"Save changes")))))},un=function(e){var n=e.encounterUuid,t=e.patientUuid,i=(0,A.useTranslation)().t,s=(0,d.useSession)(),a=(0,d.useConfig)(),l=Ce(n),c=l.medicationRequestBundles,u=l.prescriptionDate,_=l.isError,m=l.isLoading,f=function(e){return e.status===M.completed?r().createElement(o.Vp9,{type:"gray"},i("dispensed","Dispensed")):e.status===M.on_hold?r().createElement(o.Vp9,{type:"red"},i("paused","Paused")):e.status===M.declined?r().createElement(o.Vp9,{type:"red"},i("closed","Closed")):null},g=function(e,t){var i,r=ae(t.request),o=function(e,n,t){return X({request:n.request,dispenses:n.dispenses.filter((function(n){return n.id!==e.id}))},t)}(e,t,a.dispenseBehavior.restrictTotalQuantityDispensed);r!==o&&Se(he(e.authorizingPrescription[0].reference),o).then((function(){be(n)})),(i=e.id,(0,d.openmrsFetch)("".concat(d.fhirBaseUrl,"/MedicationDispense/").concat(i),{method:"DELETE"})).then((function(){be(n)}))};return r().createElement("div",{className:Z.historyAndCommentsContainer},m&&r().createElement(o.gqd,{role:"progressbar"}),_&&r().createElement("p",null,i("error","Error")),c&&c.flatMap((function(e){return e.dispenses})).sort(ye).map((function(e){var l,u,_;return r().createElement("div",{key:e.id},r().createElement("h5",{style:{paddingTop:"8px",paddingBottom:"8px",fontSize:"0.9rem"}},e.performer&&(null===(l=e.performer[0])||void 0===l||null===(u=l.actor)||void 0===u?void 0:u.display)," ",(_=e).status===M.completed?i("dispensedMedication","dispensed medication"):_.status===M.on_hold?i("pausedDispense","paused dispense"):_.status===M.declined?i("closedDispense","closed dispense"):null," -"," ",(0,d.formatDatetime)((0,d.parseDate)(se(e)))),r().createElement(o.n9L,{className:Z.dispenseTile},function(e,l){var c=function(e){return(null==e?void 0:e.user)&&(0,d.userHasAccess)(K.q,e.user)}(s),u=function(e,n){if(null==e?void 0:e.user){var t,i;if((0,d.userHasAccess)(K.UW,e.user))return!0;if((0,d.userHasAccess)(K.ar,e.user)&&(null===(t=e.currentProvider)||void 0===t?void 0:t.uuid)&&null!=(null===(i=n.performer)||void 0===i?void 0:i.find((function(n){var t,i;return(null==n||null===(t=n.actor)||void 0===t||null===(i=t.reference)||void 0===i?void 0:i.length)>1&&n.actor.reference.split("/")[1]===e.currentProvider.uuid}))))return!0}return!1}(s,e);return c||u?r().createElement(o.PQB,{ariaLabel:i("medicationDispenseActionMenu","Medication Dispense Action Menu"),flipped:!0,className:Z.medicationEventActionMenu},c&&r().createElement(o.laM,{onClick:function(){return p(function(e){return e.status===M.completed?i("editDispenseRecord","Edit Dispense Record"):e.status===M.on_hold?i("editPauseRecord","Edit Pause Record"):e.status===M.declined?i("editCloseeRecord","Edit Close Record"):void 0}(e),function(e,i){if(e.status===M.completed){var o=null;return a.dispenseBehavior.restrictTotalQuantityDispensed&&(o=ne(i)+((null==e?void 0:e.quantity)?e.quantity.value:0)),r().createElement(nn,{patientUuid:t,encounterUuid:n,medicationDispense:e,medicationRequestBundle:i,quantityRemaining:o,mode:"edit"})}return e.status===M.on_hold?r().createElement(sn,{patientUuid:t,encounterUuid:n,medicationDispense:e,mode:"edit"}):e.status===M.declined?r().createElement(cn,{patientUuid:t,encounterUuid:n,medicationDispense:e,mode:"edit"}):void 0}(e,l))},itemText:i("editRecord","Edit Record")}),u&&r().createElement(o.laM,{onClick:function(){g(e,l)},itemText:i("delete","Delete")})):null}(e,function(e,n){return e.find((function(e){return e.dispenses.find((function(e){return e.id===n.id}))}))}(c,e)),r().createElement(je,{medicationEvent:e,status:f(e)})))})),c&&c.flatMap((function(e){return e.request})).map((function(e){return r().createElement("div",{key:e.id},r().createElement("h5",{style:{paddingTop:"8px",paddingBottom:"8px",fontSize:"0.9rem"}},e.requester.display," ",i("orderedMedication ","ordered medication")," -"," ",(0,d.formatDatetime)(u)),r().createElement(o.n9L,{className:Z.requestTile},r().createElement(je,{medicationEvent:e,status:r().createElement(o.Vp9,{type:"green"},i("ordered","Ordered"))})))})))};var pn=t(4511),_n={};_n.styleTagTransform=S(),_n.setAttributes=w(),_n.insert=b().bind(null,"head"),_n.domAPI=v(),_n.insertStyleElement=x(),f()(pn.Z,_n);const mn=pn.Z&&pn.Z.locals?pn.Z.locals:void 0;var fn=t(583),gn={};gn.styleTagTransform=S(),gn.setAttributes=w(),gn.insert=b().bind(null,"head"),gn.domAPI=v(),gn.insertStyleElement=x(),f()(fn.Z,gn);const vn=fn.Z&&fn.Z.locals?fn.Z.locals:void 0;var hn=t(1409),bn=t(1127),yn={};yn.styleTagTransform=S(),yn.setAttributes=w(),yn.insert=b().bind(null,"head"),yn.domAPI=v(),yn.insertStyleElement=x(),f()(bn.Z,yn);const wn=bn.Z&&bn.Z.locals?bn.Z.locals:void 0,En=function(e){var n=e.medicationRequestBundle,t=e.patientUuid,i=e.encounterUuid,s=(0,A.useTranslation)().t,a=(0,d.useConfig)(),l=(0,d.useSession)(),c=ce(n.dispenses),u=$(n.request,a.medicationRequestExpirationPeriodInDays),_=u===B.active&&c!==M.declined,m=a.actionButtons.pauseButton.enabled&&u===B.active&&c!==M.on_hold&&c!==M.declined,f=a.actionButtons.closeButton.enabled&&u===B.active&&c!==M.declined,g=null;return a.dispenseBehavior.restrictTotalQuantityDispensed&&(g=ne(n)),r().createElement("div",{className:wn.actionBtns},_?r().createElement(o.zxk,{kind:"primary",onClick:function(){return p(s("dispensePrescription","Dispense prescription"),r().createElement(nn,{patientUuid:t,encounterUuid:i,medicationDispense:Ae(n.request,l,!0),medicationRequestBundle:n,quantityRemaining:g,mode:"enter"}))}},s("dispense","Dispense")):null,m?r().createElement(o.zxk,{kind:"secondary",onClick:function(){return p(s("pausePrescription","Pause prescription"),r().createElement(sn,{patientUuid:t,encounterUuid:i,medicationDispense:Ae(n.request,l,!1),mode:"enter"}))}},s("pause","Pause")):null,f?r().createElement(o.zxk,{kind:"danger",onClick:function(){return p(s("closePrescription","Close prescription"),r().createElement(cn,{patientUuid:t,encounterUuid:i,medicationDispense:Ae(n.request,l,!1),mode:"enter"}))}},s("close","Close")):null)};function xn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}const Cn=function(e){var n,t,s=e.encounterUuid,a=e.patientUuid,l=(0,A.useTranslation)().t,c=(0,d.useConfig)(),u=(n=(0,i.useState)(!0),t=2,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return o}}(n,t)||function(e,n){if(e){if("string"==typeof e)return xn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?xn(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=u[0],_=u[1],m=function(e){var n=(0,G.ZP)("".concat(d.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),d.openmrsFetch),t=n.data,i=n.error,r=[];if(t){var o=null==t?void 0:t.data.entry;null==o||o.map((function(e){return r.push(e.resource)}))}return{allergies:r,totalAllergies:null==t?void 0:t.data.total,isError:i}}(a),f=m.allergies,g=m.totalAllergies,v=Ce(s),h=v.medicationRequestBundles,b=v.isError,y=v.isLoading;return(0,i.useEffect)((function(){"number"==typeof g&&_(!1)}),[g]),r().createElement("div",{className:vn.prescriptionContainer},p&&r().createElement(o.gqd,{role:"progressbar"}),!p&&r().createElement(o.n9L,{className:vn.allergiesTile},r().createElement("div",{className:vn.allergesContent},r().createElement("div",null,r().createElement(hn.Rr,{size:24,className:vn.allergiesIcon}),r().createElement("p",null,g>0&&r().createElement("span",null,r().createElement("span",{style:{fontWeight:"bold"}},g," ",l("allergies","allergies").toLowerCase())," ",function(e){return e.map((function(e){return re(e.code.coding)})).join(", ")}(f)),0==g&&l("noAllergyDetailsFound","No allergy details found"))))),r().createElement("h5",{style:{paddingTop:"8px",paddingBottom:"8px",fontSize:"0.9rem"}},l("prescribed","Prescribed")),y&&r().createElement(o.gqd,{role:"progressbar"}),b&&r().createElement("p",null,l("error","Error")),h&&h.map((function(e){return r().createElement(o.n9L,{className:vn.prescriptionTile},r().createElement(d.UserHasAccess,{privilege:K.YG},r().createElement(En,{patientUuid:a,encounterUuid:s,medicationRequestBundle:e})),r().createElement(je,{key:e.request.id,medicationEvent:e.request,status:(n=e.request,t=J(n,c.medicationRequestExpirationPeriodInDays),t===F.cancelled?r().createElement(o.Vp9,{type:"red"},l("cancelled","Cancelled")):t===F.completed?r().createElement(o.Vp9,{type:"green"},l("completed","Completed")):t===F.expired?r().createElement(o.Vp9,{type:"red"},l("expired","Expired")):t===F.declined?r().createElement(o.Vp9,{type:"red"},l("closed","Closed")):t===F.on_hold?r().createElement(o.Vp9,{type:"red"},l("paused","Paused")):null)}));var n,t})))},Sn=function(e){var n=e.encounterUuid,t=e.patientUuid,i=(e.status,(0,A.useTranslation)().t),s=[{name:i("prescriptionDetails","Prescription details"),component:r().createElement(Cn,{encounterUuid:n,patientUuid:t})},{name:i("historyComments","History and comments"),component:r().createElement(un,{encounterUuid:n,patientUuid:t})}];return r().createElement("div",{className:mn.expandedTabsParentContainer},r().createElement("div",{className:mn.expandedTabsContainer},r().createElement(o.mQc,null,r().createElement(o.tdY,{"aria-label":i("tabList","Tab List")},s.map((function(e,n){return r().createElement(o.OK9,{key:n,className:mn.orderTabs},e.name)}))),r().createElement(o.nPR,null,s.map((function(e,n){return r().createElement(o.x45,{key:n},e.component)}))))))};var Tn=t(9803),kn={};kn.styleTagTransform=S(),kn.setAttributes=w(),kn.insert=b().bind(null,"head"),kn.domAPI=v(),kn.insertStyleElement=x(),f()(Tn.Z,kn);const On=Tn.Z&&Tn.Z.locals?Tn.Z.locals:void 0;function An(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function Pn(){return Pn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pn.apply(this,arguments)}function Dn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return o}}(e,n)||jn(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(e){return function(e){if(Array.isArray(e))return An(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,n){if(e){if("string"==typeof e)return An(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?An(e,n):void 0}}const qn=function(e){var n,t,s=e.searchTerm,a=e.location,l=e.status,c=(0,A.useTranslation)().t,u=(0,d.useConfig)(),p=Dn((0,i.useState)(1),2),_=p[0],m=p[1],f=Dn((0,i.useState)(10),2),g=f[0],v=f[1],h=Dn((0,i.useState)(0),2),b=h[0],y=h[1],w=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5?arguments[5]:void 0,a=(0,G.ZP)("ACTIVE"===o?pe(t,n,Q()(new Date).startOf("day").subtract(s,"day").toISOString(),i,r):_e(t,n,i,r),d.openmrsFetch),l=a.data,c=a.error;if(l){var u=null==l?void 0:l.data.entry;if(u){var p=u.filter((function(e){var n;return"Encounter"==(null==e||null===(n=e.resource)||void 0===n?void 0:n.resourceType)})).map((function(e){return e.resource})),_=u.filter((function(e){var n;return"MedicationRequest"==(null==e||null===(n=e.resource)||void 0===n?void 0:n.resourceType)})).map((function(e){return e.resource})),m=u.filter((function(e){var n;return"MedicationDispense"==(null==e||null===(n=e.resource)||void 0===n?void 0:n.resourceType)})).map((function(e){return e.resource})).sort(ye);e=p.map((function(e){var n=_.filter((function(n){return n.encounter.reference=="Encounter/"+e.id})),t=n.map((function(e){return"MedicationRequest/"+e.id})),i=m.filter((function(e){var n;return t.includes(null===(n=e.authorizingPrescription[0])||void 0===n?void 0:n.reference)}));return xe(e,n,i,s)})),e.sort((function(e,n){return e.created<n.created?1:-1}))}else e=[]}return{prescriptionsTableRows:e,isError:c,isLoading:!e&&!c,totalOrders:null==l?void 0:l.data.total}}(g,b,s,a,l,u.medicationRequestExpirationPeriodInDays),E=w.prescriptionsTableRows,x=w.isError,C=w.isLoading,S=w.totalOrders,T=[{header:c("created","Created"),key:"created"},{header:c("patientName","Patient name"),key:"patient"},{header:c("prescriber","Prescriber"),key:"prescriber"},{header:c("drugs","Drugs"),key:"drugs"},{header:c("lastDispenser","Last dispenser"),key:"lastDispenser"},{header:c("status","Status"),key:"status"}];return(null===(n=u.locationBehavior)||void 0===n||null===(t=n.locationColumn)||void 0===t?void 0:t.enabled)&&(T=In(T.slice(0,3)).concat([{header:c("location","Location"),key:"location"}],In(T.slice(3)))),(0,i.useEffect)((function(){m(1),y(0)}),[s]),r().createElement(o.x45,null,r().createElement("div",{className:On.patientListTableContainer},C&&r().createElement(o.gqd,{role:"progressbar"}),x&&r().createElement("p",null,"Error"),E&&r().createElement(r().Fragment,null,r().createElement(o.wQF,{rows:E,headers:T,isSortable:!0},(function(e){var n=e.rows,t=e.headers,i=e.getHeaderProps,s=e.getRowProps,a=e.getTableProps;return r().createElement(o.xJi,null,r().createElement(o.iA_,Pn({},a(),{useZebraStyles:!0}),r().createElement(o.ssF,null,r().createElement(o.SCH,null,r().createElement(o.MOD,null),t.map((function(e){return r().createElement(o.xDH,Pn({},i({header:e})),e.header)})))),r().createElement(o.RMI,null,n.map((function(e){return r().createElement(r().Fragment,{key:e.id},r().createElement(o.RcE,Pn({},s({row:e})),e.cells.map((function(e){return r().createElement(o.pj1,{key:e.id},e.id.endsWith("created")?(0,d.formatDatetime)((0,d.parseDate)(e.value)):e.id.endsWith("patient")?e.value.name:e.id.endsWith("status")?c(e.value):e.value)}))),r().createElement(o.WdL,{colSpan:t.length+1},r().createElement(Sn,{encounterUuid:e.id,patientUuid:e.cells.find((function(e){return e.id.endsWith("patient")})).value.uuid,status:e.cells.find((function(e){return e.id.endsWith("status")})).value})))})))))})),r().createElement("div",{style:{width:"100%"}},r().createElement(o.tlE,{page:_,pageSize:g,pageSizes:[10,20,30,40,50,100],totalItems:S,onChange:function(e){var n=e.page,t=e.pageSize;m(n),y((n-1)*t),v(t)}})))))};function Rn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function Un(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return Rn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Rn(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Nn;!function(e){e[e.STARRED=0]="STARRED",e[e.SYSTEM=1]="SYSTEM",e[e.USER=2]="USER",e[e.ALL=3]="ALL"}(Nn||(Nn={}));const zn=function(){var e,n,t=(0,A.useTranslation)().t,s=(0,d.useConfig)(),a=function(e){var n,t,i=(0,G.ZP)("".concat(d.fhirBaseUrl,"/Location?_tag=").concat(encodeURIComponent(e.locationBehavior.locationFilter.tag),"&_count=100"),d.openmrsFetch),r=i.data,o=i.error,s=null==r||null===(n=r.data)||void 0===n||null===(t=n.entry)||void 0===t?void 0:t.map((function(e){return{id:e.resource.id,name:e.resource.name}})).sort((function(e,n){return e.name.localeCompare(n.name)}));return{filterLocations:s,isError:o,isLoading:!s&&!o}}(s),l=a.filterLocations,c=a.isLoading,u=Un((0,i.useState)(Nn.STARRED),2),p=(u[0],u[1]),_=Un((0,i.useState)(""),2),m=_[0],f=_[1],g=Un((0,i.useState)(""),2),v=g[0],h=g[1],b=Un((0,i.useState)(""),2),y=b[0],w=b[1],E=[{key:"activePrescriptions",header:t("activePrescriptions","Active Prescriptions"),status:"ACTIVE"},{key:"allPrescriptions",header:t("allPrescriptions","All Prescriptions"),status:""}];return(0,i.useEffect)((function(){var e=setTimeout((function(){h(m)}),500);return function(){return clearTimeout(e)}}),[m]),r().createElement("main",{className:"omrs-main-content ".concat(On.prescriptionListContainer)},r().createElement("section",{className:On.prescriptionTabsContainer},r().createElement(o.mQc,{className:On.prescriptionTabs,type:"container",tabContentClassName:On.hiddenTabsContent,onSelectionChange:p},r().createElement(o.tdY,{"aria-label":t("tabList","Tab List"),contained:!0,className:On.tabsContainer},E.map((function(e,n){return r().createElement(o.OK9,{title:t(e.key),key:n,id:"tab-"+n,className:On.tab},t(e.header))}))),r().createElement("div",{className:On.searchContainer},r().createElement(o.olm,{closeButtonLabelText:t("clearSearchInput","Clear search input"),defaultValue:m,placeholder:t("searchPrescriptions","Search prescriptions"),labelText:t("searchPrescriptions","Search prescriptions"),onChange:function(e){e.preventDefault(),f(e.target.value)},size:"md",className:On.patientSearch}),(null===(e=s.locationBehavior)||void 0===e||null===(n=e.locationFilter)||void 0===n?void 0:n.enabled)&&!c&&(null==l?void 0:l.length)>1&&r().createElement(o.CtY,{id:"locationFilter",placeholder:t("filterByLocation","Filter by location"),items:c?[]:l,itemToString:function(e){return null==e?void 0:e.name},onChange:function(e){var n=e.selectedItem;w(null==n?void 0:n.id)},className:On.locationFilter})),r().createElement(o.nPR,null,E.map((function(e,n){return r().createElement(qn,{location:y,searchTerm:v,status:e.status})}))))))};function Ln(){var e=(0,d.useConfig)(),n=(0,A.useTranslation)().t;return e.dispenseBehavior.restrictTotalQuantityDispensed&&e.dispenseBehavior.allowModifyingPrescription?r().createElement("div",{className:"omrs-main-content"},r().createElement(o.K0D,{title:n("dispensingAppError","Dispensing App Error"),subtitle:n("dispensingAppMisconfigurationMessage","Please contact your system administration: Misconfiguration - 'restrictTotalQuantityDispensed' cannot be enabled if 'allowModifyingPrescription' is enabled.")})):r().createElement("div",{className:"omrs-main-content"},r().createElement(N,null),r().createElement(zn,null),r().createElement(P,null))}}}]);