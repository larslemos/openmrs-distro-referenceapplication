"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[4968],{4165:(e,n,t)=>{t.d(n,{FA:()=>r,ZY:()=>u,mk:()=>l,sy:()=>d});var a=t(268),i=t(3255),o=t(906);function s(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}function r(){var e=function(){var e=(0,i.ZP)("/ws/rest/v1/systemsetting/concept.causeOfDeath",o.openmrsFetch,{shouldRetryOnError:function(e){return s(e,Response)&&404!==e.status}}),n=e.data,t=(e.error,e.isLoading),r=e.isValidating,l=(0,a.useMemo)((function(){var e,a;return{value:null!==(a=null==n||null===(e=n.data)||void 0===e?void 0:e.value)&&void 0!==a?a:void 0,isCauseOfDeathLoading:t,isCauseOfDeathValidating:r}}),[n,t,r]);return l}(),n=e.isCauseOfDeathLoading,t=e.isCauseOfDeathValidating,r=function(e){var n,t,a=(0,i.ZP)("/ws/rest/v1/concept/".concat(e),(function(n){return e?(0,o.openmrsFetch)(n):void 0}),{shouldRetryOnError:function(e){return s(e,Response)&&404!==e.status}}),r=a.data,l=a.error,c=a.isLoading,u=a.isValidating;return{conceptAnswers:null!==(t=null==r||null===(n=r.data)||void 0===n?void 0:n.answers)&&void 0!==t?t:[],isConceptLoading:c,conceptError:l,isConceptAnswerValidating:u}}(e.value),l=r.isConceptLoading,c=r.isConceptAnswerValidating;return{conceptAnswers:r.conceptAnswers,isLoading:n||l,isValidating:c||t}}function l(e){var n,t=(0,o.usePatient)(e),a=t.isLoading,i=t.patient;return a?{deathDate:void 0,isDead:void 0,isLoading:a}:{deathDate:i.deceasedDateTime,isDead:null!==(n=i.deceasedBoolean)&&void 0!==n?n:Boolean(i.deceasedDateTime),isLoading:a}}var c=function(e,n,t){return(0,o.openmrsFetch)("/ws/rest/v1/person/".concat(e),{headers:{"Content-type":"application/json"},method:"POST",body:n,signal:t.signal})};function u(e,n,t,a){var i={causeOfDeath:t,dead:!0};return i.deathDate=e?new Date(e.getFullYear(),e.getMonth(),e.getDay()):null,c(n,i,a)}function d(e,n){return c(e,{deathDate:null,causeOfDeath:null,dead:!1},n)}},4968:(e,n,t)=>{t.r(n),t.d(n,{default:()=>c});var a=t(268),i=t.n(a),o=t(4924),s=t(906),r=t(4350),l=t(4165);const c=function(e){var n=e.closeDialog,t=e.patientUuid,a=(0,o.useTranslation)().t;return i().createElement("div",null,i().createElement(r.ModalHeader,{closeModal:n,title:a("markAsAlive","Mark As Alive")}),i().createElement(r.ModalBody,null,a("confirmMarkAsAlive","Are you sure, you want to mark patient as alive?")),i().createElement(r.ModalFooter,null,i().createElement(r.Button,{kind:"secondary",onClick:n},a("no","No")),i().createElement(r.Button,{onClick:function(e){return function(e){e.preventDefault(),n(),(0,l.sy)(t,new AbortController).then((function(e){e.ok&&(n(),(0,s.showToast)({critical:!0,kind:"success",title:a("markAsAlive","Mark As Alive"),description:a("setAliveSuccessfully","Patient has been marked alive successfully")}))})).catch((function(e){(0,s.showNotification)({title:a("setAliveError","Error marking patient alive"),kind:"error",critical:!0,description:null==e?void 0:e.message})}))}(e)}},a("yes","Yes"))))}}}]);