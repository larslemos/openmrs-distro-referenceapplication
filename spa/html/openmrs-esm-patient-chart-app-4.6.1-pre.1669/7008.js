"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[7008],{1912:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(272),i=n.n(r),o=n(2609),a=n.n(o)()(i());a.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-chart__cancel-visit-dialog__bodyShort02___e5GxJ{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#161616}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/visit/visit-prompt/cancel-visit-dialog.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpDF,8DCu0BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDr0BF,aDDM",sourceRoot:""}]),a.locals={bodyShort02:"-esm-patient-chart__cancel-visit-dialog__bodyShort02___e5GxJ"};const s=a},2609:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&a[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},272:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */"),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([o]).join("\n")}return[e].join("\n")}},3008:(t,e,n)=>{n.d(e,{Aq:()=>c,Ls:()=>p});var r=n(5047),i=n.n(r),o=n(906);function a(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){a(o,r,i,s,c,"next",t)}function c(t){a(o,r,i,s,c,"throw",t)}s(void 0)}))}}function c(t,e,n,r,i,o,a,s,c){return u.apply(this,arguments)}function u(){return(u=s(i().mark((function t(e,n,r,a,s,c,u,d,p){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([l(d,e,n,u,p)]);case 2:return t.abrupt("return",(0,o.openmrsFetch)("/ws/rest/v1/visit-queue-entry",{method:"POST",headers:{"Content-Type":"application/json"},signal:u.signal,body:{visit:{uuid:e},queueEntry:{status:{uuid:s},priority:{uuid:a},queue:{uuid:n},patient:{uuid:r},startedAt:(0,o.toDateObjectStrict)((0,o.toOmrsIsoString)(new Date)),sortWeight:c}}}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t,e,n,r,i){return d.apply(this,arguments)}function d(){return(d=s(i().mark((function t(e,n,r,a,s){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.openmrsFetch)("/ws/rest/v1/queue-entry-number?location=".concat(e,"&queue=").concat(r,"&visit=").concat(n,"&visitAttributeType=").concat(s),{method:"GET",headers:{"Content-Type":"application/json"},signal:a.signal});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e,n){return(0,o.openmrsFetch)("/ws/rest/v1/queue/".concat(t,"/entry/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:{endedAt:(0,o.toDateObjectStrict)((0,o.toOmrsIsoString)(new Date))},signal:n.signal})}},5876:(t,e,n)=>{n.d(e,{t:()=>o});var r=n(3255),i=n(906);function o(t,e){var n,o,a,s="/ws/rest/v1/visit-queue-entry?patient=".concat(t),c=(0,r.ZP)(s,i.openmrsFetch),u=c.data,l=c.error,d=c.isLoading,p=c.isValidating,v=null!==(a=null==u||null===(n=u.data)||void 0===n||null===(o=n.results)||void 0===o?void 0:o.map((function(t){var e,n,r,i;return{id:t.uuid,name:t.queueEntry.queue.display,patientUuid:t.queueEntry.patient.uuid,priority:"Urgent"===t.queueEntry.priority.display?"Priority":t.queueEntry.priority.display,priorityUuid:t.queueEntry.priority.uuid,service:null===(e=t.queueEntry.queue)||void 0===e?void 0:e.display,status:t.queueEntry.status.display,statusUuid:t.queueEntry.status.uuid,visitUuid:null===(n=t.visit)||void 0===n?void 0:n.uuid,visitType:null===(r=t.visit)||void 0===r||null===(i=r.visitType)||void 0===i?void 0:i.display,queueUuid:t.queueEntry.queue.uuid,queueEntryUuid:t.queueEntry.uuid}})).filter((function(t){return void 0!==e&&e===t.visitUuid})).shift())&&void 0!==a?a:null;return{queueEntry:v,isLoading:d,isError:l,isValidating:p}}n(268)},7008:(t,e,n)=>{n.r(e),n.d(e,{default:()=>S});var r=n(268),i=n.n(r),o=n(4350),a=n(906),s=n(4924),c=n(1354),u=n.n(c),l=n(1583),d=n.n(l),p=n(7378),v=n.n(p),f=n(5993),y=n.n(f),m=n(4154),h=n.n(m),g=n(8141),b=n.n(g),A=n(1912),C={};C.styleTagTransform=b(),C.setAttributes=y(),C.insert=v().bind(null,"head"),C.domAPI=d(),C.insertStyleElement=h(),u()(A.Z,C);const E=A.Z&&A.Z.locals?A.Z.locals:void 0;var w=n(5876),q=n(3008);function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const S=function(t){var e,n,c=t.patientUuid,u=t.closeModal,l=(0,s.useTranslation)().t,d=(0,a.useVisit)(c),p=d.currentVisit,v=d.mutate,f=(e=(0,r.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,n)||function(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=f[0],m=f[1],h=(0,w.t)(c,null==p?void 0:p.uuid),g=(0,r.useCallback)((function(){m(!0),(0,a.openmrsFetch)("/ws/rest/v1/visit/".concat(p.uuid),{headers:{"Content-type":"application/json"},method:"POST",body:{voided:!0}}).then((function(){var t=null==h?void 0:h.queueEntry;v(),u(),m(!1),t&&(0,q.Ls)(t.queueUuid,t.queueEntryUuid,new AbortController),(0,a.showToast)({title:l("cancelVisit","Cancel visit"),kind:"success",description:l("visitCanceled","Canceled active visit successfully")})}),(function(t){(0,a.showNotification)({title:l("cancelVisitError","Error cancelling active visit"),kind:"error",critical:!0,description:null==t?void 0:t.message}),m(!1)}))}),[u,p.uuid,v,l,null==h?void 0:h.queueEntry]);return i().createElement("div",null,i().createElement(o.ModalHeader,{closeModal:u,label:l("visit","Visit"),title:l("cancelActiveVisit","Cancel active visit")}),i().createElement(o.ModalBody,null,i().createElement("p",{className:E.bodyShort02},l("cancelVisitWarningMessage","Cancelling this visit will delete all associated encounters"),".")),i().createElement(o.ModalFooter,null,i().createElement(o.Button,{kind:"secondary",onClick:u},l("cancel","Cancel")),i().createElement(o.Button,{disabled:y,kind:"danger",onClick:g},y?i().createElement(o.InlineLoading,{description:"".concat(l("loading","Loading")," ...")}):l("cancelVisit","Cancel visit"))))}},1354:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var c=t[s],u=r.base?c[0]+r.base:c[0],l=o[u]||0,d="".concat(u," ").concat(l);o[u]=l+1;var p=n(d),v={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(v);else{var f=i(v,r);r.byIndex=s,e.splice(s,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var c=r(t,i),u=0;u<o.length;u++){var l=n(o[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=c}}},7378:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},4154:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},5993:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},1583:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},8141:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}}]);