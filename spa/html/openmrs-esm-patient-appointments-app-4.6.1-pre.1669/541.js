(globalThis.webpackChunk_openmrs_esm_patient_appointments_app=globalThis.webpackChunk_openmrs_esm_patient_appointments_app||[]).push([[541],{2258:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var a=n(272),i=n.n(a),o=n(2609),r=n.n(o)()(i());r.push([t.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-appointments__upcoming-appointments-card__container___IsFLz{margin:1rem}.-esm-patient-appointments__upcoming-appointments-card__container___IsFLz section{margin:1rem 0}.-esm-patient-appointments__upcoming-appointments-card__sectionTitle___Kl7Jw{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin:0 0 .5rem 0}.-esm-patient-appointments__upcoming-appointments-card__checkbox___vDzus:not(:first-child){margin:0rem 0rem}.-esm-patient-appointments__upcoming-appointments-card__input___wBHUI{margin:0rem 1rem 1rem}.-esm-patient-appointments__upcoming-appointments-card__headerLabel___UUCT_{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252}.-esm-patient-appointments__upcoming-appointments-card__checkboxContainer___g7G3W{display:grid;grid-template-columns:1fr 1fr}.-esm-patient-appointments__upcoming-appointments-card__structuredList___pOjTt{padding:.5rem .5rem .5rem}.-esm-patient-appointments__upcoming-appointments-card__inlineNotification___J4geb{width:100%;max-width:unset;padding:"0rem"}',"",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/appointments/upcoming-appointments-card.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,0EACE,WC0BW,CDxBX,kFACE,aAAA,CAIJ,6EE8zBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CF5zBF,aDTQ,CCUR,kBAAA,CAGE,2FACE,gBAAA,CAIJ,sEACE,qBAAA,CAGF,4EE+yBE,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CF7yBA,aDxBM,CC2BR,kFACE,YAAA,CACA,6BAAA,CAGF,+EACE,yBAAA,CAIF,mFACE,UAAA,CACA,eAAA,CACA,cAAA",sourceRoot:""}]),r.locals={container:"-esm-patient-appointments__upcoming-appointments-card__container___IsFLz",sectionTitle:"-esm-patient-appointments__upcoming-appointments-card__sectionTitle___Kl7Jw",checkbox:"-esm-patient-appointments__upcoming-appointments-card__checkbox___vDzus",input:"-esm-patient-appointments__upcoming-appointments-card__input___wBHUI",headerLabel:"-esm-patient-appointments__upcoming-appointments-card__headerLabel___UUCT_",checkboxContainer:"-esm-patient-appointments__upcoming-appointments-card__checkboxContainer___g7G3W",structuredList:"-esm-patient-appointments__upcoming-appointments-card__structuredList___pOjTt",inlineNotification:"-esm-patient-appointments__upcoming-appointments-card__inlineNotification___J4geb"};const s=r},6824:function(t){t.exports=function(){"use strict";return function(t,e,n){e.prototype.isToday=function(){var t="YYYY-MM-DD",e=n();return this.format(t)===e.format(t)}}}()},6636:(t,e,n)=>{"use strict";n.d(e,{Ae:()=>g,GB:()=>A,l9:()=>_,v1:()=>h,zt:()=>d});var a=n(5047),i=n.n(a),o=n(3565),r=n.n(o),s=n(3255),p=n(906),c=n(6824),m=n.n(c);function l(t,e,n,a,i,o,r){try{var s=t[o](r),p=s.value}catch(t){return void n(t)}s.done?e(p):Promise.resolve(p).then(a,i)}r().extend(m());var u="/ws/rest/v1/appointments/search";function d(t,e,n){var a,i,o,c,m,l,d,_=(0,s.ZP)(u,(function(){return(0,p.openmrsFetch)(u,{method:"POST",signal:n.signal,headers:{"Content-Type":"application/json"},body:{patientUuid:t,startDate:e}})})),A=_.data,g=_.error,f=_.isLoading,v=_.isValidating,h=_.mutate,C=(null==A||null===(a=A.data)||void 0===a?void 0:a.length)?A.data:null,b=null===(o=null===(i=null==C?void 0:C.sort((function(t,e){return e.startDateTime>t.startDateTime?1:-1})))||void 0===i?void 0:i.filter((function(t){return"Cancelled"!==t.status})))||void 0===o?void 0:o.filter((function(t){var e=t.startDateTime;return r()(new Date(e).toISOString()).isBefore((new Date).setHours(0,0,0,0))})),D=null===(m=null===(c=null==C?void 0:C.sort((function(t,e){return t.startDateTime>e.startDateTime?1:-1})))||void 0===c?void 0:c.filter((function(t){return"Cancelled"!==t.status})))||void 0===m?void 0:m.filter((function(t){var e=t.startDateTime;return r()(new Date(e).toISOString()).isAfter(new Date)})),T=null===(d=null===(l=null==C?void 0:C.sort((function(t,e){return t.startDateTime>e.startDateTime?1:-1})))||void 0===l?void 0:l.filter((function(t){return"Cancelled"!==t.status})))||void 0===d?void 0:d.filter((function(t){var e=t.startDateTime;return r()(new Date(e).toISOString()).isToday()}));return{data:A?{pastAppointments:b,upcomingAppointments:D,todaysAppointments:T}:null,isError:g,isLoading:f,isValidating:v,mutate:h}}function _(){var t=(0,s.ZP)("/ws/rest/v1/appointmentService/all/full",p.openmrsFetch),e=t.data,n=t.error,a=t.isLoading;return{data:e?e.data:null,isError:n,isLoading:a}}function A(t,e){return(0,p.openmrsFetch)("/ws/rest/v1/appointment",{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json"},body:t})}function g(t,e){return(0,p.openmrsFetch)("/ws/rest/v1/recurring-appointments",{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json"},body:t})}var f,v,h=(f=i().mark((function t(e,n,a){var o,s,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Intl.DateTimeFormat().resolvedOptions().timeZone,s=r()(new Date).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"),c="/ws/rest/v1/appointments/".concat(n,"/status-change"),t.next=6,(0,p.openmrsFetch)(c,{body:{toStatus:e,onDate:s,timeZone:o},method:"POST",headers:{"Content-Type":"application/json"}});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})),v=function(){var t=this,e=arguments;return new Promise((function(n,a){var i=f.apply(t,e);function o(t){l(i,n,a,o,r,"next",t)}function r(t){l(i,n,a,o,r,"throw",t)}o(void 0)}))},function(t,e,n){return v.apply(this,arguments)})},2541:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>z});var a=n(7900),i=n.n(a),o=n(4924),r=n(5986),s=n(2263),p=n(4405),c=n(7885),m=n(3282),l=n(2143),u=n(5441),d=n(2663),_=Object.prototype.hasOwnProperty;var A=n(7495),g=n(906),f=n(6636),v=n(6217),h=n(1354),C=n.n(h),b=n(1583),D=n.n(b),T=n(7378),E=n.n(T),w=n(5993),y=n.n(w),F=n(4154),S=n.n(F),k=n(8141),x=n.n(k),B=n(2258),Z={};Z.styleTagTransform=x(),Z.setAttributes=y(),Z.insert=E().bind(null,"head"),Z.domAPI=D(),Z.insertStyleElement=S(),C()(B.Z,Z);const I=B.Z&&B.Z.locals?B.Z.locals:void 0;var L=n(3565),O=n.n(L);const z=function(t){var e,n,h=t.patientUuid,C=t.setUpcomingAppointment,b=(0,o.useTranslation)().t,D=O()((new Date).toISOString()).subtract(6,"month").toISOString(),T=b("upcomingAppointments","Upcoming appointments"),E=(0,a.useMemo)((function(){return new AbortController}),[]);(0,a.useEffect)((function(){return function(){return E.abort()}}),[E]);var w=(0,f.zt)(h,D,E),y=w.data,F=w.isError,S=w.isLoading,k=(null==y||null===(e=y.todaysAppointments)||void 0===e?void 0:e.length)?null==y?void 0:y.todaysAppointments:[],x=(null==y||null===(n=y.upcomingAppointments)||void 0===n?void 0:n.length)?null==y?void 0:y.upcomingAppointments:[],B=k.concat(x),Z=function(t){if(null==t)return!0;if((0,m.Z)(t)&&((0,c.Z)(t)||"string"==typeof t||"function"==typeof t.splice||(0,l.Z)(t)||(0,d.Z)(t)||(0,p.Z)(t)))return!t.length;var e=(0,s.Z)(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if((0,u.Z)(t))return!(0,r.Z)(t).length;for(var n in t)if(_.call(t,n))return!1;return!0}(B)?[]:null==B?void 0:B.filter((function(t){return null===t.dateHonored}));return F?i().createElement(v.ErrorState,{headerTitle:T,error:F}):(S&&A.lSo,(null==Z?void 0:Z.length)?i().createElement("div",null,i().createElement("div",null,i().createElement("p",{className:I.sectionTitle},T),i().createElement("span",{className:I.headerLabel},b("appointmentToFulfill","Select appointment(s) to fulfill"))," "),i().createElement(A.x4x,null,i().createElement(A.SmK,null,i().createElement(A.s1N,{head:!0},i().createElement(A.agF,{head:!0},b("date","Date")),i().createElement(A.agF,{head:!0},b("appointmentType","Appointment type")),i().createElement(A.agF,{head:!0},b("action","Action")))),i().createElement(A.FxI,null,Z.map((function(t,e){return i().createElement(A.s1N,{label:!0,key:"row-".concat(e),className:I.structuredList},i().createElement(A.agF,null,(0,g.formatDate)((0,g.parseDate)(t.startDateTime),{mode:"wide"})),i().createElement(A.agF,null,t.service?t.service.name:"——"),i().createElement(A.agF,null,i().createElement(A.XZJ,{className:I.checkbox,key:e,labelText:"",defaultChecked:O()(new Date(t.startDateTime).toISOString()).isToday(),id:t.uuid,onChange:function(e){return e.target.checked?C(t):""}})))}))))):i().createElement(A.K0D,{kind:"info",lowContrast:!0,className:I.inlineNotification,title:b("upcomingAppointments","Upcoming appointments"),subtitle:b("noUpcomingAppointments","No upcoming appointments found")}))}}}]);