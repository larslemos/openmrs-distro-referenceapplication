/*! For license information please see 45.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_openmrs_esm_patient_notes_app=globalThis.webpackChunk_openmrs_esm_patient_notes_app||[]).push([[45],{452:(e,t,n)=>{var r=n(268),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,l=r[1];return s((function(){o.value=n,o.getSnapshot=t,u(o)&&l({inst:o})}),[e,n,t]),a((function(){return u(o)&&l({inst:o}),e((function(){u(o)&&l({inst:o})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},3100:(e,t,n)=>{e.exports=n(452)},187:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n(3221).Z.Symbol},8147:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(187),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r.Z?r.Z.toStringTag:void 0;var c=Object.prototype.toString;var u=r.Z?r.Z.toStringTag:void 0;const l=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}(e):function(e){return c.call(e)}(e)}},2168:(e,t,n)=>{n.d(t,{Z:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(2168),o="object"==typeof self&&self&&self.Object===Object&&self;const i=r.Z||o||Function("return this")()},3122:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3391:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(8147),o=n(3391);const i=function(e){return"symbol"==typeof e||(0,o.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},4729:(e,t,n)=>{n.d(t,{$l:()=>c,BN:()=>Z,DY:()=>o,J$:()=>U,JN:()=>v,LI:()=>R,PM:()=>d,W6:()=>T,i_:()=>s,ko:()=>H,kw:()=>k,mf:()=>l,o8:()=>u,qC:()=>V,s6:()=>Y,sj:()=>N,u3:()=>D,u_:()=>W,w6:()=>O,xD:()=>z});var r=n(268);const o=new WeakMap,i={},a=()=>{},s=a(),c=Object,u=e=>e===s,l=e=>"function"==typeof e,d=(e,t)=>({...e,...t}),f="undefined",g=typeof window!=f,p=typeof document!=f,v=(e,t)=>{const n=o.get(e);return[()=>e.get(t)||i,r=>{const o=e.get(t);n[5](t,d(o,r),o||i)},n[6]]},h=new WeakMap;let y=0;const b=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,i;if(c(e)!==e||r||n==RegExp)o=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=h.get(e),o)return o;if(o=++y+"~",h.set(e,o),n==Array){for(o="@",i=0;i<e.length;i++)o+=b(e[i])+",";h.set(e,o)}if(n==c){o="#";const t=c.keys(e).sort();for(;!u(i=t.pop());)u(e[i])||(o+=i+":"+b(e[i])+",");h.set(e,o)}}return o};let w=!0;const[_,E]=g&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[a,a],m={isOnline:()=>w,isVisible:()=>{const e=p&&document.visibilityState;return u(e)||"hidden"!==e}},S={initFocus:e=>(p&&document.addEventListener("visibilitychange",e),_("focus",e),()=>{p&&document.removeEventListener("visibilitychange",e),E("focus",e)}),initReconnect:e=>{const t=()=>{w=!0,e()},n=()=>{w=!1};return _("online",t),_("offline",n),()=>{E("online",t),E("offline",n)}}},O=!r.useId,T=!g||"Deno"in window,k=e=>g&&typeof window.requestAnimationFrame!=f?window.requestAnimationFrame(e):setTimeout(e,1),R=T?r.useEffect:r.useLayoutEffect,C="undefined"!=typeof navigator&&navigator.connection,L=!T&&C&&(["slow-2g","2g"].includes(C.effectiveType)||C.saveData),V=e=>{if(l(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?b(e):"",t]};let j=0;const D=()=>++j;var N={__proto__:null,FOCUS_EVENT:0,RECONNECT_EVENT:1,MUTATE_EVENT:2};async function Z(...e){const[t,n,r,i]=e,a=d({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{});let c=a.populateCache;const f=a.rollbackOnError;let g=a.optimisticData;const p=!1!==a.revalidate,h=a.throwOnError;if(l(n)){const e=n,r=[],o=t.keys();for(let n=o.next();!n.done;n=o.next()){const o=n.value;!o.startsWith("$inf$")&&e(t.get(o)._k)&&r.push(o)}return Promise.all(r.map(y))}return y(n);async function y(n){const[i]=V(n);if(!i)return;const[a,d]=v(t,i),[y,b,w]=o.get(t),_=y[i],E=()=>p&&(delete w[i],_&&_[0])?_[0](2).then((()=>a().data)):a().data;if(e.length<3)return E();let m,S=r;const O=D();b[i]=[O,0];const T=!u(g),k=a(),R=k.data,C=k._c,L=u(C)?R:C;if(T&&(g=l(g)?g(L):g,d({data:g,_c:L})),l(S))try{S=S(L)}catch(e){m=e}if(S&&l(S.then)){if(S=await S.catch((e=>{m=e})),O!==b[i][0]){if(m)throw m;return S}m&&T&&(e=>"function"==typeof f?f(e):!1!==f)(m)&&(c=!0,S=L,d({data:S,_c:s}))}c&&(m||(l(c)&&(S=c(S,L)),d({data:S,_c:s}))),b[i][1]=D();const j=await E();if(d({_c:s}),!m)return c?j:S;if(h)throw m}}const I=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},x=(e,t)=>{if(!o.has(e)){const n=d(S,t),r={},i=Z.bind(s,e);let c=a;const u={},l=(e,t)=>{const n=u[e]||[];return u[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},f=(t,n,r)=>{e.set(t,n);const o=u[t];if(o)for(let e=o.length;e--;)o[e](r,n)},g=()=>{if(!o.has(e)&&(o.set(e,[r,{},{},{},i,f,l]),!T)){const t=n.initFocus(setTimeout.bind(s,I.bind(s,r,0))),i=n.initReconnect(setTimeout.bind(s,I.bind(s,r,1)));c=()=>{t&&t(),i&&i(),o.delete(e)}}};return g(),[e,i,g,c]}return[e,o.get(e)[4]]},[P,M]=x(new Map),W=d({onLoadingSlow:a,onSuccess:a,onError:a,onErrorRetry:(e,t,n,r,o)=>{const i=n.errorRetryCount,a=o.retryCount,s=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!u(i)&&a>i||setTimeout(r,s,o)},onDiscarded:a,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:L?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:L?5e3:3e3,compare:(e,t)=>b(e)==b(t),isPaused:()=>!1,cache:P,mutate:M,fallback:{}},m),F=(e,t)=>{const n=d(e,t);if(t){const{use:r,fallback:o}=e,{use:i,fallback:a}=t;r&&i&&(n.use=r.concat(i)),o&&a&&(n.fallback=d(o,a))}return n},A=(0,r.createContext)({}),U=e=>{const{value:t}=e,n=(0,r.useContext)(A),o=l(t),i=(0,r.useMemo)((()=>o?t(n):t),[o,n,t]),a=(0,r.useMemo)((()=>o?i:F(n,i)),[o,n,i]),c=i&&i.provider,[u]=(0,r.useState)((()=>c?x(c(a.cache||P),i):s));return u&&(a.cache=u[0],a.mutate=u[1]),R((()=>{if(u)return u[2]&&u[2](),u[3]}),[]),(0,r.createElement)(A.Provider,d(e,{value:a}))},J=g&&window.__SWR_DEVTOOLS_USE__,$=J?window.__SWR_DEVTOOLS_USE__:[],q=e=>l(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],B=$.concat((e=>(t,n,r)=>e(t,n&&((...e)=>{const r=V(t)[0],[,,,i]=o.get(P),a=i[r];return a?(delete i[r],a):n(...e)}),r))),Y=e=>function(...t){const n=d(W,(0,r.useContext)(A)),[o,i,a]=q(t),s=F(n,a);let c=e;const{use:u}=s,l=(u||[]).concat(B);for(let e=l.length;e--;)c=l[e](c);return c(o,i||s.fetcher||null,s)},H=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}},z=(e,t)=>(...n)=>{const[r,o,i]=q(n),a=(i.use||[]).concat(t);return e(r,o,{...i,use:a})};J&&(window.__SWR_DEVTOOLS_REACT__=r)},3255:(e,t,n)=>{n.d(t,{ZP:()=>s});var r=n(268),o=n(3100),i=n(4729);const a={dedupe:!0};i.$l.defineProperty(i.J$,"defaultValue",{value:i.u_});var s=(0,i.s6)(((e,t,n)=>{const{cache:s,compare:c,suspense:u,fallbackData:l,revalidateOnMount:d,refreshInterval:f,refreshWhenHidden:g,refreshWhenOffline:p,keepPreviousData:v}=n,[h,y,b]=i.DY.get(s),[w,_]=(0,i.qC)(e),E=(0,r.useRef)(!1),m=(0,r.useRef)(!1),S=(0,r.useRef)(w),O=(0,r.useRef)(t),T=(0,r.useRef)(n),k=()=>T.current,R=()=>k().isVisible()&&k().isOnline(),[C,L,V]=(0,i.JN)(s,w),j=(0,r.useRef)({}).current,D=(0,i.o8)(l)?n.fallback[w]:l,N=(e,t)=>{let n=!0;for(const r in j){const o=r;c(t[o],e[o])||"data"===o&&(0,i.o8)(e[o])&&c(t[o],A)||(n=!1)}return n},Z=(0,r.useMemo)((()=>{const e=!!w&&!!t&&((0,i.o8)(d)?!k().isPaused()&&!u:d),n=()=>{const t=C(),n=(0,i.PM)(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n};let r=n();return()=>{const e=n();return N(e,r)?r:r=e}}),[s,w]),I=(0,o.useSyncExternalStore)((0,r.useCallback)((e=>V(w,((t,n)=>{N(t,n)||e()}))),[s,w]),Z,Z),x=!E.current,P=I.data,M=(0,i.o8)(P)?D:P,W=I.error,F=(0,r.useRef)(M),A=v?(0,i.o8)(P)?F.current:P:M,U=x&&!(0,i.o8)(d)?d:!k().isPaused()&&(u?!(0,i.o8)(M)&&n.revalidateIfStale:(0,i.o8)(M)||n.revalidateIfStale),J=!!(w&&t&&x&&U),$=(0,i.o8)(I.isValidating)?J:I.isValidating,q=(0,i.o8)(I.isLoading)?J:I.isLoading,B=(0,r.useCallback)((async e=>{const t=O.current;if(!w||!t||m.current||k().isPaused())return!1;let r,o,a=!0;const s=e||{},u=!b[w]||!s.dedupe,l=()=>i.w6?!m.current&&w===S.current&&E.current:w===S.current,d={isValidating:!1,isLoading:!1},f=()=>{L(d)},g=()=>{const e=b[w];e&&e[1]===o&&delete b[w]},p={isValidating:!0};(0,i.o8)(C().data)&&(p.isLoading=!0);try{if(u&&(L(p),n.loadingTimeout&&(0,i.o8)(C().data)&&setTimeout((()=>{a&&l()&&k().onLoadingSlow(w,n)}),n.loadingTimeout),b[w]=[t(_),(0,i.u3)()]),[r,o]=b[w],r=await r,u&&setTimeout(g,n.dedupingInterval),!b[w]||b[w][1]!==o)return u&&l()&&k().onDiscarded(w),!1;d.error=i.i_;const e=y[w];if(!(0,i.o8)(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return f(),u&&l()&&k().onDiscarded(w),!1;const s=C().data;d.data=c(s,r)?s:r,u&&l()&&k().onSuccess(r,w,n)}catch(e){g();const t=k(),{shouldRetryOnError:n}=t;t.isPaused()||(d.error=e,u&&l()&&(t.onError(e,w,t),(!0===n||(0,i.mf)(n)&&n(e))&&R()&&t.onErrorRetry(e,w,t,B,{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return a=!1,f(),!0}),[w,s]),Y=(0,r.useCallback)(((...e)=>(0,i.BN)(s,S.current,...e)),[]);if((0,i.LI)((()=>{O.current=t,T.current=n,(0,i.o8)(P)||(F.current=P)})),(0,i.LI)((()=>{if(!w)return;const e=B.bind(i.i_,a);let t=0;const n=(0,i.ko)(w,h,(n=>{if(n==i.sj.FOCUS_EVENT){const n=Date.now();k().revalidateOnFocus&&n>t&&R()&&(t=n+k().focusThrottleInterval,e())}else if(n==i.sj.RECONNECT_EVENT)k().revalidateOnReconnect&&R()&&e();else if(n==i.sj.MUTATE_EVENT)return B()}));return m.current=!1,S.current=w,E.current=!0,L({_k:_}),U&&((0,i.o8)(M)||i.W6?e():(0,i.kw)(e)),()=>{m.current=!0,n()}}),[w]),(0,i.LI)((()=>{let e;function t(){const t=(0,i.mf)(f)?f(M):f;t&&-1!==e&&(e=setTimeout(n,t))}function n(){C().error||!g&&!k().isVisible()||!p&&!k().isOnline()?t():B(a).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[f,g,p,w]),(0,r.useDebugValue)(A),u&&(0,i.o8)(M)&&w){if(!i.w6&&i.W6)throw new Error("Fallback data is required when using suspense in SSR.");throw O.current=t,T.current=n,m.current=!1,(0,i.o8)(W)?B(a):W}return{mutate:Y,get data(){return j.data=!0,A},get error(){return j.error=!0,W},get isValidating(){return j.isValidating=!0,$},get isLoading(){return j.isLoading=!0,q}}}))}}]);