(globalThis.webpackChunk_ohri_openmrs_esm_ohri_pmtct=globalThis.webpackChunk_ohri_openmrs_esm_ohri_pmtct||[]).push([[567],{1224:(e,t,n)=>{(t=n(3997)(!1)).push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-openmrs-esm-ohri-pmtct__common__productiveHeading01___2Xrax{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-openmrs-esm-ohri-pmtct__common__productiveHeading02___3pLLw{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-openmrs-esm-ohri-pmtct__common__productiveHeading03___lx-XO{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-openmrs-esm-ohri-pmtct__common__productiveHeading04___1AE9w{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-openmrs-esm-ohri-pmtct__common__productiveHeading05___IeIc_{font-size:var(--cds-heading-05-font-size, 2rem);font-weight:var(--cds-heading-05-font-weight, 400);line-height:var(--cds-heading-05-line-height, 1.25);letter-spacing:var(--cds-heading-05-letter-spacing, 0)}.-openmrs-esm-ohri-pmtct__common__productiveHeading06___3l8nT{font-size:var(--cds-heading-06-font-size, 2.625rem);font-weight:var(--cds-heading-06-font-weight, 300);line-height:var(--cds-heading-06-line-height, 1.199);letter-spacing:var(--cds-heading-06-letter-spacing, 0)}.-openmrs-esm-ohri-pmtct__common__bodyShort01___tC0Td{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-openmrs-esm-ohri-pmtct__common__helperText01___3-02F{font-size:var(--cds-helper-text-01-font-size, 0.75rem);line-height:var(--cds-helper-text-01-line-height, 1.33333);letter-spacing:var(--cds-helper-text-01-letter-spacing, 0.32px)}.-openmrs-esm-ohri-pmtct__common__bodyShort02___CkAf-{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0)}.-openmrs-esm-ohri-pmtct__common__bodyLong01___1s25s{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-openmrs-esm-ohri-pmtct__common__bodyLong02___1HsRE{font-size:var(--cds-body-02-font-size, 1rem);font-weight:var(--cds-body-02-font-weight, 400);line-height:var(--cds-body-02-line-height, 1.5);letter-spacing:var(--cds-body-02-letter-spacing, 0)}.-openmrs-esm-ohri-pmtct__common__label01___JJVmA{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-openmrs-esm-ohri-pmtct__common__text02___2MF5S{color:#525252}aside{background-color:#fff !important}div[class*=-esm-login__styles__center]>img{width:140px}.tab-12rem>button{width:12rem !important}.tab-14rem>button{width:14rem !important}.tab-16rem>button{width:16rem !important}.cds--overflow-menu>div{width:15rem !important}nav .cds--accordion__title{color:#525252;font-weight:600 !important}nav .cds--accordion__content{padding-bottom:0 !important;padding-top:0 !important}nav .cds--accordion__content>a{background-color:#cecece !important;color:#161616 !important;border-left-color:var(--brand-01) !important;font:bolder}.cds--tab--list button{max-width:16rem !important}div[class*=-openmrs-esm-ohri-pmtct__encounter-list__widgetContainer___2X088]{margin-top:1rem !important}div[class*=-openmrs-esm-ohri-pmtct__expandable-list__expandableListContainer___1uL8f]{margin-top:2rem !important}.-openmrs-esm-ohri-pmtct__common__widgetContainer___Zrx1a{background-color:#fff}.-openmrs-esm-ohri-pmtct__common__widgetHeaderContainer___7gnBA{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0 .75rem 1rem}.-openmrs-esm-ohri-pmtct__common__widgetHeaderContainer___7gnBA>h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-01)}.-openmrs-esm-ohri-pmtct__common__toggleButtons___3ll3G{width:fit-content;margin:0 .5rem}.-openmrs-esm-ohri-pmtct__common__tabContainer___2PnXA div[role=tabpanel]{padding:0 !important}.-openmrs-esm-ohri-pmtct__common__tabContainer___2PnXA li button{width:100% !important}.-openmrs-esm-ohri-pmtct__common__hivStatusTag___1KiUB{min-width:80px}',""]),t.locals={productiveHeading01:"-openmrs-esm-ohri-pmtct__common__productiveHeading01___2Xrax",productiveHeading02:"-openmrs-esm-ohri-pmtct__common__productiveHeading02___3pLLw",productiveHeading03:"-openmrs-esm-ohri-pmtct__common__productiveHeading03___lx-XO",productiveHeading04:"-openmrs-esm-ohri-pmtct__common__productiveHeading04___1AE9w",productiveHeading05:"-openmrs-esm-ohri-pmtct__common__productiveHeading05___IeIc_",productiveHeading06:"-openmrs-esm-ohri-pmtct__common__productiveHeading06___3l8nT",bodyShort01:"-openmrs-esm-ohri-pmtct__common__bodyShort01___tC0Td",helperText01:"-openmrs-esm-ohri-pmtct__common__helperText01___3-02F",bodyShort02:"-openmrs-esm-ohri-pmtct__common__bodyShort02___CkAf-",bodyLong01:"-openmrs-esm-ohri-pmtct__common__bodyLong01___1s25s",bodyLong02:"-openmrs-esm-ohri-pmtct__common__bodyLong02___1HsRE",label01:"-openmrs-esm-ohri-pmtct__common__label01___JJVmA",text02:"-openmrs-esm-ohri-pmtct__common__text02___2MF5S",widgetContainer:"-openmrs-esm-ohri-pmtct__common__widgetContainer___Zrx1a",widgetHeaderContainer:"-openmrs-esm-ohri-pmtct__common__widgetHeaderContainer___7gnBA",toggleButtons:"-openmrs-esm-ohri-pmtct__common__toggleButtons___3ll3G",tabContainer:"-openmrs-esm-ohri-pmtct__common__tabContainer___2PnXA",hivStatusTag:"-openmrs-esm-ohri-pmtct__common__hivStatusTag___1KiUB"},e.exports=t},8559:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var r=n(1354),a=n.n(r),i=n(1583),o=n.n(i),A=n(7378),c=n.n(A),u=n(5993),s=n.n(u),l=n(4154),d=n.n(l),m=n(8141),p=n.n(m),h=n(1224),f=n.n(h),_={};_.styleTagTransform=p(),_.setAttributes=s(),_.insert=c().bind(null,"head"),_.domAPI=o(),_.insertStyleElement=d(),a()(f(),_);const g=f()&&f().locals?f().locals:void 0},4339:(e,t,n)=>{"use strict";n.d(t,{L1:()=>d,bL:()=>c,bo:()=>A,fX:()=>o,g3:()=>l,lP:()=>s,nS:()=>u});var r=n(906),a=n(4061);n(561);var i="/ws/rest/v1/";function o(e){return(0,r.openmrsFetch)("/ws/rest/v1/idgen/identifiersource/".concat(e,"/identifier"),{headers:{"Content-Type":"application/json"},method:"POST",body:{}})}function A(e){return Promise.all(e.map((function(e){return function(e){return(0,r.openmrsFetch)("/ws/rest/v1/patient",{headers:{"Content-Type":"application/json"},method:"POST",body:e})}(e)})))}function c(e){return(0,r.openmrsFetch)("/ws/rest/v1/relationship",{headers:{"Content-Type":"application/json"},method:"POST",body:e})}function u(e,t){return(0,r.openmrsFetch)("".concat(i,"reportingrest/dataSet/").concat(a.V8,"?ptracker_id=").concat(e,"&patient_uuid=").concat(t)).then((function(e){return e.data||null}))}function s(e){return(0,r.openmrsFetch)("".concat(i,"/patient/").concat(e,"/identifier")).then((function(e){var t=e.data;return t.results.length?t.results:null}))}function l(e,t){return(0,r.openmrsFetch)("".concat(i,"patient/").concat(t,"/identifier"),{headers:{"Content-Type":"application/json"},method:"POST",body:e})}function d(e,t){return(0,r.openmrsFetch)("".concat(i,"reportingrest/dataSet/").concat(a.b2,"?person_uuid=").concat(e,"&ptracker_id=").concat(t)).then((function(e){return e.data||null}))}},4061:(e,t,n)=>{"use strict";n.d(t,{A:()=>I,Ah:()=>x,BV:()=>P,CX:()=>w,Cy:()=>X,Eu:()=>a,H9:()=>B,Hn:()=>b,Ke:()=>F,M$:()=>i,Me:()=>_,Qn:()=>f,Qq:()=>p,SB:()=>L,TZ:()=>l,Tn:()=>z,Tq:()=>H,Tv:()=>v,UT:()=>r,V8:()=>N,W$:()=>E,Wf:()=>o,Wp:()=>g,X:()=>O,XL:()=>d,Zu:()=>u,b2:()=>R,bD:()=>y,fe:()=>M,gZ:()=>j,hO:()=>U,hV:()=>k,ic:()=>D,mL:()=>V,mp:()=>h,pA:()=>S,pL:()=>c,po:()=>m,rq:()=>Y,u_:()=>A,uk:()=>s,xT:()=>T,yC:()=>C});var r="51bec6f7-df43-426e-a83e-c1ae5501372f",a="1305AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",i="4da0a3fe-e546-463f-81fa-084f098ff06c",o="9d6d1eec-2cd6-4637-a981-4a46b4b8b41f",A="6c45421e-2566-47cb-bbb3-07586fffbfe2",c="2678423c-0523-4d76-b0da-18177b439eed",u="159917AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",s="1719AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",l="c5f74c86-62cd-4d22-9260-4238f1e45fe0",d="6e62bf7e-2107-4d09-b485-6e60cbbb2d08",m="1568AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",p="163260AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",h="1856AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",f="1c70c490-cafa-4c95-9fdd-a30b62bb78b8",_="164803AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",g="164802AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",y="af1f1b24-d2e8-4282-b308-0bf79b365584",v="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",b="163260AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",T="1148AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",x="a40d8bc4-56b8-4f28-a1dd-412da5cf20ed",w="1151AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",k="160433AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",S="159599AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",I="2549af50-75c8-4aeb-87ca-4bb2cef6c69a",F="163260AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",V="159427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",E="164402AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",D="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",O="5596AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",H="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",B="159599AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",L="ee8c0292-47f8-4c01-8b60-8ba13a560e1a",P="6027869c-5d7e-4a82-b22f-6d9c57d61a4d",C="269bcc7f-04f8-4ddc-883d-7a3a0d569aad",M="159427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",U="163281AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z="1305AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",X="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",N="5299521a-7fad-47bb-8280-14c99d04c790",R="ed50a889-dd5b-4759-861c-b54e3c686fe7",j="12de5bc5-352e-4faf-9961-a2125085a75c",Y=["Antenatal","Labor and Delivery","Mother Postnatal"]},2567:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V});var r=n(7900),a=n.n(r),i=n(6903),o=n(2265),A=n(8559),c=n(561),u=n(4061),s=n(8376),l=n.n(s),d=n(2206),m=n(906),p=n(4339);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n,r,a,i,o){try{var A=e[i](o),c=A.value}catch(e){return void n(e)}A.done?t(c):Promise.resolve(c).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,A,"next",e)}function A(e){f(i,r,a,o,A,"throw",e)}o(void 0)}))}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,A=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){A=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(A)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function A(i){return function(A){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,A])}}};const v=function(e){var t=e.patientUuid,n=(0,i.useTranslation)().t,A=n("recentPregnancy","Recent Pregnancy"),s=n("art","ART"),h=n("appointments","Appointments"),f=n("family","Family"),v=n("pregnancyOutcome","Pregnancy Outcome"),b=n("previousVisitsSummary","Previous Visits"),T=g((0,r.useState)([]),2),x=T[0],w=T[1],k=g((0,r.useState)([]),2),S=k[0],I=k[1],F=g((0,r.useState)([]),2),V=F[0],E=F[1],D=[{header:n("pTrackerId","PTracker ID"),key:"pTrackerId"},{header:n("name","Name"),key:"name"},{header:n("relationship","Relationship"),key:"relationship"},{header:n("dateOfBirth","Date of birth"),key:"dateOfBirth"},{header:n("hivStatus","HIV Status"),key:"hivStatus"}],O=[{header:n("pTrackerId","PTracker ID"),key:"pTrackerId"},{header:n("dateOfBirth","Date of Birth"),key:"dateOfBirth"},{header:n("infantStatus","Infant Status at Birth"),key:"infantStatus"}];function H(){return(H=_((function(){var e,n;return y(this,(function(r){switch(r.label){case 0:return e=[],[4,(0,c.IXl)(t)];case 1:return(n=r.sent()).length&&n.forEach((function(t){e.push(t)})),w(e),[2]}}))}))).apply(this,arguments)}function B(){return(B=_((function(){var e,n;return y(this,(function(r){switch(r.label){case 0:return[4,(0,c.syo)(t,u.A)];case 1:return e=r.sent(),[4,(0,c.syo)(t,u.pL)];case 2:return(n=r.sent()).encounterDatetime>e.encounterDatetime&&E(n.obs.filter((function(e){return e.concept.uuid===u.Qn}))),[2]}}))}))).apply(this,arguments)}function L(){return L=_((function(e){var t,n;return y(this,(function(r){switch(r.label){case 0:return t={patientId:"",pTrackerId:"--"},[4,(0,p.lP)(e)];case 1:return(n=r.sent())&&(t.pTrackerId=n.find((function(e){return e.identifierType.uuid===u.M$})).identifier,t.patientId=e),[2,t]}}))})),L.apply(this,arguments)}(0,r.useEffect)((function(){!function(){B.apply(this,arguments)}(),function(){H.apply(this,arguments)}()}),[]),(0,r.useEffect)((function(){var e=x.map((function(e){return function(e){return L.apply(this,arguments)}(e.personB.uuid)}));Promise.all(e).then((function(e){I(e.map((function(e){return{patientId:e.patientId,pTrackerId:e.pTrackerId}})))}))}),[x]);var P=(0,r.useMemo)((function(){var e=[];return x.forEach((function(n){if(n.personB.uuid!==t){var r,i=a().createElement(o.rUS,{onClick:function(e){e.preventDefault(),(0,m.navigate)({to:"".concat(c.sb4).concat(n.personB.uuid,"/chart")})}},n.personB.display),A={id:n.uuid,pTrackerId:null===(r=S.find((function(e){return e.patientId===n.personB.uuid})))||void 0===r?void 0:r.pTrackerId,name:i,relationship:n.relationshipType.displayBIsToA,dateOfBirth:l()(n.personB.birthdate).format("DD-MMM-YYYY"),hivStatus:""};e.push(A)}})),e}),[x,S]),C=(0,r.useMemo)((function(){var e=[];return V.forEach((function(t){var n,r,a,i,o,A=t.groupMembers.find((function(e){return e.concept.uuid===u.Zu})),c={id:t.uuid,pTrackerId:null===(n=t.groupMembers.find((function(e){return e.concept.uuid===u.Me})))||void 0===n?void 0:n.value,dateOfBirth:l()(null===(r=t.groupMembers.find((function(e){return e.concept.uuid===u.Wp})))||void 0===r?void 0:r.value).format("DD-MMM-YYYY"),infantStatus:(null===(a=null===(i=A.value)||void 0===i||null===(o=i.names)||void 0===o?void 0:o.find((function(e){return"SHORT"===e.conceptNameType})))||void 0===a?void 0:a.name)||A.value.name.name};e.push(c)})),e}),[V]),M=(0,r.useMemo)((function(){return[{key:"motherHIVStatus",header:n("motherHIVStatus","Mother HIV Status"),encounterTypes:[u.pL],getObsValue:(e=_((function(e){var n,r,a,i;return y(this,(function(o){switch(o.label){case 0:return n=g(e,1),r=n[0],a=(0,c.hFx)(r,u.u_),[4,(0,p.L1)(t,a)];case 1:return[2,(i=o.sent()).rows.length?i.rows[0].mother_hiv_status:"--"]}}))})),function(t){return e.apply(this,arguments)})},{key:"expectedDeliveryDate",header:n("expectedDeliveryDate","Expected Delivery Date"),encounterTypes:[u.A],getObsValue:function(){var e=_((function(e){var t,n;return y(this,(function(r){return t=g(e,1),n=t[0],[2,(0,c.hFx)(n,u.X,!0)]}))}));return function(t){return e.apply(this,arguments)}}(),getObsSummary:function(e){var t=g(e,1)[0],n=(0,c.hFx)(t,u.X,!0);if("--"!==n){var r=R(n);n=n>0?"In ".concat(r):""}return n}},{key:"motherStatus",header:n("motherStatus","Mother Status"),encounterTypes:[u.pL],getObsValue:function(e){return(0,c.hFx)(e,u.mp)}}];var e}),[]),U=(0,r.useMemo)((function(){return[{key:"artInitiation",header:n("artInitiation","ART Initiation"),encounterTypes:[u.yC,u.pL,u.A],getObsValue:function(e){var t={artInitiation:(0,c.hFx)(e[0],u.XL),artStartDate:(0,c.hFx)(e[0],u.H9,!0),pTrackerId:(0,c.hFx)(e[0],u.u_)},n={artInitiation:(0,c.hFx)(e[1],u.XL),artStartDate:(0,c.hFx)(e[1],u.H9,!0),pTrackerId:(0,c.hFx)(e[1],u.u_)},r={artInitiation:(0,c.hFx)(e[2],u.XL),artStartDate:(0,c.hFx)(e[2],u.H9,!0),pTrackerId:(0,c.hFx)(e[2],u.u_)};return N(t,n,r).artInitiation}},{key:"artStartDate",header:n("artStartDate","ART Start Date"),encounterTypes:[u.yC,u.pL,u.A],getObsValue:function(e){var t={artInitiation:(0,c.hFx)(e[0],u.XL),artStartDate:(0,c.hFx)(e[0],u.H9,!0),pTrackerId:(0,c.hFx)(e[0],u.u_)},n={artInitiation:(0,c.hFx)(e[1],u.XL),artStartDate:(0,c.hFx)(e[1],u.H9,!0),pTrackerId:(0,c.hFx)(e[1],u.u_)},r={artInitiation:(0,c.hFx)(e[2],u.XL),artStartDate:(0,c.hFx)(e[2],u.H9,!0),pTrackerId:(0,c.hFx)(e[2],u.u_)};return N(t,n,r).artStartDate}}]}),[]),z=(0,r.useMemo)((function(){return[{key:"nextAppointmentDate",header:n("nextAppointmentDate","Next Appointment Date"),encounterTypes:[u.A],getObsValue:function(e){var t=g(e,1)[0];return(0,c.hFx)(t,u.Tq,!0)},getObsSummary:function(e){var t=g(e,1)[0],n=(0,c.hFx)(t,u.Tq,!0);if("--"!==n){var r=R(n);n=n>0?"In ".concat(r):""}return n}},{key:"ancVisitsAttended",header:n("ancVisitsAttended","ANC visits attended"),encounterTypes:[u.A],getObsValue:(e=_((function(e){var n,r,a,i;return y(this,(function(o){switch(o.label){case 0:return n=g(e,1),r=n[0],a=(0,c.hFx)(r,u.u_),[4,(0,p.nS)(a,t)];case 1:return[2,(i=o.sent()).rows.length?i.rows[0].total:"0"]}}))})),function(t){return e.apply(this,arguments)})}];var e}),[]),X=(0,r.useMemo)((function(){return[{key:"visitType",header:n("visitType","Visit Type"),getValue:function(e){return e.encounterType.name}},{key:"visitDate",header:n("visitDate","Visit date"),getValue:function(e){return(0,c.hFx)(e,u.Qq,!0)}},{key:"facility",header:n("facility","Facility"),getValue:function(e){return e.location.name}},{key:"nextFollowUpDate",header:n("nextFollowUpDate","Next Follow-up date"),getValue:function(e){return(0,c.hFx)(e,u.ic,!0)}},{key:"actions",header:n("actions","Actions"),getValue:function(e){return[{form:j(e),encounterUuid:e.uuid,intent:"*",label:n("viewDetails","View details"),mode:"view"}]}}]}),[]),N=function(e,t,n){var r=[e,t,n].filter((function(e){return"--"!==e.artInitiation}));return 0==r.length?{artInitiation:"--",artStartDate:"--"}:(1==r.length||r.sort((function(e,t){return t.pTrackerId.localeCompare(e.pTrackerId)})),r[0])},R=function(e){var t=new Date(e).getTime()-(new Date).getTime(),n=Math.floor(t/864e5);return"".concat(n," day(s)")},j=function(e){var t=e.encounterType.name;return t===u.rq[0]?{name:"antenatal",package:"maternal_health"}:t===u.rq[1]?{name:"labour_and_delivery",package:"maternal_health"}:{name:"mother_postnatal_form",package:"maternal_health"}};return a().createElement("div",null,a().createElement(c.eBf,{patientUuid:t,headerTitle:A,columns:M}),a().createElement("div",{style:{display:"flex",flexDirection:"row",gap:"1rem",height:"15rem"}},a().createElement(c.eBf,{patientUuid:t,headerTitle:s,columns:U}),a().createElement(c.eBf,{patientUuid:t,headerTitle:h,columns:z})),a().createElement(c.BRj,{patientUuid:t,headerTitle:v,headers:O,items:C,isActionable:!0,isStriped:!0,launchOptions:{hideFormLauncher:!0,moduleName:"",displayText:""}}),a().createElement(c.BRj,{patientUuid:t,headerTitle:f,headers:D,items:P,isActionable:!0,isStriped:!0,launchOptions:{hideFormLauncher:!0,moduleName:"",displayText:""}}),a().createElement(c.IOg,{patientUuid:t,encounterType:u.gZ,columns:X,description:b,headerTitle:b,formList:[{name:"Antenatal Form"}],launchOptions:{hideFormLauncher:!0,moduleName:d.moduleName,displayText:""},filter:function(e){var t=e.encounterType.name;return u.rq.some((function(e){return-1!==t.indexOf(e)}))}}))},b=function(e){var t=e.patientUuid,n=(0,i.useTranslation)().t,o=n("previousPregnancies","Previous Pregnancies"),A=(0,r.useMemo)((function(){return[{key:"pTrackerId",header:n("pTrackerId","PTracker Id"),getValue:function(e){return(0,c.hFx)(e,u.u_)}},{key:"ancVisits",header:n("ancVisits","ANC visits"),getValue:function(e){var n=(0,c.hFx)(e,u.u_);return(0,p.nS)(n,t).then((function(e){return e.data.rows[0].total}))}},{key:"deliveryDate",header:n("deliveryDate",'Delivery Date"'),getValue:function(e){return(0,c.hFx)(e,u.Hn,!0)}},{key:"statusAtBirth",header:n("statusAtBirth","Status at birth"),getValue:function(e){return(0,c.hFx)(e,u.Zu)}},{key:"arvLinkage",header:n("arvLinkage","ARV linkage"),getValue:function(e){return(0,c.hFx)(e,u.xT)}},{key:"birthCount",header:n("birthCount","Birth count"),getValue:function(e){return(0,c.hFx)(e,u.po)}},{key:"pregancyOutcome",header:n("pregancyOutcome","Pregnancy outcome"),getValue:function(e){return e.location.name}},{key:"actions",header:n("actions","Actions"),getValue:function(e){return[{form:{name:"labour_and_delivery",package:"maternal_health"},encounterUuid:e.uuid,intent:"*",label:n("viewDetails","View details"),mode:"view"},{form:{name:"labour_and_delivery",package:"maternal_health"},encounterUuid:e.uuid,intent:"*",label:n("editForm","Edit form"),mode:"edit"}]}}]}),[]);return a().createElement(c.IOg,{patientUuid:t,encounterType:u.pL,formList:[{name:"labour_and_delivery"}],columns:A,description:o,headerTitle:o,launchOptions:{displayText:n("add","Add"),moduleName:d.moduleName}})},T=function(e){e.patientUuid;var t=(0,(0,i.useTranslation)().t)("timeline","Timeline");return a().createElement(a().Fragment,null,a().createElement(c.P$V,{displayText:t,headerTitle:t}))};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,a,i,o){try{var A=e[i](o),c=A.value}catch(e){return void n(e)}A.done?t(c):Promise.resolve(c).then(r,a)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){w(i,r,a,o,A,"next",e)}function A(e){w(i,r,a,o,A,"throw",e)}o(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,A=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){A=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(A)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function A(i){return function(A){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,A])}}};const F=function(e){var t=e.patientUuid,n=e.dateOfBirth,A=(0,i.useTranslation)().t,s=S((0,r.useState)([]),2),h=s[0],f=s[1],_=S((0,r.useState)([]),2),g=_[0],y=_[1];(0,r.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]);var v=(0,r.useMemo)((function(){return[{key:"artProphylaxisStatus",header:A("artProphylaxisStatus","ART Prophylaxis Status"),encounterTypes:[u.bD],getObsValue:function(e){var t=S(e,1)[0];return(0,c.hFx)(t,u.xT)}},{key:"breastfeeding",header:A("breastfeeding","Breastfeeding"),encounterTypes:[u.bD],getObsValue:function(e){var t=S(e,1)[0];return(0,c.hFx)(t,u.CX)}},{key:"hivStatus",header:A("hivStatus","HIV Status"),encounterTypes:[],getObsValue:function(e){var t=S(e,1)[0];return(0,c.hFx)(t,u.BV)}},{key:"finalOutcome",header:A("finalOutcome","Final Outcome"),encounterTypes:[],getObsValue:function(e){var t=S(e,1)[0];return(0,c.hFx)(t,u.hV)}}]}),[]),b=(0,r.useMemo)((function(){return[{key:"date",header:A("date","Date"),getValue:function(e){return(0,c.hFx)(e,u.H9,!0)}},{key:"testType",header:A("testType","Test Type"),getValue:function(e){return(0,c.hFx)(e,u.SB)}},{key:"ageAtTimeOfTest",header:A("ageAtTimeOfTest","Age at time of test"),getValue:function(e){var t=(0,c.hFx)(e,u.H9);return l()(t).diff(n,"days")}},{key:"hivStatus",header:A("hivStatus","HIV Status"),getValue:function(e){return(0,c.hFx)(e,u.BV)}}]}),[]),T=[{key:"id",header:"ID"},{key:"name",header:A("name","Name")},{key:"relationship",header:A("relationship","Relationship")},{key:"dateOfBirth",header:A("dateOfBirth","Date of birth")},{key:"hivStatus",header:A("hivStatus","HIV Status")}];function x(){return(x=k((function(){var e,n;return I(this,(function(r){switch(r.label){case 0:return e=[],[4,(0,c.IXl)(t)];case 1:return(n=r.sent()).length&&n.forEach((function(t){e.push(t)})),f(e),[2]}}))}))).apply(this,arguments)}function w(){return w=k((function(e){var t,n;return I(this,(function(r){switch(r.label){case 0:return t={patientId:"",pTrackerId:"--"},[4,(0,p.lP)(e)];case 1:return(n=r.sent())&&(t.pTrackerId=n.find((function(e){return e.identifierType.uuid===u.M$})).identifier,t.patientId=e),[2,t]}}))})),w.apply(this,arguments)}(0,r.useEffect)((function(){var e=h.map((function(e){return function(e){return w.apply(this,arguments)}(e.personA.uuid)}));Promise.all(e).then((function(e){y(e.map((function(e){return{patientId:e.patientId,pTrackerId:e.pTrackerId}})))}))}),[h]);var F=(0,r.useMemo)((function(){var e=[];return h.forEach((function(t){var n,r=a().createElement(o.rUS,{onClick:function(e){e.preventDefault(),(0,m.navigate)({to:"".concat(c.sb4).concat(t.personA.uuid,"/chart")})}},t.personA.display),i={id:t.uuid,pTrackerId:null===(n=g.find((function(e){return e.patientId===t.personA.uuid})))||void 0===n?void 0:n.pTrackerId,name:r,relationship:t.relationshipType.displayAIsToB,dateOfBirth:l()(t.personA.birthdate).format("DD-MMM-YYYY"),hivStatus:""};e.push(i)})),e}),[h,g]),V=(0,r.useMemo)((function(){return[{key:"visitType",header:A("visitType","Visit Type"),getValue:function(e){return e.encounterType.name}},{key:"visitDate",header:A("visitDate","Visit date"),getValue:function(e){return(0,c.hFx)(e,u.pA,!0)}},{key:"facility",header:A("facility","Facility"),getValue:function(e){return e.location.name}},{key:"nextFollowUpDate",header:A("nextFollowUpDate","Next Follow-up date"),getValue:function(e){return(0,c.hFx)(e,u.ic,!0)}},{key:"actions",header:A("actions","Actions"),getValue:function(e){return[{form:{name:"infant_postnatal",package:"child_health"},encounterUuid:e.uuid,intent:"*",label:A("viewDetails","View details"),mode:"view"}]}}]}),[]),E=A("previousVisitsSummary","Previous Visits");return a().createElement("div",null,a().createElement(c.eBf,{patientUuid:t,headerTitle:A("infantSummary","Infants Summary"),columns:v}),a().createElement(c.IOg,{patientUuid:t,encounterType:u.bD,formList:[{name:"infant_postnatal"}],columns:b,description:A("hivMonitoring","HIV Monitoring"),headerTitle:A("hivMonitoring","HIV Monitoring"),launchOptions:{hideFormLauncher:!0,displayText:"",moduleName:d.moduleName}}),a().createElement(c.BRj,{headerTitle:A("family","Family"),patientUuid:t,headers:T,items:F,isActionable:!0,isStriped:!0,launchOptions:{hideFormLauncher:!0,moduleName:"",displayText:""}}),a().createElement(c.IOg,{patientUuid:t,encounterType:u.bD,columns:V,description:E,headerTitle:E,formList:[{name:"Infant - Postanal Form"}],launchOptions:{hideFormLauncher:!0,moduleName:d.moduleName,displayText:""}}))},V=function(e){var t=e.patientUuid,n=(0,i.useTranslation)().t,r=(0,m.usePatient)(t),c=r.patient,u=r.isLoading,s=null==c?void 0:c.birthDate,d=l()().diff(null==c?void 0:c.birthDate,"years");return a().createElement(a().Fragment,null,u?a().createElement(o.gqd,{rowCount:5}):a().createElement("div",{className:A.default.tabContainer},d>10?a().createElement(o.mQc,null,a().createElement(o.tdY,{contained:!0},a().createElement(o.OK9,null,n("recentPregnancy","Recent Pregnancy")),a().createElement(o.OK9,null,n("previousPregnancies","Previous Pregnancies")),a().createElement(o.OK9,null,n("timeline","Timeline"))),a().createElement(o.nPR,null,a().createElement(o.x45,null,a().createElement(v,{patientUuid:t})),a().createElement(o.x45,null,a().createElement(b,{patientUuid:t})),a().createElement(o.x45,null,a().createElement(T,{patientUuid:t})))):a().createElement(o.mQc,null,a().createElement(o.tdY,{contained:!0},a().createElement(o.OK9,null,n("hivExposedInfant","HIV Exposed infant")),a().createElement(o.OK9,null,n("timeline","Timeline"))),a().createElement(o.nPR,null,a().createElement(o.x45,null,a().createElement(F,{patientUuid:t,dateOfBirth:s})),a().createElement(o.x45,null,a().createElement(T,{patientUuid:t}))))))}}}]);